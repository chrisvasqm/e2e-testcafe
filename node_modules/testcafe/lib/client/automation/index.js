!function(){function t(e,n){var o=e.document;!function(t){"use strict";var e,n,o,r,i,s={".js":[],".json":[],".css":[],".html":[]},l="function"==typeof require?require:null;return r=function(t){var e=new Error("Could not find module '"+t+"'");return e.code="MODULE_NOT_FOUND",e},i=function(t,e,n){var o,r;if("function"==typeof t[e+n])return e+n;for(o=0;r=s[n][o];++o)if("function"==typeof t[e+r])return e+r;return null},e=function(t,o,s,l,a,u){var c,f,d,h,p,m;for(s=s.split(/[\\\/]/),c=s.pop(),"."!==c&&".."!==c||(s.push(c),c="");null!=(f=s.shift());)if(f&&"."!==f&&(".."===f?(t=o.pop(),u=u.slice(0,u.lastIndexOf("/"))):(o.push(t),t=t[f],u+="/"+f),!t))throw r(l);if(c&&"function"!=typeof t[c]&&(m=i(t,c,".js"),m||(m=i(t,c,".json")),m||(m=i(t,c,".css")),m||(m=i(t,c,".html")),m?c=m:2!==a&&"object"==typeof t[c]&&(o.push(t),t=t[c],u+="/"+c,c="")),!c)return 1!==a&&t[":mainpath:"]?e(t,o,t[":mainpath:"],l,1,u):e(t,o,"index",l,2,u);if(p=t[c],!p)throw r(l);return p.hasOwnProperty("module")?p.module.exports:(d={},p.module=h={exports:d,id:u+"/"+c},p.call(d,d,h,n(t,o,u)),h.exports)},o=function(n,o,i,s){var a,u=i,c=i.charAt(0),f=0;if("/"===c){if(u=u.slice(1),n=t["/"],!n){if(l)return l(i);throw r(i)}s="/",o=[]}else if("."!==c){if(a=u.split("/",1)[0],n=t[a],!n){if(l)return l(i);throw r(i)}s=a,o=[],u=u.slice(a.length+1),u||(u=n[":mainpath:"],u?f=1:(u="index",f=2))}return e(n,o,u,i,f,s)},(n=function(t,e,n){return function(r){return o(t,[].concat(e),r,n)}})(t,[],"")}({"testcafe-phoenix":{src:{client:{automation:{"cursor.js":function(t,n,o){function r(t){return t&&t.__esModule?t:{"default":t}}t.__esModule=!0;var i=o("./deps/testcafe-core"),s=r(i),l=o("./deps/testcafe-ui"),a=r(l),u=s["default"].domUtils,c=e.top===e?a["default"].cursorUI:a["default"].iframeCursorUI;t["default"]={x:-1,y:-1,currentActiveWindow:e.top,_ensureActiveWindow:function(){if(this.currentActiveWindow!==e&&this.currentActiveWindow!==e.parent){var t=u.findIframeByWindow(this.currentActiveWindow);t&&u.isElementInDocument(t)||(this.currentActiveWindow=e)}},get active(){return this._ensureActiveWindow(),this.currentActiveWindow===e},set activeWindow(t){this.currentActiveWindow=t},get activeWindow(){return this._ensureActiveWindow(),this.currentActiveWindow},get position(){return{x:this.x,y:this.y}},get visible(){return e.top===e&&c.isVisible()},move:function(t,e){return this.x=t,this.y=e,c.move(this.x,this.y)},hide:function(){this.visible&&c.hide()},show:function(){e.top===e&&c.show()},leftButtonDown:function(){return c.leftButtonDown()},rightButtonDown:function(){return c.rightButtonDown()},buttonUp:function(){return c.buttonUp()}},n.exports=t["default"]},deps:{"hammerhead.js":function(t,n,o){t.__esModule=!0,t["default"]=e["%hammerhead%"],n.exports=t["default"]},"testcafe-core.js":function(t,n,o){t.__esModule=!0,t["default"]=e["%testCafeCore%"],n.exports=t["default"]},"testcafe-ui.js":function(t,n,o){t.__esModule=!0,t["default"]=e["%testCafeUI%"],n.exports=t["default"]}},"errors.js":function(t,e,n){t.__esModule=!0,t["default"]={elementIsInvisibleError:"elementIsInvisibleError",foundElementIsNotTarget:"foundElementIsNotTarget"},e.exports=t["default"]},"get-element.js":function(t,n,o){function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){var o=null;return g["default"].hide(n).then(function(){return o=S.getElementFromPoint(t,e),g["default"].show(n)}).then(function(){return o})}function s(t,e){var n=_.closest(e,"map");return n&&n.name===t.useMap.substring(1)?e:t}function l(t,e,n){var o=S.getElementFromPoint(t,e),r=_.containsElement(n,o)&&o.textContent.length;return o&&o===n||r?o:null}function a(t,e){var n=e&&_.isDomElement(e);if(!n||!t||t===e)return t;var o="tref"===_.getTagName(e);if(o)return e;var r="area"===_.getTagName(e)&&_.isImgElement(t);if(y.isFirefox&&r)return s(t,e);var i=_.isAnchorElement(e)||_.getParents(e,"a").length,a=i&&_.containsElement(e,t)&&t.textContent.length,u=i&&!a&&e.textContent.length;if(!u)return t;var c=e.getBoundingClientRect();return l(c.right-1,c.top+1,e)||l(c.left+1,c.bottom-1,e)||t}function u(t,n,o){var r=e!==e.top,s=null;return i(t,n).then(function(e){s=e;var l=b.resolve(e);return!s&&r&&t>0&&n>0&&(l=l.then(function(){return i(t,n,!0)}).then(function(t){return s=t,t})),l.then(function(t){return a(t,o)}).then(function(t){return{element:t,corrected:t!==s}})})}function c(){var t=v["default"].position;return u(t.x,t.y).then(function(t){var e=t.element;return e})}t.__esModule=!0,t.fromPoint=u,t.underCursor=c;var f=o("./deps/hammerhead"),d=r(f),h=o("./deps/testcafe-core"),p=r(h),m=o("./deps/testcafe-ui"),g=r(m),E=o("./cursor"),v=r(E),y=d["default"].utils.browser,b=d["default"].Promise,S=p["default"].positionUtils,_=p["default"].domUtils},"index.js":function(n,o,r){function i(t){return t&&t.__esModule?t:{"default":t}}var s=r("./deps/hammerhead"),l=i(s),a=r("./playback/click"),u=i(a),c=r("./playback/click/select-child"),f=i(c),d=r("./playback/dblclick"),h=i(d),p=r("./playback/drag/to-offset"),m=i(p),g=r("./playback/drag/to-element"),E=i(g),v=r("./playback/hover"),y=i(v),b=r("./playback/press"),S=i(b),_=r("./playback/rclick"),A=i(_),w=r("./playback/select/select-text"),x=i(w),P=r("./playback/select/select-editable-content"),C=i(P),M=r("./playback/type"),T=i(M),O=r("./playback/upload"),I=i(O),D=r("../../test-run/commands/options"),N=r("./settings"),U=i(N),k=r("./utils/offsets"),j=r("./playback/select/calculate-select-text-arguments"),B=i(j),F=r("./errors"),R=i(F),Y=r("./cursor"),K=i(Y);n.Click=u["default"],n.SelectChildClick=f["default"],n.DblClick=h["default"],n.DragToOffset=m["default"],n.DragToElement=E["default"],n.Hover=y["default"],n.Press=S["default"],n.RClick=A["default"],n.SelectText=x["default"],n.SelectEditableContent=C["default"],n.Type=T["default"],n.Upload=I["default"],n.MouseOptions=D.MouseOptions,n.ClickOptions=D.ClickOptions,n.TypeOptions=D.TypeOptions,n.ERROR_TYPES=R["default"],n.AutomationSettings=U["default"],n.getOffsetOptions=k.getOffsetOptions,n.calculateSelectTextArguments=B["default"],n.cursor=K["default"],n.get=r,l["default"].nativeMethods.objectDefineProperty.call(e,e,"%testCafeAutomation%",{configurable:!0,value:n}),l["default"].on(l["default"].EVENTS.evalIframeScript,function(e){return t(e.iframe.contentWindow,!0)})},playback:{click:{"index.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}t.__esModule=!0;var l=n("../../deps/hammerhead"),a=o(l),u=n("../../deps/testcafe-core"),c=o(u),f=n("../../deps/testcafe-ui"),d=o(f),h=n("../visible-element-automation"),p=o(h),m=n("../../utils/utils"),g=n("../../cursor"),E=o(g),v=n("../../utils/next-tick"),y=o(v),b=a["default"].Promise,S=a["default"].utils.extend,_=a["default"].utils.browser,A=a["default"].utils.featureDetection,w=a["default"].eventSandbox.eventSimulator,x=c["default"].domUtils,P=c["default"].styleUtils,C=c["default"].eventUtils,M=c["default"].arrayUtils,T=c["default"].delay,O=d["default"].selectElement,I=function(t){function e(n,o){r(this,e);var s=i(this,t.call(this,n,o));return s.modifiers=o.modifiers,s.caretPos=o.caretPos,s.targetElementParentNodes=[],s.activeElementBeforeMouseDown=null,s.mouseDownElement=null,s.eventState={mousedownPrevented:!1,blurRaised:!1,simulateDefaultBehavior:!0,clickElement:null},s}return s(e,t),e.prototype._bindMousedownHandler=function(){var t=this,e=function n(e){t.eventState.mousedownPrevented=e.defaultPrevented,C.preventDefault(e),C.unbind(t.element,"mousedown",n)};C.bind(this.element,"mousedown",e)},e.prototype._bindBlurHandler=function(t){var e=this,n=function o(){e.eventState.blurRaised=!0,C.unbind(t,"blur",o,!0)};C.bind(t,"blur",n,!0)},e.prototype._raiseTouchEvents=function(t){A.isTouchDevice&&(w.touchstart(t.element,t.options),w.touchend(t.element,t.options))},e.prototype._mousedown=function(t){var e=this;return this.targetElementParentNodes=x.getParents(t.element),this.mouseDownElement=t.element,E["default"].leftButtonDown().then(function(){e._raiseTouchEvents(t);var n=x.getActiveElement();e.activeElementBeforeMouseDown=n;var o=(_.isWebKit||_.isIE)&&x.isSelectElement(e.mouseDownElement);return o&&e._bindMousedownHandler(),e._bindBlurHandler(n),e.eventState.simulateDefaultBehavior=w.mousedown(t.element,t.options),e.eventState.simulateDefaultBehavior===!1&&(e.eventState.simulateDefaultBehavior=o&&!e.eventState.mousedownPrevented),e._ensureActiveElementBlur(n)}).then(function(){return e._focus(t)})},e.prototype._ensureActiveElementBlur=function(t){var e=this;return new b(function(n){var o=x.getActiveElement()!==t&&!e.eventState.blurRaised;return o?void(_.isIE&&_.version<12?(0,y["default"])().then(function(){e.eventState.blurRaised||w.blur(t),n()}):(w.blur(t),n())):void n()})},e.prototype._focus=function(t){if(this.eventState.simulateDefaultBehavior===!1)return b.resolve();var e=x.isContentEditableElement(this.element)?this.element:t.element,n=!_.isIE||this.activeElementBeforeMouseDown===x.getActiveElement();return(0,m.focusAndSetSelection)(e,n,this.caretPos)},e._getElementForClick=function(t,e,n){var o=x.getParents(e),r=x.isTheSameNode(e,t);return _.isFirefox?r?t:null:r?M.equals(n,o)?t:null:t.contains(e)&&!x.isEditableFormElement(e)?t:e.contains(t)?e:M.getCommonElement(o,n)},e.prototype._mouseup=function(t){var n=this;return E["default"].buttonUp().then(function(){return n._getElementForEvent(t)}).then(function(o){t.element=o,n.eventState.clickElement=e._getElementForClick(n.mouseDownElement,o,n.targetElementParentNodes),w.mouseup(o,t.options)})},e.prototype._click=function(t){if(x.isOptionElement(t.element))return t.element;this.eventState.clickElement&&w.click(this.eventState.clickElement,t.options),x.isElementFocusable(t.element)||(0,m.focusByRelatedElement)(t.element);var e=x.isSelectElement(t.element),n=e&&1===P.getSelectElementSize(t.element);return n&&this.eventState.simulateDefaultBehavior!==!1&&(O.isOptionListExpanded(t.element)?O.collapseOptionList():O.expandOptionList(t.element)),t},e.prototype.run=function(t){var e=this,n=null;return this._ensureElement(t).then(function(t){var o=t.element,r=t.clientPoint,i=t.screenPoint;return n={point:r,screenPoint:i,element:o,options:S({clientX:r.x,clientY:r.y},e.modifiers)},b.all([T(e.automationSettings.mouseActionStepDelay),e._mousedown(n)])}).then(function(){return e._mouseup(n)}).then(function(){return e._click(n)})},e}(p["default"]);t["default"]=I,e.exports=t["default"]},"select-child.js":function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var s=n("../../deps/hammerhead"),l=r(s),a=n("../../deps/testcafe-core"),u=r(a),c=n("../../deps/testcafe-ui"),f=r(c),d=n("../move"),h=r(d),p=n("../../../../test-run/commands/options"),m=n("../../utils/offsets"),g=n("../../settings"),E=r(g),v=l["default"].Promise,y=l["default"].utils.browser,b=l["default"].utils.featureDetection,S=l["default"].eventSandbox.eventSimulator,_=l["default"].eventSandbox.focusBlur,A=u["default"].domUtils,w=u["default"].styleUtils,x=u["default"].delay,P=f["default"].selectElement,C=b.isTouchDevice?0:160,M=function(){function t(e,n){if(i(this,t),this.element=e,this.modifiers=n.modifiers,this.caretPos=n.caretPos,this.offsetX=n.offsetX,this.offsetY=n.offsetY,this.speed=n.speed,this.automationSettings=new E["default"](n.speed),this.parentSelect=A.getSelectParent(this.element),this.optionListExpanded=!!this.parentSelect&&P.isOptionListExpanded(this.parentSelect),this.childIndex=null,this.clickCausesChange=!1,this.parentSelect){var o=A.isOptionElement(this.element),r=this.parentSelect.selectedIndex;this.childIndex=o?A.getElementIndexInParent(this.parentSelect,this.element):A.getElementIndexInParent(this.parentSelect,this.element);var s=A.isOptionGroupElement(this.element.parentNode)?this.element.parentNode:null,l=this.element.disabled||s&&s.disabled;this.clickCausesChange=o&&!l&&this.childIndex!==r}this.eventsArgs={options:this.modifiers,element:this.element}}return t.prototype._calculateEventArguments=function(){var t=this.optionListExpanded?P.getEmulatedChildElement(this.element):this.element,e=w.getSelectElementSize(this.parentSelect)>1;return{options:this.modifiers,element:y.isIE&&e?this.parentSelect:t}},t.prototype._getMoveArguments=function(){var t=null,e=null,n=null;if(this.optionListExpanded){t=P.getEmulatedChildElement(this.element);var r=(0,m.getDefaultAutomationOffsets)(t);e=r.offsetX,n=r.offsetY}else{t=o.documentElement;var i=P.getSelectChildCenter(this.element);e=i.x,n=i.y}return{element:t,offsetX:e,offsetY:n,speed:this.speed}},t.prototype._move=function(t){var e=this,n=t.element,o=t.offsetX,r=t.offsetY,i=t.speed,s=new p.MoveOptions({offsetX:o,offsetY:r,speed:i,modifiers:this.modifiers},(!1)),l=new h["default"](n,s);return l.run().then(function(){return x(e.automationSettings.mouseActionStepDelay)})},t.prototype._mousedown=function(){var t=this;return y.isFirefox?(S.mousedown(this.eventsArgs.element,this.eventsArgs.options),this.clickCausesChange&&(this.parentSelect.selectedIndex=this.childIndex),this._focus()):y.isIE?(S.mousedown(this.eventsArgs.element,this.eventsArgs.options),this._focus()):this._focus().then(function(){return x(C)}).then(function(){S.mousedown(t.eventsArgs.element,t.eventsArgs.options),t.clickCausesChange&&(t.parentSelect.selectedIndex=t.childIndex)})},t.prototype._focus=function(){var t=this;return new v(function(e){_.focus(t.parentSelect,e,!1,!0)})},t.prototype._mouseup=function(){var t=y.isIE?this.parentSelect:this.eventsArgs.element;S.mouseup(t,this.eventsArgs.options),y.isIE&&this.clickCausesChange&&(this.parentSelect.selectedIndex=this.childIndex);var e=y.isFirefox||y.isSafari||y.isChrome&&y.version>=53,n=e||y.isIE;return e&&this.clickCausesChange&&S.input(this.parentSelect),n&&this.clickCausesChange&&S.change(this.parentSelect),v.resolve()},t.prototype._click=function(){S.click(this.eventsArgs.element,this.eventsArgs.options)},t.prototype.run=function(){var t=this;if(!this.parentSelect)return S.click(this.eventsArgs.element,this.eventsArgs.options),v.resolve();this.optionListExpanded||P.scrollOptionListByChild(this.element);var e=this._getMoveArguments();return this.eventsArgs=this._calculateEventArguments(),w.getSelectElementSize(this.parentSelect)<=1?this._move(e).then(function(){return t._click()}):this._move(e).then(function(){return t._mousedown()}).then(function(){return t._mouseup()}).then(function(){return t._click()})},t}();t["default"]=M,e.exports=t["default"]}},"dblclick.js":function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}t.__esModule=!0;var a=n("../deps/hammerhead"),u=r(a),c=n("../deps/testcafe-core"),f=r(c),d=n("../../../test-run/commands/options"),h=n("./visible-element-automation"),p=r(h),m=n("./click"),g=r(m),E=n("../settings"),v=r(E),y=u["default"].utils.featureDetection,b=u["default"].utils.browser,S=u["default"].eventSandbox.eventSimulator,_=f["default"].eventUtils,A=f["default"].delay,w=y.isTouchDevice?0:160,x=function(t){function e(n,o){i(this,e);var r=s(this,t.call(this,n,o));return r.modifiers=o.modifiers,r.caretPos=o.caretPos,r.speed=o.speed,r.automationSettings=new v["default"](r.speed),r.offsetX=o.offsetX,r.offsetY=o.offsetY,r.eventArgs=null,r.eventState={dblClickElement:null},r}return l(e,t),e.prototype._firstClick=function(t){var e=this,n=new d.ClickOptions(this.options);n.speed=1;var o=new g["default"](this.element,n);return o.on(o.TARGET_ELEMENT_FOUND_EVENT,function(t){return e.emit(e.TARGET_ELEMENT_FOUND_EVENT,t)}),o.run(t).then(function(t){return A(w).then(function(){return t})})},e.prototype._secondClick=function(t){var e=this;b.isIE&&_.bind(o,"focus",_.preventDefault,!0);var n=new d.ClickOptions({offsetX:t.screenPoint.x,offsetY:t.screenPoint.y,caretPos:this.caretPos,modifiers:this.modifiers,speed:1}),r=new g["default"](o.documentElement,n);return r.run().then(function(t){return e.eventState.dblClickElement=r.eventState.clickElement,b.isIE&&_.unbind(o,"focus",_.preventDefault,!0),t})},e.prototype._dblClick=function(t){this.eventState.dblClickElement&&S.dblclick(this.eventState.dblClickElement,t.options)},e.prototype.run=function(t){var e=this;return this._firstClick(t).then(function(t){return e._secondClick(t)}).then(function(t){return e._dblClick(t)})},e}(p["default"]);t["default"]=x,e.exports=t["default"]},drag:{"base.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}t.__esModule=!0;var l=n("../../deps/hammerhead"),a=o(l),u=n("../../deps/testcafe-core"),c=n("../../get-element"),f=n("../visible-element-automation"),d=o(f),h=n("../move"),p=o(h),m=n("../../../../test-run/commands/options"),g=n("../../cursor"),E=o(g),v=25,y=a["default"].Promise,b=a["default"].utils.extend,S=a["default"].utils.featureDetection,_=a["default"].eventSandbox.eventSimulator,A=a["default"].eventSandbox.focusBlur,w=function(t){function e(n,o){r(this,e);var s=i(this,t.call(this,n,o));return s.modifiers=o.modifiers,s.speed=o.speed,s.offsetX=o.offsetX,s.offsetY=o.offsetY,s.endPoint=null,s.downEvent=S.isTouchDevice?"touchstart":"mousedown",s.upEvent=S.isTouchDevice?"touchend":"mouseup",s.dragAndDropState=null,s}return s(e,t),e.prototype._getEndPoint=function(){throw new Error("Not implemented")},e.prototype._mousedown=function(t){var e=this;return E["default"].leftButtonDown().then(function(){return _[e.downEvent](t.element,t.options),e._focus(t)})},e.prototype._focus=function(t){var e=this;return new y(function(n){var o=u.domUtils.isContentEditableElement(e.element)?u.contentEditable.findContentEditableParent(e.element):t.element;A.focus(o,n,!1,!0)})},e.prototype._getDestination=function(){throw new Error("Not implemented")},e.prototype._drag=function(){var t=this,e=this._getDestination(),n=e.element,o=e.offsets,r=e.endPoint;this.endPoint=r;var i=new m.MoveOptions({offsetX:o.offsetX,offsetY:o.offsetY,modifiers:this.modifiers,speed:this.speed,minMovingTime:v,holdLeftButton:!0},(!1)),s=new p["default"](n,i);return s.run().then(function(e){return t.dragAndDropState=e,(0,u.delay)(t.automationSettings.mouseActionStepDelay)})},e.prototype._mouseup=function(){var t=this;return E["default"].buttonUp().then(function(){var e=u.positionUtils.offsetToClientCoords(t.endPoint),n=null,o=b({clientX:e.x,clientY:e.y},t.modifiers);return(0,c.fromPoint)(e.x,e.y).then(function(r){var i=r.element;return(n=i)?(t.dragAndDropState.enabled?(o.dataTransfer=t.dragAndDropState.dataTransfer,t.dragAndDropState.dropAllowed&&_.drop(n,o),_.dragend(t.dragAndDropState.element,o),t.dragAndDropState.dataStore.setProtectedMode()):_[t.upEvent](n,o),(0,c.fromPoint)(e.x,e.y)):n}).then(function(e){var r=e.element;n&&r===n&&!t.dragAndDropState.enabled&&_.click(n,o)})})},e.prototype.run=function(t){var e=this,n=null;return this._ensureElement(t).then(function(t){var o=t.element,r=t.clientPoint;return n={point:r,element:o,options:b({clientX:r.x,clientY:r.y},e.modifiers)},y.all([(0,u.delay)(e.automationSettings.mouseActionStepDelay),e._mousedown(n)])}).then(function(){return e._drag()}).then(function(){return e._mouseup()})},e}(d["default"]);t["default"]=w,e.exports=t["default"]},"drag-and-drop-state.js":function(t,e,n){function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=function i(){o(this,i),this.enabled=!1,this.dropAllowed=!1,this.element=null,this.dataTransfer=null,this.dataStore=null};t["default"]=r,e.exports=t["default"]},"to-element.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}t.__esModule=!0;var l=n("../../deps/testcafe-core"),a=o(l),u=n("./base"),c=o(u),f=n("../../utils/offsets"),d=a["default"].positionUtils,h=function(t){function e(n,o,s){r(this,e);var l=i(this,t.call(this,n,s));return l.destinationElement=o,l.destinationOffsetX=s.destinationOffsetX,l.destinationOffsetY=s.destinationOffsetY,l}return s(e,t),e.prototype._getDestination=function(){var t=this.destinationElement,e=d.getElementRectangle(t),n=(0,f.getOffsetOptions)(t,this.destinationOffsetX,this.destinationOffsetY),o={x:e.left+n.offsetX,y:e.top+n.offsetY};return{element:t,offsets:n,endPoint:o}},e}(c["default"]);t["default"]=h,e.exports=t["default"]},"to-offset.js":function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}t.__esModule=!0;var a=n("../../deps/testcafe-core"),u=r(a),c=n("./base"),f=r(c),d=n("../../utils/get-automation-point"),h=r(d),p=u["default"].styleUtils,m=function(t){function e(n,o,r,l){i(this,e);var a=s(this,t.call(this,n,l));return a.dragOffsetX=o,a.dragOffsetY=r,a}return l(e,t),e.prototype._getDestination=function(){var t=(0,h["default"])(this.element,this.offsetX,this.offsetY),e=p.getWidth(o),n=p.getHeight(o),r={x:t.x+this.dragOffsetX,y:t.y+this.dragOffsetY};r={x:Math.min(Math.max(0,r.x),e),y:Math.min(Math.max(0,r.y),n)};var i=o.documentElement,s={offsetX:r.x,offsetY:r.y};return{element:i,offsets:s,endPoint:r}},e}(f["default"]);t["default"]=m,e.exports=t["default"]}},"hover.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}t.__esModule=!0;var l=n("./visible-element-automation"),a=o(l),u=function(t){function e(n,o){return r(this,e),i(this,t.call(this,n,o))}return s(e,t),e.prototype.run=function(t){return this._ensureElement(t,!0)},e}(a["default"]);t["default"]=u,e.exports=t["default"]},move:{"event-sequence":{"base.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=n("../../../deps/hammerhead"),s=o(i),l=n("../../../deps/testcafe-core"),a=s["default"].utils.browser,u=function(){function t(){r(this,t),this.dragAndDropMode=!1,this.dropAllowed=!1}return t.prototype.setup=function(){this.dragAndDropMode=!1,this.dropAllowed=!1},t.prototype.leaveElement=function(){},t.prototype.move=function(){},t.prototype.enterElement=function(){},t.prototype.dragAndDrop=function(){},t.prototype.teardown=function(){},t.prototype.run=function(t,e,n,o,r,i){var s=e&&l.domUtils.isElementInDocument(e),u=e&&l.domUtils.isElementInIframe(e)&&!l.domUtils.getIframeByElement(e);s&&!u||(e=null);var c=t!==e,f=c?l.domUtils.getCommonAncestor(t,e):null;this.setup(),c&&e&&this.leaveElement(t,e,f,n),a.isIE&&this.move(t,n,o),c&&l.domUtils.isElementInDocument(t)&&this.enterElement(t,e,f,n),a.isIE||this.move(t,n,o),this.dragAndDrop(r,t,e,n,i),this.teardown(t,n,e,o);var d=this.dragAndDropMode,h=this.dropAllowed;return this.dragAndDropMode=!1,this.dropAllowed=!1,{dragAndDropMode:d,dropAllowed:h}},t}();t["default"]=u,e.exports=t["default"]},"drag-and-drop-first-move.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}t.__esModule=!0;var l=n("../../../deps/hammerhead"),a=o(l),u=n("./base"),c=o(u),f=n("./index"),d=o(f),h=n("./drag-and-drop-move"),p=o(h),m=a["default"].eventSandbox.eventSimulator,g=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return s(e,t),e.prototype.setup=function(){t.prototype.setup.call(this),this.dragAndDropMode=!0},e.prototype.leaveElement=function(){d["default"].leaveElement.apply(this,arguments)},e.prototype.move=function(){d["default"].move.apply(this,arguments)},e.prototype.enterElement=function(){d["default"].enterElement.apply(this,arguments)},e.prototype.dragAndDrop=function(t,e,n,o,r){var i=m.dragstart(t,o);return r.setReadOnlyMode(),i?void p["default"].dragAndDrop.apply(this,arguments):void(this.dragAndDropMode=!1)},e.prototype.run=function(e,n,o,r,i,s){return t.prototype.run.call(this,e,null,o,r,i,s)},e}(c["default"]);t["default"]=new g,e.exports=t["default"]},"drag-and-drop-move.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}t.__esModule=!0;var l=n("../../../deps/hammerhead"),a=o(l),u=n("../../../deps/testcafe-core"),c=n("./base"),f=o(c),d=a["default"].eventSandbox.eventSimulator,h=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return s(e,t),e.prototype.setup=function(){t.prototype.setup.call(this),this.dragAndDropMode=!0},e.prototype.dragAndDrop=function(t,e,n,o){d.drag(t,o);var r=e!==n;r&&(u.domUtils.isElementInDocument(e)&&d.dragenter(e,o),n&&d.dragleave(n,o)),this.dropAllowed=!d.dragover(e,o)},e}(f["default"]);t["default"]=new h,e.exports=t["default"]},"index.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}t.__esModule=!0;var l=n("../../../deps/hammerhead"),a=o(l),u=n("../../../deps/testcafe-core"),c=n("./base"),f=o(c),d=a["default"].eventSandbox.eventSimulator,h=a["default"].utils.extend,p=function(t){function e(){return r(this,e),i(this,t.apply(this,arguments))}return s(e,t),e.prototype.leaveElement=function(t,e,n,o){d.mouseout(e,h({relatedTarget:t},o));for(var r=e;r&&r!==n;)d.mouseleave(r,h({relatedTarget:t},o)),r=r.parentNode},e.prototype.move=function(t,e,n){d[n](t,e)},e.prototype.enterElement=function(t,e,n,o){d.mouseover(t,h({relatedTarget:e},o));for(var r=t,i=[];r&&r!==n;)i.push(r),r=r.parentNode;i.reverse();for(var s=0;s<i.length;s++)d.mouseenter(i[s],h({relatedTarget:e},o))},e.prototype.teardown=function(t,e,n,o){u.domUtils.isElementInDocument(t)&&t!==n&&d[o](t,e)},e}(f["default"]);t["default"]=new p,e.exports=t["default"]}},"index.js":function(t,n,r){function i(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t){for(var e=t;e;){if(e.draggable)return e;e=e.parentNode}return null}t.__esModule=!0;var a=r("../../deps/hammerhead"),u=i(a),c=r("../../deps/testcafe-core"),f=i(c),d=r("../../../../test-run/commands/options"),h=r("../scroll"),p=i(h),m=r("../../cursor"),g=i(m),E=r("../../get-element"),v=r("../../utils/get-automation-point"),y=i(v),b=r("../../utils/get-line-rect-intersection"),S=i(b),_=r("../../utils/promise-whilst"),A=i(_),w=r("../../utils/next-tick"),x=i(w),P=r("../../settings"),C=i(P),M=r("../drag/drag-and-drop-state"),T=i(M),O=r("./event-sequence"),I=i(O),D=r("./event-sequence/drag-and-drop-move"),N=i(D),U=r("./event-sequence/drag-and-drop-first-move"),k=i(U),j=u["default"].Promise,B=u["default"].nativeMethods,F=u["default"].utils.browser,R=u["default"].utils.featureDetection,Y=u["default"].utils.html,K=u["default"].utils.url,L=u["default"].eventSandbox.eventSimulator,X=u["default"].eventSandbox.message,W=u["default"].eventSandbox.DataTransfer,V=u["default"].eventSandbox.DragDataStore,H=f["default"].positionUtils,z=f["default"].domUtils,q=f["default"].styleUtils,G=f["default"].eventUtils,$=f["default"].sendRequestToFrame,Z="automation|move|request",J="automation|move|response";X.on(X.SERVICE_MSG_RECEIVED_EVENT,function(t){t.message.cmd===Z&&(t.source.parent===e?tt.onMoveToIframeRequest(t):(u["default"].on(u["default"].EVENTS.beforeUnload,function(){return X.sendServiceMsg({cmd:J},t.source)}),tt.onMoveOutRequest(t)))});var Q=null,tt=function(){function t(e,n){s(this,t),this.touchMode=R.isTouchDevice,this.moveEvent=this.touchMode?"touchmove":"mousemove",this.holdLeftButton=n.holdLeftButton,
this.dragElement=null,this.dragAndDropState=new T["default"],this.automationSettings=new C["default"](n.speed);var o=t.getTarget(e,n.offsetX,n.offsetY);this.element=o.element,this.offsetX=o.offsetX,this.offsetY=o.offsetY,this.speed=n.speed,this.cursorSpeed=this.holdLeftButton?this.automationSettings.draggingSpeed:this.automationSettings.cursorSpeed,this.minMovingTime=n.minMovingTime||null,this.modifiers=n.modifiers||{},this.skipScrolling=n.skipScrolling,this.endPoint=null,this.movingTime=null,this.x=null,this.y=null,this.startTime=null,this.endTime=null,this.distanceX=null,this.distanceY=null,this.firstMovingStepOccured=!1}return t.getTarget=function(t,e,n){var r=!H.containsOffset(t,e,n),i=r?(0,y["default"])(t,e,n):{x:e,y:n};return{element:r?o.documentElement:t,offsetX:i.x,offsetY:i.y}},t.onMoveToIframeRequest=function(e){var n={x:e.message.endX,y:e.message.endY},o=e.source,r=z.findIframeByWindow(o),i=q.getBordersWidth(r),s=q.getElementPadding(r),l=H.getIframeClientCoordinates(r),a=H.getIframePointRelativeToParentFrame(n,o),u=g["default"].position,c=H.isInRectangle(u,l)?u:(0,S["default"])(u,a,l),f={x:c.x-l.left,y:c.y-l.top},h=new d.MoveOptions({modifiers:e.message.modifiers,offsetX:f.x+i.left+s.left,offsetY:f.y+i.top+s.top,speed:e.message.speed,skipScrolling:!0},(!1)),p=new t(r,h),m={cmd:J,x:f.x,y:f.y};g["default"].activeWindow!==o?p.run().then(function(){g["default"].activeWindow=o,X.sendServiceMsg(m,o)}):X.sendServiceMsg(m,o)},t.onMoveOutRequest=function(e){var n=e.source,r={left:e.message.left,right:e.message.right,top:e.message.top,bottom:e.message.bottom};if(!e.message.iframeUnderCursor){var i=e.message,s=i.startX,l=i.startY,a=s-r.left,u=l-r.top;return Q&&(L.mouseout(Q,{clientX:a,clientY:u,relatedTarget:null}),L.mouseleave(Q,{clientX:a,clientY:u,relatedTarget:null})),void X.sendServiceMsg({cmd:J},n)}var c=g["default"].position,f={x:r.left+c.x,y:r.top+c.y},h={x:e.message.endX,y:e.message.endY},p=(0,S["default"])(f,h,r);if(!p)return void X.sendServiceMsg({cmd:J,x:r.left,y:r.top},n);var m=new d.MoveOptions({modifiers:e.message.modifiers,offsetX:p.x-r.left,offsetY:p.y-r.top,speed:e.message.speed,skipScrolling:!0},(!1)),E=new t(o.documentElement,m);E.run().then(function(){var t={cmd:J,x:p.x,y:p.y};g["default"].activeWindow=n,X.sendServiceMsg(t,n)})},t.prototype._getTargetClientPoint=function(){var t=q.getElementScroll(this.element);if(z.isHtmlElement(this.element))return{x:Math.floor(this.offsetX-t.left),y:Math.floor(this.offsetY-t.top)};var e=H.getClientPosition(this.element),n=this.element.tagName&&z.isBodyElement(this.element);return{x:Math.floor(n?e.x+this.offsetX:e.x+this.offsetX-t.left),y:Math.floor(n?e.y+this.offsetY:e.y+this.offsetY-t.top)}},t.prototype._emulateEvents=function(t){var e=this.holdLeftButton?G.WHICH_PARAMETER.leftButton:G.WHICH_PARAMETER.noButton,n=this.holdLeftButton?G.BUTTONS_PARAMETER.leftButton:G.BUTTONS_PARAMETER.noButton,o={clientX:this.x,clientY:this.y,button:0,which:F.isWebKit?e:1,buttons:n,ctrl:this.modifiers.ctrl,alt:this.modifiers.alt,shift:this.modifiers.shift,meta:this.modifiers.meta,dataTransfer:this.dragAndDropState.dataTransfer},r=null;r=this.dragAndDropState.enabled?this.firstMovingStepOccured?N["default"]:k["default"]:I["default"];var i=r.run(t,Q,o,this.moveEvent,this.dragElement,this.dragAndDropState.dataStore),s=i.dragAndDropMode,l=i.dropAllowed;this.firstMovingStepOccured=!0,this.dragAndDropState.enabled=s,this.dragAndDropState.dropAllowed=l,Q=t},t.prototype._movingStep=function(){var t=this;if(this.touchMode&&!this.holdLeftButton)this.x=this.endPoint.x,this.y=this.endPoint.y;else if(this.startTime){var e=Math.min(B.dateNow(),this.endTime),n=(e-this.startTime)/(this.endTime-this.startTime);this.x=Math.floor(this.startPoint.x+this.distanceX*n),this.y=Math.floor(this.startPoint.y+this.distanceY*n)}else this.startTime=B.dateNow(),this.endTime=this.startTime+this.movingTime,this.x+=this.distanceX>0?1:-1,this.y+=this.distanceY>0?1:-1;return g["default"].move(this.x,this.y).then(E.underCursor).then(function(e){var n=t.holdLeftButton&&t.touchMode?t.dragElement:e;return n?t._emulateEvents(n):null}).then(x["default"])},t.prototype._isMovingFinished=function(){return this.x===this.endPoint.x&&this.y===this.endPoint.y},t.prototype._move=function(){var t=this;return this.startPoint=g["default"].position,this.x=this.startPoint.x,this.y=this.startPoint.y,this.distanceX=this.endPoint.x-this.startPoint.x,this.distanceY=this.endPoint.y-this.startPoint.y,this.movingTime=Math.max(Math.abs(this.distanceX),Math.abs(this.distanceY))/this.cursorSpeed,this.minMovingTime&&(this.movingTime=Math.max(this.movingTime,this.minMovingTime)),(0,A["default"])(function(){return!t._isMovingFinished()},function(){return t._movingStep()})},t.prototype._scroll=function(){if(this.skipScrolling)return j.resolve();var t=new d.OffsetOptions({offsetX:this.offsetX,offsetY:this.offsetY},(!1)),e=new p["default"](this.element,t);return e.run()},t.prototype._moveToCurrentFrame=function(){if(g["default"].active)return j.resolve();var t=g["default"].position,n=t.x,o=t.y,r=g["default"].activeWindow,i=null,s=null,l=null,a={cmd:Z,startX:n,startY:o,endX:this.endPoint.x,endY:this.endPoint.y,modifiers:this.modifiers,speed:this.speed};return r.parent===e&&(i=z.findIframeByWindow(r),l=H.getIframeClientCoordinates(i),a.left=l.left,a.top=l.top,a.right=l.right,a.bottom=l.bottom),(0,E.underCursor)().then(function(t){return s=t===i,r.parent===e&&(a.iframeUnderCursor=s),$(a,J,r)}).then(function(t){return g["default"].activeWindow=e,s||e.top!==e?g["default"].move(t.x,t.y):null})},t.prototype.run=function(){var t=this;return(0,E.underCursor)().then(function(e){t.dragElement=t.holdLeftButton?e:null;var n=l(t.dragElement);if(n&&R.hasDataTransfer){t.dragAndDropState.enabled=!0,t.dragElement=n,t.dragAndDropState.element=t.dragElement,t.dragAndDropState.dataStore=new V,t.dragAndDropState.dataTransfer=new W(t.dragAndDropState.dataStore);var o=z.isAnchorElement(t.dragElement);if(o||z.isImgElement(t.dragElement)){var r=o?"href":"src",i=K.parseProxyUrl(t.dragElement[r]),s=i?i.destUrl:t.dragElement[r];t.dragAndDropState.dataTransfer.setData("text/plain",s),t.dragAndDropState.dataTransfer.setData("text/uri-list",s),t.dragAndDropState.dataTransfer.setData("text/html",Y.cleanUpHtml(t.dragElement.outerHTML))}}return t._scroll()}).then(function(){var n=t._getTargetClientPoint(),o=n.x,r=n.y,i=q.getWidth(e),s=q.getHeight(e);return o>=0&&o<=i&&r>=0&&r<=s?(t.endPoint={x:o,y:r},t._moveToCurrentFrame().then(function(){return t._move()})):null}).then(function(){return t.dragAndDropState})},t}();t["default"]=tt,n.exports=t["default"]}},press:{"index.js":function(t,n,o){function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var s=o("../../deps/hammerhead"),l=r(s),a=o("../../deps/testcafe-core"),u=o("./key-press-simulator"),c=r(u),f=o("./shortcuts"),d=r(f),h=o("../../utils/promise-each"),p=r(h),m=o("./utils"),g=o("../../settings"),E=r(g),v=l["default"].Promise,y=l["default"].utils.browser,b=l["default"].eventSandbox.message,S="automation|press|request",_="automation|press|response";b.on(b.SERVICE_MSG_RECEIVED_EVENT,function(t){if(t.message.cmd===S){l["default"].on(l["default"].EVENTS.beforeUnload,function(){return b.sendServiceMsg({cmd:_},t.source)});var e=new A(t.message.keyCombinations,t.message.options);e.run().then(function(){return b.sendServiceMsg({cmd:_},t.source)})}});var A=function(){function t(n,o){i(this,t),this.keyCombinations=n,this.isSelectElement=!1,this.pressedKeyString="",this.modifiersState=null,this.shortcutHandlers=null,this.topSameDomainDocument=a.domUtils.getTopSameDomainWindow(e).document,this.automationSettings=new E["default"](o.speed),this.options=o}return t._getKeyPressSimulators=function(t){var e=(0,a.getKeyArray)(t),n=(0,m.getActualKeysAndEventKeyProperties)(e),o=n.actualKeys,r=n.eventKeyProperties;return a.arrayUtils.map(o,function(t,e){return new c["default"](t,r[e])})},t._getShortcuts=function(t){for(var e=(0,a.getKeyArray)(t.toLowerCase()),n=[],o=[],r=[],i=0;i<e.length;i++)for(o.push(e[i]),r=o.slice();r.length;){var s=r.join("+");d["default"][s]?(n.push(s),o=r=[]):r.shift()}return n},t._getShortcutHandlers=function(e){for(var n=t._getShortcuts(e.toLowerCase()),o={},r="",i=null,s=null,l=null,a=0;a<n.length;a++)i=n[a],s=e.indexOf(i),l=i.length,r+=e.substring(0,s+l),o[r]=d["default"][i],e=e.substring(s+l);return o},t.prototype._down=function(t){this.pressedKeyString+=(this.pressedKeyString?"+":"")+t.key;var e=!t.down(this.modifiersState);return v.resolve(e)},t.prototype._press=function(t,e){var n=this;if(e&&!this.isSelectElement)return(0,a.delay)(this.automationSettings.keyActionStepDelay);var o=this.shortcutHandlers[this.pressedKeyString],r=!1;return o&&!y.isFirefox&&"enter"!==t.key||(r=!t.press(this.modifiersState)),r&&!this.isSelectElement||!o?(0,a.delay)(this.automationSettings.keyActionStepDelay):o((0,m.getDeepActiveElement)(this.topSameDomainDocument)).then(function(){return(0,a.delay)(n.automationSettings.keyActionStepDelay)})},t.prototype._up=function(t){return t.up(this.modifiersState),(0,a.delay)(this.automationSettings.keyActionStepDelay)},t.prototype._runCombination=function(e){var n=this;this.modifiersState={ctrl:!1,alt:!1,shift:!1,meta:!1},this.isSelectElement=a.domUtils.isSelectElement((0,m.getDeepActiveElement)(this.topSameDomainDocument)),this.pressedKeyString="",this.shortcutHandlers=t._getShortcutHandlers(e);var o=t._getKeyPressSimulators(e);return(0,p["default"])(o,function(t){return n._down(t).then(function(e){return n._press(t,e)})}).then(function(){return a.arrayUtils.reverse(o),(0,p["default"])(o,function(t){return n._up(t)})})},t.prototype.run=function(){var t=this,n=a.domUtils.getActiveElement(),o=a.domUtils.isIframeElement(n);if(e.top===e&&o&&n.contentWindow){var r={cmd:S,keyCombinations:this.keyCombinations,options:this.options};return(0,a.sendRequestToFrame)(r,_,n.contentWindow)}return(0,p["default"])(this.keyCombinations,function(e){return t._runCombination(e).then(function(){return(0,a.delay)(t.automationSettings.keyActionStepDelay)})})},t}();t["default"]=A,n.exports=t["default"]},"key-press-simulator.js":function(t,n,o){function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=o("../../deps/hammerhead"),a=r(l),u=o("../../deps/testcafe-core"),c=o("../type/type-text"),f=r(c),d=o("./utils"),h=o("../../utils/get-key-code"),p=r(h),m=o("../../utils/get-key-identifier"),g=r(m),E=o("../../utils/is-letter"),v=r(E),y=o("../../utils/key-identifier-required-for-event"),b=r(y),S=a["default"].utils.browser,_=a["default"].utils.extend,A=a["default"].eventSandbox.eventSimulator,w=function(){function t(n,o){i(this,t),this.isLetter=(0,v["default"])(n),this.isChar=1===n.length||"space"===n,this.sanitizedKey=(0,u.getSanitizedKey)(n),this.modifierKeyCode=u.KEY_MAPS.modifiers[this.sanitizedKey],this.specialKeyCode=u.KEY_MAPS.specialKeys[this.sanitizedKey],this.keyCode=null,this.keyIdentifierProperty=(0,g["default"])(o),this.topSameDomainDocument=u.domUtils.getTopSameDomainWindow(e).document,this.keyProperty=u.KEY_MAPS.keyProperty[o]||o,this.isChar&&"space"!==n?this.keyCode=(0,p["default"])(this.sanitizedKey):this.modifierKeyCode?this.keyCode=this.modifierKeyCode:this.specialKeyCode&&(this.keyCode=this.specialKeyCode),this.storedActiveElement=null}return t._isKeyActivatedInputElement=function(t){return u.domUtils.isInputElement(t)&&/button|submit|reset|radio|checkbox/.test(t.type)},t.prototype._type=function(t,e){var n=t!==this.storedActiveElement,o=!n,r=t,i=u.domUtils.isEditableElement(t),s=u.domUtils.isEditableElement(this.storedActiveElement);try{if(n){var l=u.domUtils.isElementInIframe(t),a=u.domUtils.isElementInIframe(this.storedActiveElement),c=l===a||s;o=(!S.isFirefox||s)&&(!S.isWebKit||c)}}catch(d){}o&&(!S.isIE&&n&&s&&i&&(r=this.storedActiveElement),(0,f["default"])(r,e))},t.prototype._addKeyPropertyToEventOptions=function(t){return(0,b["default"])()?t.keyIdentifier="keypress"===t.type?"":this.keyIdentifierProperty:t.key=this.keyProperty,t},t.prototype.down=function(t){this.storedActiveElement=(0,d.getDeepActiveElement)(this.topSameDomainDocument),this.modifierKeyCode&&(t[this.sanitizedKey]=!0),t.shift&&this.isLetter&&(this.keyProperty=(0,d.changeLetterCase)(this.keyProperty));var e={keyCode:this.keyCode,type:"keydown"};return this._addKeyPropertyToEventOptions(e),A.keydown(this.storedActiveElement,_(e,t))},t.prototype.press=function(e){if(!this.isChar&&!this.specialKeyCode)return!0;var n=(0,d.getDeepActiveElement)(this.topSameDomainDocument),o=this.isChar?(0,d.getChar)(this.sanitizedKey,e.shift):null,r=this.specialKeyCode||o.charCodeAt(0),i=n!==this.storedActiveElement;if(S.isWebKit&&i){var s=u.domUtils.isElementInIframe(n),l=u.domUtils.isElementInIframe(this.storedActiveElement);if(s!==l)return!0}this.storedActiveElement=n;var a={keyCode:r,charCode:r,type:"keypress"};this._addKeyPropertyToEventOptions(a,!0);var c=A.keypress(n,_(a,e));if(!c)return c;n=(0,d.getDeepActiveElement)(this.topSameDomainDocument),!o||e.ctrl||e.alt||this._type(n,o);var f=t._isKeyActivatedInputElement(n),h=u.domUtils.isButtonElement(n),p=S.isSafari&&S.compareVersions([S.webkitVersion,"603.1.30"])>=0,m=!S.isFirefox&&!p&&(f||h);return m&&"enter"===this.sanitizedKey&&n.click(),c},t.prototype.up=function(e){this.modifierKeyCode&&(e[this.sanitizedKey]=!1);var n={keyCode:this.keyCode,type:"keyup"};this._addKeyPropertyToEventOptions(n);var o=A.keyup((0,d.getDeepActiveElement)(this.topSameDomainDocument),_(n,e)),r=(0,d.getDeepActiveElement)(this.topSameDomainDocument),i=!S.isFirefox&&!S.isSafari&&(!S.isChrome||S.version>=53);return i&&o&&"space"===this.sanitizedKey&&t._isKeyActivatedInputElement(r)&&r.click(),o},s(t,[{key:"key",get:function(){return this.sanitizedKey}}]),t}();t["default"]=w,n.exports=t["default"]},"shortcuts.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(){z=null,q=null,W.unbind(this,"blur",r,!0)}function i(t){V.isTextAreaElement(t)&&(z!==t&&(W.bind(t,"blur",r,!0),z=t),q=s(t))}function s(t){var e=X.hasInverseSelection(t),n=e?X.getSelectionStart(t):X.getSelectionEnd(t);return t.value&&n?V.getTextareaIndentInLine(t,n):0}function l(t,e){var n=t.value;if(n){var o=X.getSelectionStart(t),r=X.getSelectionEnd(t),s=X.hasInverseSelection(t),l=n.substring(0,s?o:r),a=l.lastIndexOf("\n"),c=l.substring(0,a);null!==q&&z===t||i(t),a=c.lastIndexOf("\n");var f=Math.min(a+1+q,c.length);u(t,o,r,s,f,e)}}function a(t,e){var n=t.value;if(n){var o=X.getSelectionStart(t),r=X.getSelectionEnd(t),s=X.hasInverseSelection(t),l=s?o:r,a=n.substring(l),c=a.indexOf("\n"),f=c===-1?a.length:c+1,d=a.substring(f),h=l+f;c=d.indexOf("\n");var p=c===-1?d.length:c;null!==q&&z===t||i(t),h=Math.min(h+q,h+p),u(t,o,r,s,h,e)}}function u(t,e,n,o,r,i){var s=null,l=null;i?e===n?(s=e,l=r):o?(s=n,l=r):(s=e,l=r):l=s=r,X.select(t,s,l)}function c(t,e,n){V.isInputElement(t)&&"number"===t.type&&("-"===e.charAt(0)&&"."===e.charAt(1)&&(e=e.substring(1)),"."===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1))),(0,B.setValue)(t,e),X.select(t,n,n),Y.input(t)}function f(t,e){var n=t.querySelectorAll("input, button"),o=null,r=null;for(r=0;r<n.length;r++)if(!o&&"submit"===n[r].type&&!n[r].disabled){o=n[r];break}if(o)Y.click(o);else if(V.blocksImplicitSubmission(e)){var i=t.getElementsByTagName("input"),s=[];for(r=0;r<i.length;r++)V.blocksImplicitSubmission(i[r])&&s.push(i[r]);if(1===s.length&&s[0]===e){var l=e.validity.valid;l&&Y.submit(t)&&t.submit()}}}function d(t){return V.isEditableElement(t)&&X.select(t),F.resolve()}function h(t){if(V.isTextEditableElementAndEditingAllowed(t)){var e=X.getSelectionStart(t),n=X.getSelectionEnd(t),o=t.value.replace(/\r\n/g,"\n");n===e?e>0&&c(t,o.substring(0,e-1)+o.substring(n,o.length),e-1):c(t,o.substring(0,e)+o.substring(n,o.length),e)}return V.isContentEditableElement(t)&&X.deleteSelectionContents(t),F.resolve()}function p(t){if(V.isTextEditableElementAndEditingAllowed(t)){var e=X.getSelectionStart(t),n=X.getSelectionEnd(t),o=t.value.replace(/\r\n/g,"\n");n===e?e<o.length&&c(t,o.substring(0,e)+o.substring(n+1,o.length),e):c(t,o.substring(0,e)+o.substring(n,o.length),e)}return V.isContentEditableElement(t)&&X.deleteSelectionContents(t),F.resolve()}function m(t){var e=null,n=null;if(V.isSelectElement(t)&&H.switchOptionsByKeys(t,"left"),V.isTextEditableElement(t)){e=X.getSelectionStart(t)||0,n=X.getSelectionEnd(t);var o=e===n?e-1:e;X.select(t,o,o),i(t)}if(V.isContentEditableElement(t)&&(e=X.getSelectionStart(t),n=X.getSelectionEnd(t),e!==n)){var r=X.getSelectionByElement(t),s=X.hasInverseSelectionContentEditable(t),l=s?r.focusNode:r.anchorNode,a=s?r.focusOffset:r.anchorOffset,u={node:l,offset:a};X.selectByNodesAndOffsets(u,u,!0)}return F.resolve()}function g(t){var e=null,n=null;if(V.isSelectElement(t)&&H.switchOptionsByKeys(t,"right"),V.isTextEditableElement(t)){e=X.getSelectionStart(t),n=X.getSelectionEnd(t);var o=e===n?n+1:n;e===t.value.length&&(o=e),X.select(t,o,o),i(t)}if(V.isContentEditableElement(t)&&(e=X.getSelectionStart(t),n=X.getSelectionEnd(t),e!==n)){var r=X.getSelectionByElement(t),s=X.hasInverseSelectionContentEditable(t),l=s?r.anchorNode:r.focusNode,a=s?r.anchorOffset:r.focusOffset,u={node:l,offset:a};X.selectByNodesAndOffsets(u,u,!0)}return F.resolve()}function E(t){return V.isSelectElement(t)&&H.switchOptionsByKeys(t,"up"),R.isWebKit&&V.isInputElement(t)?y(t):(V.isTextAreaElement(t)&&l(t,!1),F.resolve())}function v(t){return V.isSelectElement(t)&&H.switchOptionsByKeys(t,"down"),R.isWebKit&&V.isInputElement(t)?b(t):(V.isTextAreaElement(t)&&a(t,!1),F.resolve())}function y(t,e){if(V.isTextEditableElement(t)){var n=X.getSelectionStart(t),o=X.getSelectionEnd(t),r=X.hasInverseSelection(t),i=null,s=!V.isTextAreaElement(t)||V.getTextareaLineNumberByPosition(t,n)===V.getTextareaLineNumberByPosition(t,o);i=s?r?o:n:r?n:o;var l=t.value.substring(0,i),a=l.lastIndexOf("\n"),u=a===-1?0:a+1,c=null,f=null;s?(c=u,f=e?i:u,X.select(t,f,c)):r?X.select(t,o,u):X.select(t,n,u)}return F.resolve()}function b(t,e){if(V.isTextEditableElement(t)){var n=X.getSelectionStart(t),o=X.getSelectionEnd(t),r=X.hasInverseSelection(t),i=null,s=!V.isTextAreaElement(t)||V.getTextareaLineNumberByPosition(t,n)===V.getTextareaLineNumberByPosition(t,o);i=s?r?o:n:r?n:o;var l=t.value.substring(i),a=l.indexOf("\n"),u=i,c=null,f=null;u+=a===-1?l.length:a,s?(c=e?i:u,f=u,X.select(t,c,f)):r?X.select(t,o,u):X.select(t,n,u)}return F.resolve()}function S(t){return V.isSelectElement(t)&&H.collapseOptionList(),F.resolve()}function _(t){return R.isWebKit&&V.isInputElement(t)?P(t):(V.isTextAreaElement(t)&&l(t,!0),F.resolve())}function A(t){return R.isWebKit&&V.isInputElement(t)?C(t):(V.isTextAreaElement(t)&&a(t,!0),F.resolve())}function w(t){if(V.isTextEditableElement(t)){var e=X.getSelectionStart(t),n=X.getSelectionEnd(t);e===n||X.hasInverseSelection(t)?X.select(t,n,Math.max(e-1,0)):X.select(t,e,Math.max(n-1,0)),i(t)}return F.resolve()}function x(t){if(V.isTextEditableElement(t)){var e=X.getSelectionStart(t),n=X.getSelectionEnd(t);e!==n&&X.hasInverseSelection(t)?X.select(t,n,Math.min(e+1,t.value.length)):X.select(t,e,Math.min(n+1,t.value.length)),i(t)}return F.resolve()}function P(t){return y(t,!0)}function C(t){return b(t,!0)}function M(t){if(V.isSelectElement(t)&&H.collapseOptionList(),V.isInputElement(t)){R.isIE||L.processElementChanging(t);var e=V.getParents(t,"form")[0];e&&f(e,t)}else if(V.isTextAreaElement(t)){var n=X.getSelectionStart(t),o=t.value.substring(0,n),r=t.value.substring(n),i=n+1;c(t,o+String.fromCharCode(10)+r,i)}else t.tagName&&V.isAnchorElement(t)&&Y.click(t);return F.resolve()}function T(t){return new F(function(e){V.isSelectElement(t)&&(H.collapseOptionList(),e());var n=V.getNextFocusableElement(t);n||e(),K.focus(n,function(){V.isTextEditableInput(n)&&X.select(n),e()})})}function O(t){return new F(function(e){V.isSelectElement(t)&&(H.collapseOptionList(),e());var n=V.getNextFocusableElement(t,!0);n||e(),K.focus(n,function(){V.isTextEditableInput(n)&&X.select(n),e()})})}t.__esModule=!0;var I=n("../../deps/hammerhead"),D=o(I),N=n("../../deps/testcafe-core"),U=o(N),k=n("../../deps/testcafe-ui"),j=o(k),B=n("../../utils/utils"),F=D["default"].Promise,R=D["default"].utils.browser,Y=D["default"].eventSandbox.eventSimulator,K=D["default"].eventSandbox.focusBlur,L=D["default"].eventSandbox.elementEditingWatcher,X=U["default"].textSelection,W=U["default"].eventUtils,V=U["default"].domUtils,H=j["default"].selectElement,z=null,q=null;t["default"]={"ctrl+a":d,backspace:h,"delete":p,left:m,right:g,up:E,down:v,"shift+left":w,"shift+right":x,"shift+up":_,"shift+down":A,"shift+home":P,"shift+end":C,home:y,end:b,enter:M,tab:T,"shift+tab":O,esc:S},e.exports=t["default"]},"utils.js":function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=t===t.toLowerCase();return e?t.toUpperCase():t.toLowerCase()}function s(t){for(var e=t.slice(),n=0;n<t.length;n++){var o=t[n];if("shift"===o.toLowerCase()){var r=t[n+1];if(!r)continue;u.KEY_MAPS.shiftMap[r]?t[n+1]=u.KEY_MAPS.shiftMap[r]:u.KEY_MAPS.reversedShiftMap[r]&&(e[n+1]=u.KEY_MAPS.reversedShiftMap[r])}!u.KEY_MAPS.shiftMap[o]||t[n-1]&&"shift"===t[n-1].toLowerCase()||(t[n]=u.KEY_MAPS.shiftMap[o],t.splice(n,0,"shift"),e.splice(n,0,"shift"),n++)}return{actualKeys:t,eventKeyProperties:e}}function l(t,e){if("space"===t)return" ";if(e){if((0,f["default"])(t))return i(t);if(u.KEY_MAPS.reversedShiftMap[t])return u.KEY_MAPS.reversedShiftMap[t]}return t}function a(t){var e=t||o,n=null,r=e.activeElement&&u.domUtils.isDomElement(e.activeElement)?e.activeElement:e.body;if(r&&u.domUtils.isIframeElement(r)&&r.contentDocument)try{n=a(r.contentDocument)}catch(i){}return n||r}t.__esModule=!0,t.changeLetterCase=i,t.getActualKeysAndEventKeyProperties=s,t.getChar=l,t.getDeepActiveElement=a;var u=n("../../deps/testcafe-core"),c=n("../../utils/is-letter"),f=r(c)}},"rclick.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}t.__esModule=!0;var l=n("../deps/hammerhead"),a=o(l),u=n("../deps/testcafe-core"),c=o(u),f=n("./visible-element-automation"),d=o(f),h=n("../utils/utils"),p=n("../cursor"),m=o(p),g=n("../utils/next-tick"),E=o(g),v=a["default"].Promise,y=a["default"].utils.extend,b=a["default"].utils.browser,S=a["default"].eventSandbox.eventSimulator,_=c["default"].domUtils,A=c["default"].eventUtils,w=c["default"].delay,x=function(t){function e(n,o){r(this,e);var s=i(this,t.call(this,n,o));return s.modifiers=o.modifiers,s.caretPos=o.caretPos,s.eventState={simulateDefaultBehavior:!0,activeElementBeforeMouseDown:null},s}return s(e,t),e.prototype._mousedown=function(t){var e=this;return m["default"].rightButtonDown().then(function(){e.eventState.activeElementBeforeMouseDown=_.getActiveElement(),e.eventState.simulateDefaultBehavior=S.mousedown(t.element,t.options)}).then(function(){return e._focus(t)})},e.prototype._focus=function(t){if(this.simulateDefaultBehavior===!1)return(0,E["default"])();var e=_.isContentEditableElement(this.element)?this.element:t.element,n=!b.isIE||this.eventState.activeElementBeforeMouseDown===_.getActiveElement();return(0,h.focusAndSetSelection)(e,n,this.caretPos).then(function(){return(0,E["default"])()})},e.prototype._mouseup=function(t){var e=this;return m["default"].buttonUp().then(function(){return e._getElementForEvent(t)}).then(function(e){return S.mouseup(e,t.options)})},e.prototype._contextmenu=function(t){return this._getElementForEvent(t).then(function(e){S.contextmenu(e,t.options),_.isElementFocusable(e)||(0,h.focusByRelatedElement)(e)})},e.prototype.run=function(t){var e=this,n=null;return this._ensureElement(t).then(function(t){var o=t.element,r=t.clientPoint;return n={point:r,element:o,options:y({clientX:r.x,clientY:r.y,button:A.BUTTON.right,which:A.WHICH_PARAMETER.rightButton,buttons:A.BUTTONS_PARAMETER.rightButton},e.modifiers)},v.all([w(e.automationSettings.mouseActionStepDelay),e._mousedown(n)])}).then(function(){return e._mouseup(n)}).then(function(){return e._contextmenu(n)})},e}(d["default"]);t["default"]=x,e.exports=t["default"]},"scroll.js":function(t,n,o){function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var s=o("../deps/hammerhead"),l=r(s),a=o("../deps/testcafe-core"),u=r(a),c=o("../utils/promise-whilst"),f=r(c),d=l["default"].Promise,h=l["default"].eventSandbox.message,p=u["default"].domUtils,m=u["default"].styleUtils,g=u["default"].positionUtils,E=u["default"].sendRequestToFrame,v=50,y=20,b="automation|scroll|request",S="automation|scroll|response";h.on(h.SERVICE_MSG_RECEIVED_EVENT,function(t){if(t.message.cmd===b){var e=p.findIframeByWindow(t.source),n=t.message.offsetX,o=t.message.offsetY,r=t.message.maxScrollMargin,i=new _(e,{offsetX:n,offsetY:o});i.maxScrollMargin=r,i.run().then(function(){return h.sendServiceMsg({cmd:S},t.source)})}});var _=function(){function t(e,n){i(this,t),this.element=e,this.offsetX=n.offsetX,this.offsetY=n.offsetY,this.maxScrollMargin=v}return t._setScroll=function(t,e){var n=e.left,o=e.top;if(n=Math.max(n,0),o=Math.max(o,0),p.isHtmlElement(t)){var r=p.findDocument(t);m.setScrollLeft(r,n),m.setScrollTop(r,o)}else m.setScrollLeft(t,n),m.setScrollTop(t,o)},t.prototype._getScrollToPoint=function(t,e){var n=e.x,o=e.y,r=Math.min(this.maxScrollMargin,Math.floor(t.width/2)),i=Math.min(this.maxScrollMargin,Math.floor(t.height/2)),s=n>=t.scroll.left+t.width-r,l=n<=t.scroll.left+r,a=o>=t.scroll.top+t.height-i,u=o<=t.scroll.top+i,c=t.scroll.left,f=t.scroll.top;return s?c=n-t.width+r:l&&(c=n-r),a?f=o-t.height+i:u&&(f=o-i),{left:c,top:f}},t.prototype._getScrollToFullChildView=function(t,e){var n=null,o=null,r=t.width>=e.width,i=t.height>=e.height,s=g.calcRelativePosition(e,t);if(r){var l=Math.floor((t.width-e.width)/2),a=Math.min(this.maxScrollMargin,l);s.left<a?n=Math.round(t.scroll.left+s.left-a):s.right<a&&(n=Math.round(t.scroll.left+Math.min(s.left,-s.right)+a))}if(i){var u=Math.floor((t.height-e.height)/2),c=Math.min(this.maxScrollMargin,u);s.top<c?o=Math.round(t.scroll.top+s.top-c):s.bottom<c&&(o=Math.round(t.scroll.top+Math.min(s.top,-s.bottom)+c))}return{left:n,top:o}},t.prototype._scrollToChild=function(e,n,o){var r=o.offsetX,i=o.offsetY,s=g.getClientDimensions(e),l=g.getClientDimensions(n),a={x:l.left-s.left+s.scroll.left+l.border.left+r,y:l.top-s.top+s.scroll.top+l.border.top+i},u=this._getScrollToFullChildView(s,l),c=this._getScrollToPoint(s,a),f=null===u.left?c.left:u.left,d=null===u.top?c.top:u.top;t._setScroll(e,{left:f,top:d})},t.prototype._scrollElement=function(){if(m.hasScroll(this.element)){var e=g.getClientDimensions(this.element),n=this._getScrollToPoint(e,{x:this.offsetX,y:this.offsetY});t._setScroll(this.element,n)}},t.prototype._scrollParents=function(){for(var t=m.getScrollableParents(this.element),n=this.element,o=this.offsetX-Math.round(m.getScrollLeft(n)),r=this.offsetY-Math.round(m.getScrollTop(n)),i=null,s=null,l=0;l<t.length;l++)this._scrollToChild(t[l],n,{offsetX:o,offsetY:r}),i=g.getClientDimensions(n),s=g.getClientDimensions(t[l]),o+=i.left-s.left+s.border.left,r+=i.top-s.top+s.border.top,n=t[l];return e.top!==e?E({cmd:b,offsetX:o,offsetY:r,maxScrollMargin:this.maxScrollMargin},S,e.parent):d.resolve()},t.prototype._isElementHiddenByFixed=function(){var t=g.getClientDimensions(this.element),e=g.getElementFromPoint(t.left+this.offsetX,t.top+this.offsetY);return e&&"fixed"===m.getComputedStyle(e).position},t.prototype._isScrollMarginTooBig=function(){var t=Math.min(m.getInnerWidth(e),m.getInnerHeight(e));return this.maxScrollMargin>=t/2},t.prototype.run=function(){var t=this;return this._scrollElement(),this._scrollParents().then(function(){return(0,f["default"])(function(){return!t._isScrollMarginTooBig()&&t._isElementHiddenByFixed()},function(){return t.maxScrollMargin+=y,t._scrollParents()})})},t}();t["default"]=_,n.exports=t["default"]},select:{"base.js":function(t,e,n){function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}t.__esModule=!0;var u=n("../../deps/hammerhead"),c=i(u),f=n("../../deps/testcafe-core"),d=i(f),h=n("../visible-element-automation"),p=i(h),m=n("../../get-element"),g=n("./utils"),E=r(g),v=n("../move"),y=i(v),b=n("../../../../test-run/commands/options"),S=n("../../cursor"),_=i(S),A=n("../../errors"),w=i(A),x=c["default"].Promise,P=c["default"].utils.browser,C=c["default"].utils.featureDetection,M=c["default"].eventSandbox.eventSimulator,T=c["default"].eventSandbox.focusBlur,O=d["default"].contentEditable,I=d["default"].domUtils,D=d["default"].positionUtils,N=d["default"].eventUtils,U=d["default"].delay,k=function(t){function e(n,o){s(this,e);var r=l(this,t.call(this,n,o));return r.absoluteStartPoint=null,r.absoluteEndPoint=null,r.clientPoint=null,r.speed=o.speed,r.downEvent=C.isTouchDevice?"touchstart":"mousedown",r.upEvent=C.isTouchDevice?"touchend":"mouseup",r.eventArgs={options:null,element:null},r.eventState={mousedownPrevented:!1,simulateDefaultBehavior:!0},r}return a(e,t),e._calculateEventArguments=function(t){var e=D.offsetToClientCoords(t);return(0,m.fromPoint)(e.x,e.y).then(function(t){var n=t.element;if(!n)throw new Error(w["default"].elementIsInvisibleError);return{element:n,options:{clientX:e.x,clientY:e.y}}})},e.prototype._move=function(t){var e=this,n=t.element,o=t.offsetX,r=t.offsetY,i=t.speed,s=new b.MoveOptions({offsetX:o,offsetY:r,speed:i},(!1)),l=new y["default"](n,s);return l.run().then(function(){return U(e.automationSettings.mouseActionStepDelay)})},e.prototype._bindMousedownHandler=function(){var t=this,e=function n(e){t.eventState.mousedownPrevented=e.defaultPrevented,N.preventDefault(e),N.unbind(t.element,"mousedown",n)};N.bind(this.element,"mousedown",e)},e.prototype._calculateAbsoluteStartPoint=function(){throw new Error("Not implemented")},e.prototype._calculateAbsoluteEndPoint=function(){throw new Error("Not implemented")},e.prototype._moveToPoint=function(t){E.scrollEditableElementByPoint(this.element,t),this.clientPoint=E.excludeElementScroll(this.element,t);var e={element:o.documentElement,offsetX:this.clientPoint.x,offsetY:this.clientPoint.y,speed:this.speed};return this._move(e)},e.prototype._mousedown=function(){var t=this;return _["default"].leftButtonDown().then(function(){return e._calculateEventArguments(t.clientPoint)}).then(function(e){t.eventArgs=e;var n=(P.isWebKit||P.isIE)&&I.isSelectElement(t.element);
return n&&t._bindMousedownHandler(),t.eventState.simulateDefaultBehavior=M[t.downEvent](t.eventArgs.element,t.eventArgs.options),t.eventState.simulateDefaultBehavior===!1&&(t.eventState.simulateDefaultBehavior=n&&!t.eventState.mousedownPrevented),t._focus()})},e.prototype._focus=function(){var t=this;return new x(function(e){var n=I.isContentEditableElement(t.element)?O.findContentEditableParent(t.element):t.element;T.focus(n,e,!1,!0)})},e.prototype._setSelection=function(){throw new Error("Not implemented")},e.prototype._mouseup=function(){var t=this;return _["default"].buttonUp().then(function(){return t._setSelection(),e._calculateEventArguments(t.clientPoint)}).then(function(e){t.eventArgs=e,M[t.upEvent](t.eventArgs.element,t.eventArgs.options)})},e.prototype.run=function(){var t=this;return this.absoluteStartPoint=this._calculateAbsoluteStartPoint(),this.absoluteEndPoint=this._calculateAbsoluteEndPoint(),this._moveToPoint(this.absoluteStartPoint).then(function(){return t._mousedown()}).then(function(){return t._moveToPoint(t.absoluteEndPoint)}).then(function(){return t._mouseup()})},e}(p["default"]);t["default"]=k,e.exports=t["default"]},"calculate-select-text-arguments.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){var n=t.value,o=n&&n.length?n.split("\n"):[],r=o.length-1,i=e.startLine?Math.min(e.startLine,r):0,s=o[i]?o[i].length:0,a=e.startPos?Math.min(e.startPos,s):0,u=void 0===e.endLine||null===e.endLine?r:Math.min(e.endLine,r),c=o[u]?o[u].length:0,f=void 0===e.endPos||null===e.endPos?c:Math.min(e.endPos,c),d=l.getTextareaPositionByLineAndOffset(t,i,0),h=l.getTextareaPositionByLineAndOffset(t,u,0);return{startPos:d+a,endPos:h+f}}t.__esModule=!0,t["default"]=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l.isTextEditableElement(t),o=t.value?t.value.length:0,i=n?0:a.getFirstVisiblePosition(t),s=n?o:a.getLastVisiblePosition(t),u=e.startPos?Math.min(e.startPos,s):i,c=void 0===e.endPos||null===e.endPos?s:Math.min(e.endPos,s);return void 0!==e.offset?(e.offset>=0?c=Math.min(e.offset,c):(u=c,c=Math.max(0,c+e.offset)),{startPos:u,endPos:c}):void 0!==e.startLine?r(t,e):{startPos:u,endPos:c}};var i=n("../../deps/testcafe-core"),s=o(i),l=s["default"].domUtils,a=s["default"].contentEditable;e.exports=t["default"]},"select-editable-content.js":function(t,e,n){function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}t.__esModule=!0;var a=n("../../deps/testcafe-core"),u=r(a),c=n("./utils"),f=o(c),d=n("./base"),h=r(d),p=u["default"].textSelection,m=u["default"].contentEditable,g=u["default"].positionUtils,E=function(t){function e(n,o,r){i(this,e);var l=s(this,t.call(this,m.getNearestCommonAncestor(n,o),r)),a=m.getFirstVisiblePosition(n),u=m.getLastVisiblePosition(o),c={node:n,offset:a},f={node:o,offset:u},d=m.calculatePositionByNodeAndOffset(l.element,c),h=m.calculatePositionByNodeAndOffset(l.element,f);return d>h&&(a=m.getLastVisiblePosition(n),u=m.getFirstVisiblePosition(o)),c=m.calculateNodeAndOffsetByPosition(n,a),f=m.calculateNodeAndOffsetByPosition(o,u),l.startNode=c.node,l.startOffset=c.offset,l.endNode=f.node,l.endOffset=f.offset,l}return l(e,t),e.prototype._calculateAbsoluteStartPoint=function(){var t=f.getSelectionCoordinatesByNodeAndOffset(this.element,this.startNode,this.startOffset);return t||g.findCenter(this.element)},e.prototype._calculateAbsoluteEndPoint=function(){var t=f.getSelectionCoordinatesByNodeAndOffset(this.element,this.endNode,this.endOffset);return t||g.findCenter(this.element)},e.prototype._setSelection=function(){if(this.eventState.simulateDefaultBehavior!==!1){var t={node:this.startNode,offset:this.startOffset},e={node:this.endNode,offset:this.endOffset};p.selectByNodesAndOffsets(t,e,!0)}},e}(h["default"]);t["default"]=E,e.exports=t["default"]},"select-text.js":function(t,e,n){function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}t.__esModule=!0;var a=n("../../deps/testcafe-core"),u=r(a),c=n("../../deps/hammerhead"),f=n("./base"),d=r(f),h=n("./utils"),p=o(h),m=u["default"].textSelection,g=u["default"].domUtils,E=u["default"].positionUtils,v=function(t){function e(n,o,r,l){i(this,e);var a=s(this,t.call(this,n,c.utils.extend(l,{offsetX:0,offsetY:0})));return a.startPos=o,a.endPos=r,a}return l(e,t),e.prototype._calculateAbsoluteStartPoint=function(){var t=p.getSelectionCoordinatesByPosition(this.element,this.startPos);return t||E.findCenter(this.element)},e.prototype._calculateAbsoluteEndPoint=function(){var t=p.getSelectionCoordinatesByPosition(this.element,this.endPos);return t?t:g.isContentEditableElement(this.element)?p.getLastVisibleSelectionPosition(this.element,this.startPos,this.endPos):E.findCenter(this.element)},e.prototype._setSelection=function(){var t=g.isTextEditableElement(this.element),e=g.isContentEditableElement(this.element);(t||e)&&this.eventState.simulateDefaultBehavior!==!1&&m.select(this.element,this.startPos,this.endPos)},e.prototype.run=function(e){var n=this;return this._ensureElement(e).then(function(){return t.prototype.run.call(n)})},e}(d["default"]);t["default"]=v,e.exports=t["default"]},"utils.js":function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){var n=w.getBordersWidth(t),o=A.getOffsetPosition(t),r=t.scrollHeight||t.getBoundingClientRect().height,i=Math.ceil(e.left),s=Math.ceil(e.top),l=Math.floor(e.bottom);if(!_.isTextAreaElement(t)){var a=A.offsetToClientCoords({x:o.left,y:o.top}),u=a.x+n.left+1,c=a.y+n.top+1,f=a.y+n.top+n.bottom+r,d=a.y+n.top+r-1;i=Math.ceil(i<=a.x?u:e.left),s=Math.ceil(s<=a.y?c:e.top),l=Math.floor(l>=f?d:e.bottom)}return{left:i,top:s,bottom:l}}function s(t){var e=w.getElementScroll(o);return{left:t.left+e.left,top:t.top+e.top,bottom:t.bottom+e.top}}function l(t,e){var n=_.findDocument(t).createRange(),o=x.calculateNodeAndOffsetByPosition(t,e);return n.setStart(o.node,Math.min(o.offset,o.node.length)),n.setEnd(o.node,Math.min(o.offset,o.node.length)),n.getClientRects()[0]}function a(t,e){var n=t.createTextRange();return n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",e),n.collapse(!0),n.getBoundingClientRect()}function u(t,e){var n=c(t),r=null;try{var i=o.createRange();i.setStart(n.firstChild,Math.min(e,t.value.length)),i.setEnd(n.firstChild,Math.min(e+1,t.value.length+1)),_.isTextAreaElement(t)?(r=i.getBoundingClientRect(),0===r.width&&0===r.height&&(r=i.getClientRects()[0])):r=i.getClientRects()[0]}catch(s){r=null}return _.remove(n),r}function c(t){var e=o.body,n=A.getOffsetPosition(t),r=w.getElementMargin(t),i=n.top-r.top,s=n.left-r.left,l=o.createElement("div"),a="white-space:pre-wrap;border-style:solid;";if("absolute"===w.get(e,"position")){var u=w.getElementMargin(e),c=w.get(e,"left"),f=w.get(e,"top");s-=u.left+(parseInt(c.replace("px",""),10)||0),i-=u.top+(parseInt(f.replace("px",""),10)||0)}return P.forEach(C,function(e){a+=e+":"+w.get(t,e)+";"}),w.set(l,{cssText:a,position:"absolute",left:s+"px",top:i+"px",width:t.scrollWidth+"px",height:t.scrollHeight+"px"}),l.textContent=t.value+" ",e.appendChild(l),l}function f(t,e){var n=null;return(n=_.isContentEditableElement(t)?l(t,e):"function"==typeof t.createTextRange?a(t,e):u(t,e))?(n=i(t,n),n=s(n),{x:n.left,y:Math.floor(n.top+(n.bottom-n.top)/2)}):null}function d(t,e){var n=_.isTextEditableElement(t),o=_.isContentEditableElement(t),r=n&&t.value.length>0||o&&x.getContentEditableValue(t).length;return r?f(t,e):A.findCenter(t)}function h(t,e,n){var o=_.findDocument(t).createRange();o.setStart(e,Math.min(n,e.length)),o.setEnd(e,Math.min(n,e.length));var r=o.getClientRects()[0];return r?(r=i(t,r),r=s(r),{x:r.left,y:Math.floor(r.top+(r.bottom-r.top)/2)}):null}function p(t,e,n){for(var o=e>n,r=o?1:-1,i=n,s=null;i!==e&&(i+=r,!(s=f(t,i))););return s||(s=f(t,e)||A.findCenter(t)),s}function m(t,e){if(_.isEditableElement(t)){var n=_.isTextAreaElement(t),o=_.isInputElement(t);if(!o||!(S.isFirefox||S.isIE&&S.version>10)){var r=A.getOffsetPosition(t),i=w.getBordersWidth(t),s=w.getElementScroll(t),l=e.x-r.left-i.left,a=e.y-r.top-i.top,u=null;if(n)return a<s.top&&(u=a),a>t.clientHeight+s.top&&(u=a-t.clientHeight),void(null!==u&&w.setScrollTop(t,Math.round(u)));l<s.left&&(u=l),l>t.clientWidth+s.left&&(u=l-t.clientWidth),null!==u&&w.setScrollLeft(t,Math.round(u))}}}function g(t,e){var n=_.isTextEditableElement(t),o=_.isInputElement(t);if(!n&&!_.isContentEditableElement(t))return e;var r=A.getOffsetPosition(t),i=w.getBordersWidth(t),s=w.getElementScroll(t),l=r.left+i.left+t.clientWidth;return o&&n&&(S.isFirefox||S.isIE&&S.version>10)?{x:Math.min(e.x,l),y:e.y}:{x:e.x-s.left,y:e.y-s.top}}t.__esModule=!0,t.getSelectionCoordinatesByPosition=d,t.getSelectionCoordinatesByNodeAndOffset=h,t.getLastVisibleSelectionPosition=p,t.scrollEditableElementByPoint=m,t.excludeElementScroll=g;var E=n("../../deps/hammerhead"),v=r(E),y=n("../../deps/testcafe-core"),b=r(y),S=v["default"].utils.browser,_=b["default"].domUtils,A=b["default"].positionUtils,w=b["default"].styleUtils,x=b["default"].contentEditable,P=b["default"].arrayUtils,C=["direction","font-family","font-size","font-size-adjust","font-variant","font-weight","font-style","letter-spacing","line-height","text-align","text-indent","text-transform","word-wrap","word-spacing","padding-top","padding-left","padding-right","padding-bottom","margin-top","margin-left","margin-right","margin-bottom","border-top-width","border-left-width","border-right-width","border-bottom-width"]}},type:{"index.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=n("../../deps/hammerhead"),s=o(i),l=n("../../deps/testcafe-core"),a=o(l),u=n("../../../../test-run/commands/options"),c=n("../click"),f=o(c),d=n("./type-text"),h=o(d),p=n("../../utils/get-key-code"),m=o(p),g=n("../../utils/get-key-identifier"),E=o(g),v=n("../../utils/key-identifier-required-for-event"),y=o(v),b=n("../../utils/promise-whilst"),S=o(b),_=n("../../utils/offsets"),A=n("../../settings"),w=o(A),x=s["default"].Promise,P=s["default"].utils.extend,C=s["default"].eventSandbox.eventSimulator,M=s["default"].eventSandbox.elementEditingWatcher,T=a["default"].domUtils,O=a["default"].contentEditable,I=a["default"].textSelection,D=a["default"].delay,N=a["default"].KEY_MAPS.specialKeys,U=function(){function t(e,n,o){r(this,t),this.element=t.findTextEditableChild(e)||e,this.text=n.toString(),this.modifiers=o.modifiers,this.caretPos=o.caretPos,this.replace=o.replace,this.paste=o.paste,this.offsetX=o.offsetX,this.offsetY=o.offsetY,this.speed=o.speed,this.automationSettings=new w["default"](this.speed),this.elementChanged=e!==this.element,this.currentPos=0,this.currentKeyCode=null,this.currentCharCode=null,this.currentKey=null,this.currentKeyIdentifier=null,this.eventArgs={options:null,element:null},this.eventState={skipType:!1,simulateKeypress:!0,simulateTypeChar:!0}}return t.findTextEditableChild=function(t){var e=null;if(!T.isEditableElement(t))for(var n=t.querySelectorAll("*"),o=0;o<n.length;o++)if(T.isTextEditableElementAndEditingAllowed(n[o])){e=n[o];break}return e},t.prototype._calculateEventArguments=function(e){var n=T.getActiveElement(),o=T.isContentEditableElement(this.element),r=this.eventArgs.element||this.element;o||n===r||(r=t.findTextEditableChild(n)||n);var i=P({keyCode:e?this.currentCharCode:this.currentKeyCode},this.modifiers);return e&&(i.charCode=this.currentCharCode),(0,y["default"])()?i.keyIdentifier=e?"":this.currentKeyIdentifier:i.key=this.currentKey,{element:r,options:i}},t.prototype._calculateTargetElement=function(){var t=T.getActiveElement(),e=T.isContentEditableElement(this.element);if(e){if(t!==O.findContentEditableParent(this.element))return void(this.eventState.skipType=!0)}else if(t!==this.element)return void(this.eventState.skipType=!0);this.element=e?this.element:t},t.prototype._click=function(t){var e=this,n=T.getActiveElement(),o=T.isTextEditableElementAndEditingAllowed(this.element),r=T.isContentEditableElement(this.element);if(n!==this.element){var i=(0,_.getDefaultAutomationOffsets)(this.element),s=i.offsetX,l=i.offsetY,a=new u.ClickOptions({offsetX:this.elementChanged?s:this.offsetX,offsetY:this.elementChanged?l:this.offsetY,speed:this.speed,caretPos:this.caretPos,modifiers:this.modifiers}),c=new f["default"](this.element,a);return c.run(t).then(function(){return D(e.automationSettings.mouseActionStepDelay)})}o&&M.watchElementEditing(this.element);var d=o||r;if(d){var h=I.getSelectionStart(this.element);isNaN(parseInt(this.caretPos,10))||this.caretPos===h||I.select(this.element,this.caretPos,this.caretPos)}return x.resolve()},t.prototype._type=function(){var t=this;if(this.eventState.skipType)return x.resolve();var e=T.isContentEditableElement(this.element);return this.replace&&(T.isTextEditableElementAndEditingAllowed(this.element)?I.select(this.element):e&&I.deleteSelectionContents(this.element,!0)),(0,S["default"])(function(){return!t._isTypingFinished()},function(){return t._typingStep()})},t.prototype._isTypingFinished=function(){return this.currentPos===this.text.length},t.prototype._typingStep=function(){var t=this.text.charAt(this.currentPos);return this.currentKeyCode=(0,m["default"])(t),this.currentCharCode=this.text.charCodeAt(this.currentPos),this.currentKey=this.currentKeyCode===N.enter?"Enter":t,this.currentKeyIdentifier=(0,E["default"])(this.currentKey),this._keydown(),this._keypress(),this._keyup()},t.prototype._keydown=function(){this.eventArgs=this._calculateEventArguments(),this.eventState.simulateKeypress=C.keydown(this.eventArgs.element,this.eventArgs.options)},t.prototype._keypress=function(){this.eventState.simulateKeypress!==!1&&(this.eventArgs=this._calculateEventArguments(!0),this.eventState.simulateTypeChar=C.keypress(this.eventArgs.element,this.eventArgs.options))},t.prototype._keyup=function(){var t=this,e=this.eventArgs.element;this.eventArgs=this._calculateEventArguments();var n=T.isTextEditableElement(this.element),o=T.isContentEditableElement(this.element),r=this.paste||!n&&!o;return x.resolve().then(function(){return r?t._typeAllText(e):t._typeChar(e)}).then(function(){C.keyup(t.eventArgs.element,t.eventArgs.options),r?t.currentPos=t.text.length:t.currentPos++})},t.prototype._typeChar=function(t){if(this.eventState.simulateKeypress===!1||this.eventState.simulateTypeChar===!1)return M.restartWatchingElementEditing(t),D(this.automationSettings.keyActionStepDelay);var e=this.text.charAt(this.currentPos),n=/^\d$/.test(e),o=0===this.currentPos?null:this.text.charAt(this.currentPos-1),r=T.isInputElement(t)&&"number"===t.type;if(r){var i=I.getSelectionStart(t),s=t.value.length,l=/^\d/.test(this.text),a="."===e||"-"===e&&s;if(!n&&(l||!a||0!==i))return D(this.automationSettings.keyActionStepDelay);n&&("."===o||"-"===o&&!s)&&(e=o+e)}return(0,h["default"])(t,e,null),D(this.automationSettings.keyActionStepDelay)},t.prototype._typeAllText=function(t){return(0,h["default"])(t,this.text,this.caretPos),D(this.automationSettings.keyActionStepDelay)},t.prototype.run=function(t){var e=this;return this._click(t).then(function(){return e._calculateTargetElement()}).then(function(){return e._type()})},t}();t["default"]=U,e.exports=t["default"]},"type-text.js":function(t,n,r){function i(t){return t&&t.__esModule?t:{"default":t}}function s(t){var e=x.getSelectionByElement(t),n=x.hasInverseSelectionContentEditable(t);return x.hasElementContainsSelection(t)?w.getSelection(t,e,n):{startPos:w.calculateNodeAndOffsetByPosition(t,0),endPos:w.calculateNodeAndOffsetByPosition(t,0)}}function l(t,e){var n=e.startPos.node,o=n.parentNode&&n.parentElement,r=b.isChrome&&b.version<58||b.isSafari;return!r&&o&&A.isElementContainsNode(t,n)||(e=s(t),x.hasInverseSelectionContentEditable(t)&&(e={startPos:e.endPos,endPos:e.startPos})),e.endPos.offset=e.startPos.offset,e}function a(t,e){var n=o.createTextNode(e),r=e.length,i={node:n,offset:r};"br"===A.getTagName(t)?t.parentNode.insertBefore(n,t):t.appendChild(n),x.selectByNodesAndOffsets(i,i)}function u(t){var e=t.startPos.node,n=t.startPos.offset,o=t.endPos.offset,r=w.getFirstNonWhitespaceSymbolIndex(e.nodeValue),i=w.getLastNonWhitespaceSymbolIndex(e.nodeValue);return n<r&&0!==n?(t.startPos.offset=r,t.endPos.offset=o+r-n):o>i&&o!==e.nodeValue.length&&(t.startPos.offset=e.nodeValue.length,t.endPos.offset=o+e.nodeValue.length-n),t}function c(t,n){var o=s(t),r=o.startPos.node,i=o.endPos.node,c=!1,f=function(){c=!0},d=function(){(0,v["default"])().then(function(){c||S.input(t),_.removeInternalEventListener(e,"input",f)})};if(_.addInternalEventListener(e,["input"],f),r&&i&&A.isContentEditableElement(r)&&A.isContentEditableElement(i)&&(A.isTheSameNode(r,i)||(x.deleteSelectionContents(t),o=l(t,o),r=o.startPos.node),r&&A.isContentEditableElement(r)&&A.isRenderedNode(r))){if(A.isElementNode(r))return a(r,n),void d();o=u(o),r=o.startPos.node;var h=o.startPos.offset,p=o.endPos.offset,m=r.nodeValue,g={node:r,offset:h+n.length};r.nodeValue=m.substring(0,h)+n+m.substring(p,m.length),x.selectByNodesAndOffsets(g,g),d()}}function f(t,e){var n=t.value,o=e.length,r=x.getSelectionStart(t),i=x.getSelectionEnd(t),s=A.isInputElement(t)&&"number"===t.type,l=!b.isIE&&s?null:parseInt(t.maxLength,10);l<0&&(l=b.isIE?0:null),(null===l||isNaN(l)||l>n.length)&&(s&&b.isIOS&&"."===n[n.length-1]&&(r+=1,i+=1),(0,y.setValue)(t,n.substring(0,r)+e+n.substring(i,n.length)),x.select(t,r+o,r+o)),S.input(t)}function d(t,e,n){null!==n?(0,y.setValue)(t,t.value.substr(0,n)+e+t.value.substr(n+e.length)):(0,y.setValue)(t,e),S.change(t),S.input(t)}t.__esModule=!0,t["default"]=function(t,e,n){A.isContentEditableElement(t)&&c(t," "===e?String.fromCharCode(160):e),A.isElementReadOnly(t)||(A.isTextEditableElement(t)?f(t,e):A.isInputElement(t)&&d(t,e,n))};var h=r("../../deps/hammerhead"),p=i(h),m=r("../../deps/testcafe-core"),g=i(m),E=r("../../utils/next-tick"),v=i(E),y=r("../../utils/utils"),b=p["default"].utils.browser,S=p["default"].eventSandbox.eventSimulator,_=p["default"].eventSandbox.listeners,A=g["default"].domUtils,w=g["default"].contentEditable,x=g["default"].textSelection;n.exports=t["default"]}},"upload.js":function(t,e,n){function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=n("../deps/hammerhead"),i=n("../deps/testcafe-core"),s=function(){function t(e,n,r){o(this,t),this.element=e,this.paths=n,this.createError=r}return t.prototype.run=function(){var t=this;return(0,r.doUpload)(this.element,this.paths).then(function(e){if(e.length)throw t.createError(i.arrayUtils.map(e,function(t){return t.path}))})},t}();t["default"]=s,e.exports=t["default"]},"visible-element-automation.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var l=n("../deps/hammerhead"),a=o(l),u=n("../deps/testcafe-core"),c=n("../utils/get-automation-point"),f=o(c),d=n("../utils/screen-point-to-client"),h=o(d),p=n("../get-element"),m=n("../errors"),g=o(m),E=n("../settings"),v=o(E),y=n("./scroll"),b=o(y),S=n("./move"),_=o(S),A=n("../../../test-run/commands/options"),w=a["default"].utils.extend,x=function C(t){var e=t.element,n=void 0===e?null:e,o=t.clientPoint,r=void 0===o?null:o,i=t.screenPoint,l=void 0===i?null:i,a=t.isTarget,u=void 0!==a&&a,c=t.inMoving,f=void 0!==c&&c;s(this,C),this.element=n,this.clientPoint=r,this.screenPoint=l,this.isTarget=u,this.inMoving=f},P=function(t){function e(n,o){s(this,e);var i=r(this,t.call(this));return i.TARGET_ELEMENT_FOUND_EVENT="automation|target-element-found-event",i.element=n,i.options=o,i.automationSettings=new v["default"](o.speed),i}return i(e,t),e.prototype._getElementForEvent=function(t){var e=t.point,n=e.x,o=e.y,r=u.positionUtils.containsOffset(this.element,this.options.offsetX,this.options.offsetY)?this.element:null;return(0,p.fromPoint)(n,o,r).then(function(t){var e=t.element;return e})},e.prototype._moveToElement=function(){var t=this,e=new A.MoveOptions(w({skipScrolling:!0},this.options),(!1)),n=new _["default"](this.element,e);return n.run().then(function(){return(0,u.delay)(t.automationSettings.mouseActionStepDelay)})},e.prototype._scrollToElement=function(){var t=this,e=new b["default"](this.element,this.options);return e.run().then(function(){return(0,u.delay)(t.automationSettings.mouseActionStepDelay)})},e.prototype._wrapAction=function(t){var e=this,n=this.options.offsetX,o=this.options.offsetY,r=(0,f["default"])(this.element,n,o),i=u.positionUtils.getClientPosition(this.element);return t().then(function(){var t=(0,f["default"])(e.element,n,o),s=u.positionUtils.getClientPosition(e.element),l=(0,h["default"])(e.element,t),a=u.positionUtils.containsOffset(e.element,n,o)?e.element:null;return(0,p.fromPoint)(l.x,l.y,a).then(function(n){var o=n.element,c=n.corrected,f=o;if(!f)return new x({});var d=!a||c||f===e.element;d||(d=u.arrayUtils.indexOf(u.domUtils.getParents(f),e.element)>-1);var h=r.x!==t.x||r.y!==t.y,p=i.x!==s.x||i.y!==s.y,m=h&&p;return new x({element:o,clientPoint:l,screenPoint:t,isTarget:d,inMoving:m})})})},e._checkElementState=function(t,e){if(!t.element)throw new Error(g["default"].elementIsInvisibleError);if(e&&(!t.isTarget||t.inMoving))throw new Error(g["default"].foundElementIsNotTarget)},e.prototype._ensureElement=function(t,n){var o=this;return this._wrapAction(function(){return o._scrollToElement()}).then(function(n){return e._checkElementState(n,t)}).then(function(){return o._wrapAction(function(){return o._moveToElement()})}).then(function(o){return n||e._checkElementState(o,t),o}).then(function(t){return o.emit(o.TARGET_ELEMENT_FOUND_EVENT,{}),{element:t.element,clientPoint:t.clientPoint,screenPoint:t.screenPoint}})},e}(u.serviceUtils.EventEmitter);t["default"]=P,e.exports=t["default"]}},"settings.js":function(t,e,n){function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=10,s=400,l=200,a=100,u=4,c=4,f=function(){function t(e){o(this,t),this.speedFactor=e||1}return r(t,[{key:"mouseActionStepDelay",get:function(){return 1===this.speedFactor?i:(1-this.speedFactor)*s}},{key:"keyActionStepDelay",get:function(){return 1===this.speedFactor?i:(1-this.speedFactor)*l}},{key:"cursorSpeed",get:function(){return Math.pow(a*c,this.speedFactor)/c}},{key:"draggingSpeed",get:function(){return Math.pow(u*c,this.speedFactor)/c}}]),t}();t["default"]=f,e.exports=t["default"]},utils:{"get-automation-point.js":function(t,e,n){function r(t,e,n){var r=i.positionUtils.getOffsetPosition(t),s=t===o.documentElement?0:r.left,l=t===o.documentElement?0:r.top;return{x:s+e,y:l+n}}t.__esModule=!0,t["default"]=r;var i=n("../deps/testcafe-core");e.exports=t["default"]},"get-key-code.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}t.__esModule=!0,t["default"]=function(t){if((0,s["default"])(t))return t.toUpperCase().charCodeAt(0);var e=r.KEY_MAPS.shiftMap[t]?r.KEY_MAPS.shiftMap[t].charCodeAt(0):t.charCodeAt(0);return r.KEY_MAPS.symbolCharCodeToKeyCode[e]||e};var r=n("../deps/testcafe-core"),i=n("./is-letter"),s=o(i);e.exports=t["default"]},"get-key-identifier.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(t){return(0,a["default"])(t)?s["default"].LETTERS[t.toLowerCase()]:s["default"].SYMBOLS[t]||s["default"].SPECIAL_KEYS[t]||t}t.__esModule=!0,t["default"]=r;var i=n("./key-identifier-maps"),s=o(i),l=n("./is-letter"),a=o(l);e.exports=t["default"]},"get-line-rect-intersection.js":function(t,e,n){function o(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function r(t,e,n){var o=null,r=null;if(n.isHorizontal)return o=i.positionUtils.getLineXByYCoord(t,e,n.y1),r=o&&o>=n.x1&&o<=n.x2,r?{x:o,y:n.y1}:null;var s=i.positionUtils.getLineYByXCoord(t,e,n.x1);return r=s&&s>=n.y1&&s<=n.y2,r?{x:n.x1,y:s}:null}t.__esModule=!0,t["default"]=function(t,e,n){for(var i=[],s=null,l=[{x1:n.left,y1:n.top,x2:n.left,y2:n.bottom,isHorizontal:!1},{x1:n.right,y1:n.top,x2:n.right,y2:n.bottom,isHorizontal:!1},{x1:n.left,y1:n.top,x2:n.right,y2:n.top,isHorizontal:!0},{x1:n.left,y1:n.bottom,x2:n.right,y2:n.bottom,isHorizontal:!0}],a=0;a<l.length;a++)s=r(t,e,l[a]),s&&i.push(s);return i.length?1===i.length?i[0]:o(t,i[0])<o(t,i[1])?i[0]:i[1]:null};var i=n("../deps/testcafe-core");e.exports=t["default"]},"is-letter.js":function(t,e,n){t.__esModule=!0,t["default"]=function(t){return 1===t.length&&(t>="a"&&t<="z"||t>="A"&&t<="Z")},e.exports=t["default"]},"key-identifier-maps.js":function(t,e,n){t.__esModule=!0,t["default"]={SPECIAL_KEYS:{capslock:"CapsLock","delete":"U+007F",end:"End",enter:"Enter",esc:"U+001B",home:"Home",ins:"Insert",pagedown:"PageDown",pageup:"PageUp",space:"U+0020",tab:"Tab",alt:"Alt",ctrl:"Control",meta:"Meta",shift:"Shift"},LETTERS:{a:"U+0041",b:"U+0042",c:"U+0043",d:"U+0044",e:"U+0045",f:"U+0046",g:"U+0047",h:"U+0048",i:"U+0049",j:"U+004A",k:"U+004B",l:"U+004C",m:"U+004D",n:"U+004E",o:"U+004F",p:"U+0050",q:"U+0051",r:"U+0052",s:"U+0053",t:"U+0054",u:"U+0055",v:"U+0056",w:"U+0057",x:"U+0058",y:"U+0059",z:"U+005A"},SYMBOLS:{0:"U+0030",1:"U+0031",2:"U+0032",3:"U+0033",4:"U+0034",5:"U+0035",6:"U+0036",7:"U+0037",8:"U+0038",9:"U+0039"," ":"U+0020","!":"U+0021","@":"U+0040","#":"U+0023",$:"U+0024","%":"U+0025","^":"U+005E","*":"U+002A","(":"U+0028",")":"U+0029",_:"U+005F","|":"U+007C","\\":"U+005C","/":"U+002F","?":"U+003F",".":"U+002E",",":"U+002C","<":"U+003C",">":"U+003E","[":"U+005B","]":"U+005D","{":"U+007B","}":"U+007D","":"U+00A7","":"U+00B1","'":"U+0027",'"':"U+0022",":":"U+003A",";":"U+003B","`":"U+0060","~":"U+007E"}},e.exports=t["default"]},"key-identifier-required-for-event.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(){return l.isSafari||l.isChrome&&l.version<54}t.__esModule=!0,t["default"]=r;var i=n("../deps/hammerhead"),s=o(i),l=s["default"].utils.browser;e.exports=t["default"]},"next-tick.js":function(t,n,o){function r(t){return t&&t.__esModule?t:{"default":t}}t.__esModule=!0,t["default"]=function(){return new l(function(t){return a.setTimeout.call(e,t,0)})};var i=o("../deps/hammerhead"),s=r(i),l=s["default"].Promise,a=s["default"].nativeMethods;n.exports=t["default"]},"offsets.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(t){var e=l.positionUtils.getElementRectangle(t);return{offsetX:Math.round(e.width/2),offsetY:Math.round(e.height/2)}}function i(t,e,n){var o=r(t);if(e="number"==typeof e?Math.round(e):o.offsetX,n="number"==typeof n?Math.round(n):o.offsetY,e>0&&n>0)return{offsetX:e,offsetY:n};var i=l.positionUtils.getClientDimensions(t),s=Math.round(Math.max(t.scrollWidth,i.width)),a=Math.round(Math.max(t.scrollHeight,i.height)),u=i.scrollbar.right+i.border.left+i.border.right+s,c=i.scrollbar.bottom+i.border.top+i.border.bottom+a;return{offsetX:e<0?u+e:e,offsetY:n<0?c+n:n}}function s(t,e,n){var o=l.positionUtils.containsOffset(t,e,n);if(o)return{offsetX:e,offsetY:n};var r=(0,u["default"])(t,e,n);return{offsetX:r.x,offsetY:r.y}}t.__esModule=!0,t.getDefaultAutomationOffsets=r,t.getOffsetOptions=i,t.getMoveAutomationOffsets=s;var l=n("../deps/testcafe-core"),a=n("./get-automation-point"),u=o(a)},"promise-each.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}t.__esModule=!0,t["default"]=function(t,e){return u.reduce(t,function(t,n){return t.then(function(){return e(n)})},a.resolve())};var r=n("../deps/hammerhead"),i=o(r),s=n("../deps/testcafe-core"),l=o(s),a=i["default"].Promise,u=l["default"].arrayUtils;e.exports=t["default"]},"promise-whilst.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}t.__esModule=!0,t["default"]=function(t,e){return new s(function(n){function o(){return t()?e().then(o):n()}return o()})};var r=n("../deps/hammerhead"),i=o(r),s=i["default"].Promise;e.exports=t["default"]},"screen-point-to-client.js":function(t,e,n){function o(t,e){var n=r.styleUtils.getElementScroll(t);return!/html/i.test(t.tagName)&&r.styleUtils.hasScroll(t)&&(e.x-=n.left,e.y-=n.top),r.positionUtils.offsetToClientCoords(e)}t.__esModule=!0,t["default"]=o;var r=n("../deps/testcafe-core");e.exports=t["default"]},"utils.js":function(t,e,n){function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){var n=y.isTextEditableElement(t),o=y.isContentEditableElement(t);if(n||o)if(o&&isNaN(parseInt(e,10)))v.setCursorToLastVisiblePosition(t);else{var r=isNaN(parseInt(e,10))?t.value.length:e;v.select(t,r,r)}else{var i=E.findContentEditableParent(t);i&&v.setCursorToLastVisiblePosition(E.findContentEditableParent(i))}}function s(t,e,n){return new h(function(o){var r=y.getActiveElement(),s=y.isTextEditableElement(t),a=y.closest(t,"label[for]"),u=y.isElementFocusable(t),c=!y.isElementFocusable(t)&&a,f=y.isContentEditableElement(t),d=f?E.findContentEditableParent(t):t;if(e&&p.isWebKit&&s&&v.select(t,0,0),c)return e&&l(a),void o();var h=!e,g=!0,b=!1;if(!u&&!f){var S=y.findDocument(d),_=S.activeElement,A=y.isBodyElement(_),w=y.isBodyElement(d)?d:y.getFocusableParent(d),x=_&&!A&&y.containsElement(_,d);if(x||A&&y.isBodyElement(w))return void o();d=w||S.body,b=!0}m.focus(d,function(){return e&&!f&&t!==y.getActiveElement()?void o():(i(t,n),void(e||y.getActiveElement()===r?o():m.focus(r,o,!0,!0)))},h,g,!1,b)})}function l(t){var e=y.closest(t,"label[for]");if(e){var n=o.getElementById(e.getAttribute("for"));n&&y.getActiveElement()!==n&&m.focus(n,d["default"].noop,!1,!0)}}function a(t,e){g.inputValueSetter&&y.isInputElement(t)?g.inputValueSetter.call(t,e):g.textAreaValueSetter&&y.isTextAreaElement(t)?g.textAreaValueSetter.call(t,e):t.value=e}t.__esModule=!0,t.focusAndSetSelection=s,t.focusByRelatedElement=l,t.setValue=a;var u=n("../deps/hammerhead"),c=r(u),f=n("../deps/testcafe-core"),d=r(f),h=c["default"].Promise,p=c["default"].utils.browser,m=c["default"].eventSandbox.focusBlur,g=c["default"].nativeMethods,E=d["default"].contentEditable,v=d["default"].textSelection,y=d["default"].domUtils;
}}}},errors:{"test-run":{"index.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,t.SetNativeDialogHandlerCodeWrongTypeError=t.UncaughtErrorInNativeDialogHandler=t.NativeDialogNotHandledError=t.CurrentIframeIsInvisibleError=t.CurrentIframeNotFoundError=t.CurrentIframeIsNotLoadedError=t.ActionIframeIsNotLoadedError=t.ActionElementNotIframeError=t.RoleSwitchInRoleInitializerError=t.WindowDimensionsOverflowError=t.ActionElementIsNotFileInputError=t.ActionCanNotFindFileToUploadError=t.ActionIncorrectKeysError=t.ActionRootContainerNotFoundError=t.ActionElementNonContentEditableError=t.ActionElementNotTextAreaError=t.ActionElementNonEditableError=t.ActionAdditionalSelectorMatchesWrongNodeTypeError=t.ActionAdditionalElementIsInvisibleError=t.ActionAdditionalElementNotFoundError=t.ActionSelectorMatchesWrongNodeTypeError=t.ActionElementIsInvisibleError=t.ActionElementNotFoundError=t.ActionSelectorError=t.ActionUnsupportedDeviceTypeError=t.SetTestSpeedArgumentError=t.ActionStringArrayElementError=t.ActionStringOrStringArrayArgumentError=t.ActionPositiveIntegerArgumentError=t.ActionRoleArgumentError=t.ActionIntegerArgumentError=t.ActionStringArgumentError=t.ActionOptionsTypeError=t.ActionSpeedOptionError=t.ActionBooleanOptionError=t.ActionPositiveIntegerOptionError=t.ActionIntegerOptionError=t.AssertionExecutableArgumentError=t.ExternalAssertionLibraryError=t.UncaughtErrorInCustomDOMPropertyCode=t.UncaughtErrorInClientFunctionCode=t.UncaughtNonErrorObjectInTestCode=t.UncaughtErrorInTestCode=t.UncaughtErrorOnPage=t.PageLoadError=t.CantObtainInfoForElementSpecifiedBySelectorError=t.InvalidSelectorResultError=t.DomNodeClientFunctionResultError=t.ClientFunctionExecutionInterruptionError=t.MissingAwaitError=void 0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n("./type"),u=o(a),c=function h(t){s(this,h),this.type=t,this.isTestCafeError=!0,this.callsite=null},f=function(t){function e(n,o,i){s(this,e);var l=r(this,t.call(this,n));return l.optionName=o,l.actualValue=i,l}return i(e,t),e}(c),d=function(t){function e(n,o,i){s(this,e);var l=r(this,t.call(this,n));return l.argumentName=o,l.actualValue=i,l}return i(e,t),e}(c);t.MissingAwaitError=function(t){function e(n){s(this,e);var o=r(this,t.call(this,u["default"].missingAwaitError));return o.callsite=n,o}return i(e,t),e}(c),t.ClientFunctionExecutionInterruptionError=function(t){function e(n){s(this,e);var o=r(this,t.call(this,u["default"].clientFunctionExecutionInterruptionError));return o.instantiationCallsiteName=n,o}return i(e,t),e}(c),t.DomNodeClientFunctionResultError=function(t){function e(n){s(this,e);var o=r(this,t.call(this,u["default"].domNodeClientFunctionResultError));return o.instantiationCallsiteName=n,o}return i(e,t),e}(c),t.InvalidSelectorResultError=function(t){function e(){return s(this,e),r(this,t.call(this,u["default"].invalidSelectorResultError))}return i(e,t),e}(c),t.CantObtainInfoForElementSpecifiedBySelectorError=function(t){function e(n){s(this,e);var o=r(this,t.call(this,u["default"].cantObtainInfoForElementSpecifiedBySelectorError));return o.callsite=n,o}return i(e,t),e}(c),t.PageLoadError=function(t){function e(n){s(this,e);var o=r(this,t.call(this,u["default"].pageLoadError));return o.errMsg=n,o}return i(e,t),e}(c),t.UncaughtErrorOnPage=function(t){function e(n,o){s(this,e);var i=r(this,t.call(this,u["default"].uncaughtErrorOnPage));return i.errMsg=n,i.pageDestUrl=o,i}return i(e,t),e}(c),t.UncaughtErrorInTestCode=function(t){function e(n,o){s(this,e);var i=r(this,t.call(this,u["default"].uncaughtErrorInTestCode));return i.errMsg=String(n),i.callsite=o,i}return i(e,t),e}(c),t.UncaughtNonErrorObjectInTestCode=function(t){function e(n){s(this,e);var o=r(this,t.call(this,u["default"].uncaughtNonErrorObjectInTestCode));return o.objType="undefined"==typeof n?"undefined":l(n),o.objStr=String(n),o}return i(e,t),e}(c),t.UncaughtErrorInClientFunctionCode=function(t){function e(n,o){s(this,e);var i=r(this,t.call(this,u["default"].uncaughtErrorInClientFunctionCode));return i.errMsg=String(o),i.instantiationCallsiteName=n,i}return i(e,t),e}(c),t.UncaughtErrorInCustomDOMPropertyCode=function(t){function e(n,o,i){s(this,e);var l=r(this,t.call(this,u["default"].uncaughtErrorInCustomDOMPropertyCode,o,i));return l.errMsg=String(o),l.property=i,l.instantiationCallsiteName=n,l}return i(e,t),e}(c),t.ExternalAssertionLibraryError=function(t){function e(n,o){s(this,e);var i=r(this,t.call(this,u["default"].externalAssertionLibraryError));return i.errMsg=String(n),i.callsite=o,i}return i(e,t),e}(c),t.AssertionExecutableArgumentError=function(t){function e(n,o,i){s(this,e);var l=r(this,t.call(this,u["default"].assertionExecutableArgumentError,n,o));return l.errMsg=i,l}return i(e,t),e}(d),t.ActionIntegerOptionError=function(t){function e(n,o){return s(this,e),r(this,t.call(this,u["default"].actionIntegerOptionError,n,o))}return i(e,t),e}(f),t.ActionPositiveIntegerOptionError=function(t){function e(n,o){return s(this,e),r(this,t.call(this,u["default"].actionPositiveIntegerOptionError,n,o))}return i(e,t),e}(f),t.ActionBooleanOptionError=function(t){function e(n,o){return s(this,e),r(this,t.call(this,u["default"].actionBooleanOptionError,n,o))}return i(e,t),e}(f),t.ActionSpeedOptionError=function(t){function e(n,o){return s(this,e),r(this,t.call(this,u["default"].actionSpeedOptionError,n,o))}return i(e,t),e}(f),t.ActionOptionsTypeError=function(t){function e(n){s(this,e);var o=r(this,t.call(this,u["default"].actionOptionsTypeError));return o.actualType=n,o}return i(e,t),e}(c),t.ActionStringArgumentError=function(t){function e(n,o){return s(this,e),r(this,t.call(this,u["default"].actionStringArgumentError,n,o))}return i(e,t),e}(d),t.ActionIntegerArgumentError=function(t){function e(n,o){return s(this,e),r(this,t.call(this,u["default"].actionIntegerArgumentError,n,o))}return i(e,t),e}(d),t.ActionRoleArgumentError=function(t){function e(n,o){return s(this,e),r(this,t.call(this,u["default"].actionRoleArgumentError,n,o))}return i(e,t),e}(d),t.ActionPositiveIntegerArgumentError=function(t){function e(n,o){return s(this,e),r(this,t.call(this,u["default"].actionPositiveIntegerArgumentError,n,o))}return i(e,t),e}(d),t.ActionStringOrStringArrayArgumentError=function(t){function e(n,o){return s(this,e),r(this,t.call(this,u["default"].actionStringOrStringArrayArgumentError,n,o))}return i(e,t),e}(d),t.ActionStringArrayElementError=function(t){function e(n,o,i){s(this,e);var l=r(this,t.call(this,u["default"].actionStringArrayElementError,n,o));return l.elementIndex=i,l}return i(e,t),e}(d),t.SetTestSpeedArgumentError=function(t){function e(n,o){return s(this,e),r(this,t.call(this,u["default"].setTestSpeedArgumentError,n,o))}return i(e,t),e}(d),t.ActionUnsupportedDeviceTypeError=function(t){function e(n,o){return s(this,e),r(this,t.call(this,u["default"].actionUnsupportedDeviceTypeError,n,o))}return i(e,t),e}(d),t.ActionSelectorError=function(t){function e(n,o){s(this,e);var i=r(this,t.call(this,u["default"].actionSelectorError));return i.selectorName=n,i.errMsg=o,i}return i(e,t),e}(c),t.ActionElementNotFoundError=function(t){function e(){return s(this,e),r(this,t.call(this,u["default"].actionElementNotFoundError))}return i(e,t),e}(c),t.ActionElementIsInvisibleError=function(t){function e(){return s(this,e),r(this,t.call(this,u["default"].actionElementIsInvisibleError))}return i(e,t),e}(c),t.ActionSelectorMatchesWrongNodeTypeError=function(t){function e(n){s(this,e);var o=r(this,t.call(this,u["default"].actionSelectorMatchesWrongNodeTypeError));return o.nodeDescription=n,o}return i(e,t),e}(c),t.ActionAdditionalElementNotFoundError=function(t){function e(n){s(this,e);var o=r(this,t.call(this,u["default"].actionAdditionalElementNotFoundError));return o.argumentName=n,o}return i(e,t),e}(c),t.ActionAdditionalElementIsInvisibleError=function(t){function e(n){s(this,e);var o=r(this,t.call(this,u["default"].actionAdditionalElementIsInvisibleError));return o.argumentName=n,o}return i(e,t),e}(c),t.ActionAdditionalSelectorMatchesWrongNodeTypeError=function(t){function e(n,o){s(this,e);var i=r(this,t.call(this,u["default"].actionAdditionalSelectorMatchesWrongNodeTypeError));return i.argumentName=n,i.nodeDescription=o,i}return i(e,t),e}(c),t.ActionElementNonEditableError=function(t){function e(){return s(this,e),r(this,t.call(this,u["default"].actionElementNonEditableError))}return i(e,t),e}(c),t.ActionElementNotTextAreaError=function(t){function e(){return s(this,e),r(this,t.call(this,u["default"].actionElementNotTextAreaError))}return i(e,t),e}(c),t.ActionElementNonContentEditableError=function(t){function e(n){s(this,e);var o=r(this,t.call(this,u["default"].actionElementNonContentEditableError));return o.argumentName=n,o}return i(e,t),e}(c),t.ActionRootContainerNotFoundError=function(t){function e(){return s(this,e),r(this,t.call(this,u["default"].actionRootContainerNotFoundError))}return i(e,t),e}(c),t.ActionIncorrectKeysError=function(t){function e(n){s(this,e);var o=r(this,t.call(this,u["default"].actionIncorrectKeysError));return o.argumentName=n,o}return i(e,t),e}(c),t.ActionCanNotFindFileToUploadError=function(t){function e(n){s(this,e);var o=r(this,t.call(this,u["default"].actionCanNotFindFileToUploadError));return o.filePaths=n,o}return i(e,t),e}(c),t.ActionElementIsNotFileInputError=function(t){function e(){return s(this,e),r(this,t.call(this,u["default"].actionElementIsNotFileInputError))}return i(e,t),e}(c),t.WindowDimensionsOverflowError=function(t){function e(n){s(this,e);var o=r(this,t.call(this,u["default"].windowDimensionsOverflowError));return o.callsite=n,o}return i(e,t),e}(c),t.RoleSwitchInRoleInitializerError=function(t){function e(n){s(this,e);var o=r(this,t.call(this,u["default"].roleSwitchInRoleInitializerError));return o.callsite=n,o}return i(e,t),e}(c),t.ActionElementNotIframeError=function(t){function e(){return s(this,e),r(this,t.call(this,u["default"].actionElementNotIframeError))}return i(e,t),e}(c),t.ActionIframeIsNotLoadedError=function(t){function e(){return s(this,e),r(this,t.call(this,u["default"].actionIframeIsNotLoadedError))}return i(e,t),e}(c),t.CurrentIframeIsNotLoadedError=function(t){function e(){return s(this,e),r(this,t.call(this,u["default"].currentIframeIsNotLoadedError))}return i(e,t),e}(c),t.CurrentIframeNotFoundError=function(t){function e(){return s(this,e),r(this,t.call(this,u["default"].currentIframeNotFoundError))}return i(e,t),e}(c),t.CurrentIframeIsInvisibleError=function(t){function e(){return s(this,e),r(this,t.call(this,u["default"].currentIframeIsInvisibleError))}return i(e,t),e}(c),t.NativeDialogNotHandledError=function(t){function e(n,o){s(this,e);var i=r(this,t.call(this,u["default"].nativeDialogNotHandledError));return i.dialogType=n,i.pageUrl=o,i}return i(e,t),e}(c),t.UncaughtErrorInNativeDialogHandler=function(t){function e(n,o,i){s(this,e);var l=r(this,t.call(this,u["default"].uncaughtErrorInNativeDialogHandler));return l.dialogType=n,l.errMsg=o,l.pageUrl=i,l}return i(e,t),e}(c),t.SetNativeDialogHandlerCodeWrongTypeError=function(t){function e(n){s(this,e);var o=r(this,t.call(this,u["default"].setNativeDialogHandlerCodeWrongTypeError));return o.actualType=n,o}return i(e,t),e}(c)},"type.js":function(t,e,n){t.__esModule=!0,t["default"]={uncaughtErrorOnPage:"uncaughtErrorOnPage",uncaughtErrorInTestCode:"uncaughtErrorInTestCode",uncaughtNonErrorObjectInTestCode:"uncaughtNonErrorObjectInTestCode",uncaughtErrorInClientFunctionCode:"uncaughtErrorInClientFunctionCode",uncaughtErrorInCustomDOMPropertyCode:"uncaughtErrorInCustomDOMPropertyCode",missingAwaitError:"missingAwaitError",actionIntegerOptionError:"actionIntegerOptionError",actionPositiveIntegerOptionError:"actionPositiveIntegerOptionError",actionBooleanOptionError:"actionBooleanOptionError",actionSpeedOptionError:"actionSpeedOptionError",actionOptionsTypeError:"actionOptionsTypeError",actionStringArgumentError:"actionStringArgumentError",actionStringOrStringArrayArgumentError:"actionStringOrStringArrayArgumentError",actionStringArrayElementError:"actionStringArrayElementError",actionIntegerArgumentError:"actionIntegerArgumentError",actionRoleArgumentError:"actionRoleArgumentError",actionPositiveIntegerArgumentError:"actionPositiveIntegerArgumentError",actionSelectorError:"actionSelectorError",actionElementNotFoundError:"actionElementNotFoundError",actionElementIsInvisibleError:"actionElementIsInvisibleError",actionSelectorMatchesWrongNodeTypeError:"actionSelectorMatchesWrongNodeTypeError",actionAdditionalElementNotFoundError:"actionAdditionalElementNotFoundError",actionAdditionalElementIsInvisibleError:"actionAdditionalElementIsInvisibleError",actionAdditionalSelectorMatchesWrongNodeTypeError:"actionAdditionalSelectorMatchesWrongNodeTypeError",actionElementNonEditableError:"actionElementNonEditableError",actionElementNotTextAreaError:"actionElementNotTextAreaError",actionElementNonContentEditableError:"actionElementNonContentEditableError",actionElementIsNotFileInputError:"actionElementIsNotFileInputError",actionRootContainerNotFoundError:"actionRootContainerNotFoundError",actionIncorrectKeysError:"actionIncorrectKeysError",actionCanNotFindFileToUploadError:"actionCanNotFindFileToUploadError",actionUnsupportedDeviceTypeError:"actionUnsupportedDeviceTypeError",actionIframeIsNotLoadedError:"actionIframeIsNotLoadedError",actionElementNotIframeError:"actionElementNotIframeError",currentIframeIsNotLoadedError:"currentIframeIsNotLoadedError",currentIframeNotFoundError:"currentIframeNotFoundError",currentIframeIsInvisibleError:"currentIframeIsInvisibleError",nativeDialogNotHandledError:"nativeDialogNotHandledError",uncaughtErrorInNativeDialogHandler:"uncaughtErrorInNativeDialogHandler",setTestSpeedArgumentError:"setTestSpeedArgumentError",setNativeDialogHandlerCodeWrongTypeError:"setNativeDialogHandlerCodeWrongTypeError",clientFunctionExecutionInterruptionError:"clientFunctionExecutionInterruptionError",domNodeClientFunctionResultError:"domNodeClientFunctionResultError",invalidSelectorResultError:"invalidSelectorResultError",cantObtainInfoForElementSpecifiedBySelectorError:"cantObtainInfoForElementSpecifiedBySelectorError",externalAssertionLibraryError:"externalAssertionLibraryError",pageLoadError:"pageLoadError",windowDimensionsOverflowError:"windowDimensionsOverflowError",roleSwitchInRoleInitializerError:"roleSwitchInRoleInitializerError",assertionExecutableArgumentError:"assertionExecutableArgumentError"},e.exports=t["default"]}}},"test-run":{commands:{"options.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}t.__esModule=!0,t.AssertionOptions=t.ResizeToFitDeviceOptions=t.DragToElementOptions=t.TypeOptions=t.MoveOptions=t.ClickOptions=t.MouseOptions=t.OffsetOptions=t.ActionOptions=t.speedOption=t.booleanOption=t.positiveIntegerOption=t.integerOption=void 0;var l=n("../../utils/assignable"),a=o(l),u=n("./validations/factories"),c=n("../../errors/test-run"),f=t.integerOption=(0,u.createIntegerValidator)(c.ActionIntegerOptionError),d=t.positiveIntegerOption=(0,u.createPositiveIntegerValidator)(c.ActionPositiveIntegerOptionError),h=t.booleanOption=(0,u.createBooleanValidator)(c.ActionBooleanOptionError),p=t.speedOption=(0,u.createSpeedValidator)(c.ActionSpeedOptionError),m=t.ActionOptions=function(t){function e(n,o){r(this,e);var s=i(this,t.call(this));return s.speed=null,s._assignFrom(n,o),s}return s(e,t),e.prototype._getAssignableProperties=function(){return[{name:"speed",type:p}]},e}(a["default"]),g=t.OffsetOptions=function(t){function e(n,o){r(this,e);var s=i(this,t.call(this));return s.offsetX=null,s.offsetY=null,s._assignFrom(n,o),s}return s(e,t),e.prototype._getAssignableProperties=function(){return t.prototype._getAssignableProperties.call(this).concat([{name:"offsetX",type:f},{name:"offsetY",type:f}])},e}(m),E=t.MouseOptions=function(t){function e(n,o){r(this,e);var s=i(this,t.call(this));return s.modifiers={ctrl:!1,alt:!1,shift:!1,meta:!1},s._assignFrom(n,o),s}return s(e,t),e.prototype._getAssignableProperties=function(){return t.prototype._getAssignableProperties.call(this).concat([{name:"modifiers.ctrl",type:h},{name:"modifiers.alt",type:h},{name:"modifiers.shift",type:h},{name:"modifiers.meta",type:h}])},e}(g),v=t.ClickOptions=function(t){function e(n,o){r(this,e);var s=i(this,t.call(this));return s.caretPos=null,s._assignFrom(n,o),s}return s(e,t),e.prototype._getAssignableProperties=function(){return t.prototype._getAssignableProperties.call(this).concat([{name:"caretPos",type:d}])},e}(E);t.MoveOptions=function(t){function e(n,o){r(this,e);var s=i(this,t.call(this));return s.speed=null,s.minMovingTime=null,s.holdLeftButton=!1,s.skipScrolling=!1,s._assignFrom(n,o),s}return s(e,t),e.prototype._getAssignableProperties=function(){return t.prototype._getAssignableProperties.call(this).concat([{name:"speed"},{name:"minMovingTime"},{name:"holdLeftButton"},{name:"skipScrolling",type:h}])},e}(E),t.TypeOptions=function(t){function e(n,o){r(this,e);var s=i(this,t.call(this));return s.replace=!1,s.paste=!1,s._assignFrom(n,o),s}return s(e,t),e.prototype._getAssignableProperties=function(){return t.prototype._getAssignableProperties.call(this).concat([{name:"replace",type:h},{name:"paste",type:h}])},e}(v),t.DragToElementOptions=function(t){function e(n,o){r(this,e);var s=i(this,t.call(this,n,o));return s.destinationOffsetX=null,s.destinationOffsetY=null,s._assignFrom(n,o),s}return s(e,t),e.prototype._getAssignableProperties=function(){return t.prototype._getAssignableProperties.call(this).concat([{name:"destinationOffsetX",type:f},{name:"destinationOffsetY",type:f}])},e}(E),t.ResizeToFitDeviceOptions=function(t){function e(n,o){r(this,e);var s=i(this,t.call(this));return s.portraitOrientation=!1,s._assignFrom(n,o),s}return s(e,t),e.prototype._getAssignableProperties=function(){return[{name:"portraitOrientation",type:h}]},e}(a["default"]),t.AssertionOptions=function(t){function e(n,o){r(this,e);var s=i(this,t.call(this));return s.timeout=null,s._assignFrom(n,o),s}return s(e,t),e.prototype._getAssignableProperties=function(){return[{name:"timeout",type:d}]},e}(a["default"])},validations:{"factories.js":function(t,e,n){function o(t){return function(e,n){var o="undefined"==typeof n?"undefined":l(n);if("number"!==o)throw new t(e,o);var r=!isNaN(n)&&isFinite(n)&&n===Math.floor(n);if(!r)throw new t(e,n)}}function r(t){var e=o(t);return function(n,o){if(e(n,o),o<0)throw new t(n,o)}}function i(t){return function(e,n){var o="undefined"==typeof n?"undefined":l(n);if("boolean"!==o)throw new t(e,o)}}function s(t){return function(e,n){var o="undefined"==typeof n?"undefined":l(n);if("number"!==o)throw new t(e,o);if(isNaN(n)||n<.01||n>1)throw new t(e,n)}}t.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.createIntegerValidator=o,t.createPositiveIntegerValidator=r,t.createBooleanValidator=i,t.createSpeedValidator=s}}}},utils:{"assignable.js":function(t,e,n){function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=function(){function t(){o(this,t)}return t.prototype._getAssignableProperties=function(){throw new Error("Not implemented")},t.prototype._assignFrom=function(t,e){if(t)for(var n=this._getAssignableProperties(),o=0;o<n.length;o++){for(var r=n[o],i=r.name,s=r.type,l=r.required,a=r.init,u=i.split("."),c=u.length-1,f=u[c],d=t,h=this,p=0;p<c&&d&&h;p++)d=d[u[p]],h=h[u[p]];if(d&&h){var m=d[f];(void 0!==m||l)&&(e&&s&&s(i,m),h[f]=a?a(i,m):m)}}},t}();t["default"]=r,e.exports=t["default"]}}}}})("testcafe-phoenix/src/client/automation/index")}t(window)}();