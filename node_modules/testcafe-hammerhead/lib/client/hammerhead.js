!function(){function initHammerheadClient(window,isIframeWithoutSrc){var document=window.document;!function(e){"use strict";var t,n,r,o,i,s={".js":[],".json":[],".css":[],".html":[]},a="function"==typeof require?require:null;return o=function(e){var t=new Error("Could not find module '"+e+"'");return t.code="MODULE_NOT_FOUND",t},i=function(e,t,n){var r,o;if("function"==typeof e[t+n])return t+n;for(r=0;o=s[n][r];++r)if("function"==typeof e[t+o])return t+o;return null},t=function(e,r,s,a,l,u){var c,p,d,f,h,m;for(s=s.split(/[\\\/]/),c=s.pop(),"."!==c&&".."!==c||(s.push(c),c="");null!=(p=s.shift());)if(p&&"."!==p&&(".."===p?(e=r.pop(),u=u.slice(0,u.lastIndexOf("/"))):(r.push(e),e=e[p],u+="/"+p),!e))throw o(a);if(c&&"function"!=typeof e[c]&&(m=i(e,c,".js"),m||(m=i(e,c,".json")),m||(m=i(e,c,".css")),m||(m=i(e,c,".html")),m?c=m:2!==l&&"object"==typeof e[c]&&(r.push(e),e=e[c],u+="/"+c,c="")),!c)return 1!==l&&e[":mainpath:"]?t(e,r,e[":mainpath:"],a,1,u):t(e,r,"index",a,2,u);if(h=e[c],!h)throw o(a);return h.hasOwnProperty("module")?h.module.exports:(d={},h.module=f={exports:d,id:u+"/"+c},h.call(d,d,f,n(e,r,u)),f.exports)},r=function(n,r,i,s){var l,u=i,c=i.charAt(0),p=0;if("/"===c){if(u=u.slice(1),n=e["/"],!n){if(a)return a(i);throw o(i)}s="/",r=[]}else if("."!==c){if(l=u.split("/",1)[0],n=e[l],!n){if(a)return a(i);throw o(i)}s=l,r=[],u=u.slice(l.length+1),u||(u=n[":mainpath:"],u?p=1:(u="index",p=2))}return t(n,r,u,i,p,s)},(n=function(e,t,n){return function(o){return r(e,[].concat(t),o,n)}})(e,[],"")}({bowser:{":mainpath:":"./src/bowser.js",src:{"bowser.js":function(e,t,n){!function(e,n,r){"undefined"!=typeof t&&t.exports?t.exports=r():"function"==typeof define&&define.amd?define(n,r):e[n]=r()}(void 0,"bowser",function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function n(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var r,o=t(/(ipod|iphone|ipad)/i).toLowerCase(),i=/like android/i.test(e),a=!i&&/android/i.test(e),l=/nexus\s*[0-6]\s*/i.test(e),u=!l&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),p=/silk/i.test(e),d=/sailfish/i.test(e),f=/tizen/i.test(e),h=/(web|hpw)os/i.test(e),m=/windows phone/i.test(e),y=(/SamsungBrowser/i.test(e),!m&&/windows/i.test(e)),g=!o&&!p&&/macintosh/i.test(e),v=!a&&!d&&!f&&!h&&/linux/i.test(e),E=t(/edge\/(\d+(\.\d+)?)/i),b=t(/version\/(\d+(\.\d+)?)/i),S=/tablet/i.test(e),w=!S&&/[^-]mobi/i.test(e),_=/xbox/i.test(e);/opera/i.test(e)?r={name:"Opera",opera:s,version:b||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(e)?r={name:"Opera",opera:s,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||b}:/SamsungBrowser/i.test(e)?r={name:"Samsung Internet for Android",samsungBrowser:s,version:b||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?r={name:"Opera Coast",coast:s,version:b||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?r={name:"Yandex Browser",yandexbrowser:s,version:b||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?r={name:"UC Browser",ucbrowser:s,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?r={name:"Maxthon",maxthon:s,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?r={name:"Epiphany",epiphany:s,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?r={name:"Puffin",puffin:s,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?r={name:"Sleipnir",sleipnir:s,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?r={name:"K-Meleon",kMeleon:s,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(r={name:"Windows Phone",windowsphone:s},E?(r.msedge=s,r.version=E):(r.msie=s,r.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?r={name:"Internet Explorer",msie:s,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?r={name:"Chrome",chromeos:s,chromeBook:s,chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?r={name:"Microsoft Edge",msedge:s,version:E}:/vivaldi/i.test(e)?r={name:"Vivaldi",vivaldi:s,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||b}:d?r={name:"Sailfish",sailfish:s,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?r={name:"SeaMonkey",seamonkey:s,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(r={name:"Firefox",firefox:s,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(r.firefoxos=s)):p?r={name:"Amazon Silk",silk:s,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?r={name:"PhantomJS",phantom:s,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?r={name:"SlimerJS",slimer:s,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?r={name:"BlackBerry",blackberry:s,version:b||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:h?(r={name:"WebOS",webos:s,version:b||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(r.touchpad=s)):/bada/i.test(e)?r={name:"Bada",bada:s,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:f?r={name:"Tizen",tizen:s,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(e)?r={name:"QupZilla",qupzilla:s,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(e)?r={name:"Chromium",chromium:s,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(e)?r={name:"Chrome",chrome:s,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?r={name:"Android",version:b}:/safari|applewebkit/i.test(e)?(r={name:"Safari",safari:s},b&&(r.version=b)):o?(r={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},b&&(r.version=b)):r=/googlebot/i.test(e)?{name:"Googlebot",googlebot:s,version:t(/googlebot\/(\d+(\.\d+))/i)||b}:{name:t(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(r.name=r.name||"Blink",r.blink=s):(r.name=r.name||"Webkit",r.webkit=s),!r.version&&b&&(r.version=b)):!r.opera&&/gecko\//i.test(e)&&(r.name=r.name||"Gecko",r.gecko=s,r.version=r.version||t(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||r.msedge||!a&&!r.silk?r.windowsphone||r.msedge||!o?g?r.mac=s:_?r.xbox=s:y?r.windows=s:v&&(r.linux=s):(r[o]=s,r.ios=s):r.android=s;var x="";r.windowsphone?x=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o?(x=t(/os (\d+([_\s]\d+)*) like mac os x/i),x=x.replace(/[_\s]/g,".")):a?x=t(/android[ \/-](\d+(\.\d+)*)/i):r.webos?x=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?x=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?x=t(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(x=t(/tizen[\/\s](\d+(\.\d+)*)/i)),x&&(r.osversion=x);var T=x.split(".")[0];return S||u||"ipad"==o||a&&(3==T||T>=4&&!w)||r.silk?r.tablet=s:(w||"iphone"==o||"ipod"==o||a||l||r.blackberry||r.webos||r.bada)&&(r.mobile=s),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.vivaldi&&r.version>=1||r.chrome&&r.version>=20||r.samsungBrowser&&r.version>=4||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1||r.chromium&&r.version>=20?r.a=s:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=s:r.x=s,r}function t(e){return e.split(".").length}function n(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function r(e){for(var r=Math.max(t(e[0]),t(e[1])),o=n(e,function(e){var o=r-t(e);return e+=new Array(o+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--r>=0;){if(o[0][r]>o[1][r])return 1;if(o[0][r]!==o[1][r])return-1;if(0===r)return 0}}function o(t,n,o){var i=a;"string"==typeof n&&(o=n,n=void 0),void 0===n&&(n=!1),o&&(i=e(o));var s=""+i.version;for(var l in t)if(t.hasOwnProperty(l)&&i[l]){if("string"!=typeof t[l])throw new Error("Browser version in the minVersion map should be a string: "+l+": "+String(t));return r([s,t[l]])<0}return n}function i(e,t,n){return!o(e,t,n)}var s=!0,a=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return a.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in a)return!0}return!1},a.isUnsupportedBrowser=o,a.compareVersions=r,a.check=i,a._detect=e,a})}}},pinkie:{"index.js":function(e,t,n){function r(){for(var e=0;e<w.length;e++)w[e][0](w[e][1]);w=[],m=!1}function o(e,t){w.push([e,t]),m||(m=!0,S(r,0))}function i(e,t){function n(e){l(t,e)}function r(e){c(t,e)}try{e(n,r)}catch(o){r(o)}}function s(e){var t=e.owner,n=t._state,r=t._data,o=e[n],i=e.then;if("function"==typeof o){n=v;try{r=o(r)}catch(s){c(i,s)}}a(i,r)||(n===v&&l(i,r),n===E&&c(i,r))}function a(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var r=t.then;if("function"==typeof r)return r.call(t,function(r){n||(n=!0,t!==r?l(e,r):u(e,r))},function(t){n||(n=!0,c(e,t))}),!0}}catch(o){return n||c(e,o),!0}return!1}function l(e,t){e!==t&&a(e,t)||u(e,t)}function u(e,t){e._state===y&&(e._state=g,e._data=t,o(d,e))}function c(e,t){e._state===y&&(e._state=g,e._data=t,o(f,e))}function p(e){e._then=e._then.forEach(s)}function d(e){e._state=v,p(e)}function f(e){e._state=E,p(e)}function h(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof h==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],i(e,this)}var m,y="pending",g="settled",v="fulfilled",E="rejected",b=function(){},S="undefined"!=typeof setImmediate?setImmediate:setTimeout,w=[];h.prototype={constructor:h,_state:y,_then:null,_data:void 0,then:function(e,t){var n={owner:this,then:new this.constructor(b),fulfilled:e,rejected:t};return this._state===v||this._state===E?o(s,n):this._then.push(n),n.then},"catch":function(e){return this.then(null,e)}},h.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new h(function(t,n){function r(e){return s++,function(n){i[e]=n,--s||t(i)}}for(var o,i=[],s=0,a=0;a<e.length;a++)o=e[a],o&&"function"==typeof o.then?o.then(r(a),n):i[a]=o;s||t(i)})},h.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new h(function(t,n){for(var r,o=0;o<e.length;o++)r=e[o],r&&"function"==typeof r.then?r.then(t,n):t(r)})},h.resolve=function(e){return e&&"object"==typeof e&&e.constructor===h?e:new h(function(t){t(e)})},h.reject=function(e){return new h(function(t,n){n(e)})},t.exports=h}},"testcafe-hammerhead":{src:{client:{"dom-processor":{"client-dom-adapter.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("../../processing/dom/internal-properties"),u=o(l),c=n("../utils/event-emitter"),p=o(c),d=n("../../processing/dom/base-dom-adapter"),f=o(d),h=n("../sandbox/native-methods"),m=o(h),y=n("../settings"),g=o(y),v=n("../utils/destination-location"),E=n("../utils/url"),b=n("../utils/dom"),S=r(b),w=n("../utils/fast-apply"),_=o(w),x=n("../sandbox/node/document/writer"),T=function(e){function t(){return i(this,t),s(this,e.apply(this,arguments))}return a(t,e),t.prototype.removeAttr=function(e,t){return m["default"].removeAttribute.call(e,t)},t.prototype.getAttr=function(e,t){return m["default"].getAttribute.call(e,t)},t.prototype.hasAttr=function(e,t){return e.hasAttribute(t)},t.prototype.isSVGElement=function(e){return S.isSVGElement(e)},t.prototype.getClassName=function(e){return e.className},t.prototype.hasEventHandler=function(e){for(var t=0,n=e.attributes;t<n.length;t++){var r=n[t];if(this.EVENTS.indexOf(r))return!0}return!1},t.prototype.getTagName=function(e){return S.getTagName(e)},t.prototype.setAttr=function(e,t,n){return m["default"].setAttribute.call(e,t,n)},t.prototype.setScriptContent=function(e,t){e.text=t},t.prototype.getScriptContent=function(e){return e.text},t.prototype.getStyleContent=function(e){return e.innerHTML},t.prototype.setStyleContent=function(e,t){e.innerHTML=t},t.prototype.needToProcessContent=function(e){return!(0,x.hasUnclosedElementFlag)(e)},t.prototype.needToProcessUrl=function(){return!0},t.prototype.hasIframeParent=function(e){try{return e[u["default"].processedContext]?window.top!==e[u["default"].processedContext]:window.top.document!==S.findDocument(e)}catch(t){return!0}},t.prototype.attachEventEmitter=function(e){var t=new p["default"];e.on=function(e,n){return t.on(e,n)},e.off=function(e,n){return t.off(e,n)},e.emit=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,_["default"])(t,"emit",n)}},t.prototype.getCrossDomainPort=function(){return g["default"].get().crossDomainProxyPort},t.prototype.getProxyUrl=function(){return E.getProxyUrl.apply(null,arguments)},t.prototype.isTopParentIframe=function(e){var t=e[u["default"].processedContext];return t&&window.top===t.parent},t.prototype.sameOriginCheck=function(e,t){return(0,v.sameOriginCheck)(e,t)},t}(f["default"]);e["default"]=T,t.exports=e["default"]},"index.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=n("./client-dom-adapter"),i=r(o),s=n("../../processing/dom/index"),a=r(s);e["default"]=new a["default"](new i["default"]),t.exports=e["default"]}},"index.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n("pinkie"),a=o(s),l=n("./sandbox"),u=o(l),c=n("./sandbox/code-instrumentation"),p=o(c),d=n("./utils/event-emitter"),f=o(d),h=n("./sandbox/xhr"),m=o(h),y=n("./settings"),g=o(y),v=n("./transport"),E=o(v),b=n("./json"),S=r(b),w=n("./utils/browser"),_=r(w),x=n("./utils/dom"),T=r(x),C=n("./utils/event"),A=r(C),I=n("./utils/types"),P=r(I),N=n("./utils/position"),M=r(N),O=n("./utils/style"),j=r(O),k=n("../utils/string-trim"),L=o(k),R=n("../utils/url"),D=n("./utils/url"),U=r(D),F=n("./utils/feature-detection"),B=r(F),H=n("./utils/html"),V=r(H),W=n("./sandbox/native-methods"),q=o(W),G=n("../processing/script"),X=n("../processing/script/header"),K=n("../processing/style"),$=n("./utils/is-jquery-object"),z=o($),Y=n("./utils/extend"),Q=o(Y),J=n("../processing/dom/internal-properties"),Z=o(J),ee=n("./page-navigation-watch"),te=o(ee),ne=function(){function e(){var t=this;i(this,e),this.win=null,this.sandbox=new u["default"],this.pageNavigationWatch=new te["default"](this.sandbox.event,this.sandbox.codeInstrumentation,this.sandbox.node.element),this.EVENTS={beforeFormSubmit:this.sandbox.node.element.BEFORE_FORM_SUBMIT_EVENT,beforeBeforeUnload:this.sandbox.event.unload.BEFORE_BEFORE_UNLOAD_EVENT,beforeUnload:this.sandbox.event.unload.BEFORE_UNLOAD_EVENT,unload:this.sandbox.event.unload.UNLOAD_EVENT,bodyCreated:this.sandbox.node.mutation.BODY_CREATED_EVENT,documentCleaned:this.sandbox.node.mutation.DOCUMENT_CLEANED_EVENT,uncaughtJsError:this.sandbox.node.win.UNCAUGHT_JS_ERROR_EVENT,unhandledRejection:this.sandbox.node.win.UNHANDLED_REJECTION_EVENT,startFileUploading:this.sandbox.upload.START_FILE_UPLOADING_EVENT,endFileUploading:this.sandbox.upload.END_FILE_UPLOADING_EVENT,evalIframeScript:this.sandbox.iframe.EVAL_EXTERNAL_SCRIPT_EVENT,xhrCompleted:this.sandbox.xhr.XHR_COMPLETED_EVENT,xhrError:this.sandbox.xhr.XHR_ERROR_EVENT,beforeXhrSend:this.sandbox.xhr.BEFORE_XHR_SEND_EVENT,fetchSent:this.sandbox.fetch.FETCH_REQUEST_SENT_EVENT,pageNavigationTriggered:this.pageNavigationWatch.PAGE_NAVIGATION_TRIGGERED_EVENT,scriptElementAdded:this.sandbox.node.element.SCRIPT_ELEMENT_ADDED_EVENT,consoleMethCalled:this.sandbox.console.CONSOLE_METH_CALLED_EVENT},this.PROCESSING_COMMENTS={stylesheetStart:K.STYLESHEET_PROCESSING_START_COMMENT,stylesheetEnd:K.STYLESHEET_PROCESSING_END_COMMENT,scriptStart:X.SCRIPT_PROCESSING_START_COMMENT,scriptEndHeader:X.SCRIPT_PROCESSING_END_HEADER_COMMENT,scriptEnd:X.SCRIPT_PROCESSING_END_COMMENT},this.EventEmitter=f["default"],this.getOriginElementAttributes=p["default"].getAttributesProperty,this.doUpload=function(e,n){return t.sandbox.upload.doUpload(e,n)},this.createNativeXHR=m["default"].createNativeXHR,this.processScript=G.processScript,this.get=n,this.Promise=a["default"],this.json=S,this.transport=E["default"],this.nativeMethods=this.sandbox.nativeMethods,this.shadowUI=this.sandbox.shadowUI,this.storages=this.sandbox.storageSandbox,this.eventSandbox={listeners:this.sandbox.event.listeners,hover:this.sandbox.event.hover,focusBlur:this.sandbox.event.focusBlur,elementEditingWatcher:this.sandbox.event.elementEditingWatcher,eventSimulator:this.sandbox.event.eventSimulator,selection:this.sandbox.event.selection,message:this.sandbox.event.message,timers:this.sandbox.event.timers,DataTransfer:this.sandbox.event.DataTransfer,DragDataStore:this.sandbox.event.DragDataStore},this.utils={browser:_,dom:T,event:A,position:M,style:j,types:P,trim:L["default"],isJQueryObj:z["default"],extend:Q["default"],html:V,url:U,featureDetection:B}}return e.prototype._getEventOwner=function(e){switch(e){case this.EVENTS.pageNavigationTriggered:return this.pageNavigationWatch;case this.EVENTS.beforeUnload:case this.EVENTS.beforeBeforeUnload:case this.EVENTS.unload:return this.sandbox.event.unload;case this.EVENTS.bodyCreated:case this.EVENTS.documentCleaned:return this.sandbox.node.mutation;case this.EVENTS.uncaughtJsError:case this.EVENTS.unhandledRejection:return this.sandbox.node.win;case this.EVENTS.startFileUploading:case this.EVENTS.endFileUploading:return this.sandbox.upload;case this.EVENTS.evalIframeScript:return this.sandbox.iframe;case this.EVENTS.xhrCompleted:case this.EVENTS.xhrError:case this.EVENTS.beforeXhrSend:return this.sandbox.xhr;case this.EVENTS.beforeFormSubmit:case this.EVENTS.scriptElementAdded:return this.sandbox.node.element;case this.EVENTS.fetchSent:return this.sandbox.fetch;case this.EVENTS.consoleMethCalled:return this.sandbox.console;default:return null}},e._cleanLocalStorageServiceData=function(e,t){t.localStorage.removeItem(e)},e.prototype.on=function(e,t){var n=this._getEventOwner(e);n&&n.on(e,t)},e.prototype.off=function(e,t){var n=this._getEventOwner(e);n&&n.off(e,t)},e.prototype.navigateTo=function(e){var t=null,n=this.win.top!==this.win,r=this.win.location.toString();if(n)t=r;else{var o=(0,R.parseProxyUrl)(r);t=o&&o.destUrl}"about:blank"===t&&(0,R.isRelativeUrl)(e)||(this.win.location=U.getProxyUrl(e))},e.prototype.start=function(t,n){this.win=n||window,t&&(g["default"].set(t),t.isFirstPageLoad&&e._cleanLocalStorageServiceData(t.sessionId,this.win)),this.sandbox.attach(this.win),this.pageNavigationWatch.start()},e}(),re=new ne;q["default"].objectDefineProperty.call(window.Object,window,Z["default"].hammerhead,{value:re,configurable:!0}),e["default"]=re,t.exports=e["default"]},"json.js":function(exports,module,require){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n=void 0,r=void 0,o=void 0,i=void 0,s=gap,a=void 0,l=t[e];if(l&&"object"==typeof l){var u=Object.prototype.toString.apply(l);"[object String]"===u||"[object Number]"===u||"[object Boolean]"===u?l=l.valueOf():"[object Date]"===u&&(l=isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null)}switch(typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(i=l.length,n=0;n<i;n+=1)a[n]=str(n,l)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(o=str(r,l),o&&a.push(quote(r)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}function isDOMNode(e){return"object"==typeof Node?e instanceof Node:"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function isSerializable(e){if(e){if("function"==typeof e||(0,_isJqueryObject2["default"])(e)||isDOMNode(e))return!1;if("object"==typeof e)for(var t in e)if(e.hasOwnProperty(t)&&!isSerializable(e[t]))return!1}return!0}function stringify(e){return gap="",indent="",str("",{"":e})}function parse(text,reviver){function walk(e,t){var n=void 0,r=void 0,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j=void 0;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}exports.__esModule=!0,exports.isSerializable=void 0,exports.stringify=stringify,exports.parse=parse;var _isJqueryObject=require("./utils/is-jquery-object"),_isJqueryObject2=_interopRequireDefault(_isJqueryObject),cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap=void 0,indent=void 0,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};exports.isSerializable=isSerializable},"page-navigation-watch.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("./utils/event-emitter"),u=o(l),c=n("../utils/url"),p=n("./utils/url"),d=n("./utils/dom"),f=n("./sandbox/windows-storage"),h=r(f),m=n("../processing/dom"),y=n("./utils/next-tick"),g=o(y),v=n("./sandbox/native-methods"),E=o(v),b=function(e){function t(n,r,o){i(this,t);var a=s(this,e.call(this));return a.PAGE_NAVIGATION_TRIGGERED_EVENT="hammerhead|event|page-navigation-triggered",a.lastLocationValue=window.location.toString(),a.codeInstrumentation=r,a.eventSandbox=n,a.elementSandbox=o,a}return a(t,e),t.prototype._formWatch=function(e,n){var r=function(e){var n=t._getTargetWindow(e);t._onNavigationTriggeredInWindow(n,e.action)};e.on(e.BEFORE_FORM_SUBMIT_EVENT,function(e){return r(e.form)}),n.listeners.initElementListening(window,["submit"]),n.listeners.addInternalEventListener(window,["submit"],function(e){var t=!1;if((0,d.isFormElement)(e.target)){var o=function(n){t=t||n===e};n.on(n.EVENT_PREVENTED_EVENT,o),(0,g["default"])().then(function(){n.off(n.EVENT_PREVENTED_EVENT,o),e.defaultPrevented||t||r(e.target)})}})},t._getTargetWindow=function(e){var t=E["default"].getAttribute.call(e,(0,m.getStoredAttrName)("target"))||E["default"].getAttribute.call(e,"target")||"_self";switch(t){case"_top":return window.top;case"_parent":return window.parent;case"_self":return window;default:return h.findByName(t)}},t.prototype._linkWatch=function(e){e.listeners.initElementListening(window,["click"]),e.listeners.addInternalEventListener(window,["click"],function(n){var r=(0,d.isAnchorElement)(n.target)?n.target:(0,d.closest)(n.target,"a");if(r&&!(0,d.isShadowUIElement)(r)){var o=!1,i=t._getTargetWindow(r),s=r.href,a=function(e){o=o||e===n};e.on(e.EVENT_PREVENTED_EVENT,a),(0,g["default"])().then(function(){e.off(e.EVENT_PREVENTED_EVENT,a),n.defaultPrevented||o||t._onNavigationTriggeredInWindow(i,s)})}})},t.prototype._locationWatch=function(e){var t=this,n=e.locationAccessorsInstrumentation,r=function(e){return t.onNavigationTriggered(e)};n.on(n.LOCATION_CHANGED_EVENT,r)},t._onNavigationTriggeredInWindow=function(e,t){try{e["%hammerhead%"].pageNavigationWatch.onNavigationTriggered(t)}catch(n){}},t.prototype.onNavigationTriggered=function(e){var t=this.lastLocationValue;this.lastLocationValue=window.location.toString(),e!==t&&("#"===e.charAt(0)||(0,p.isChangedOnlyHash)(t,e))||(0,m.isJsProtocol)(e)||this.emit(this.PAGE_NAVIGATION_TRIGGERED_EVENT,(0,c.parseProxyUrl)(e).destUrl)},t.prototype.start=function(){this._locationWatch(this.codeInstrumentation),this._linkWatch(this.eventSandbox),this._formWatch(this.elementSandbox,this.eventSandbox)},t}(u["default"]);e["default"]=b,t.exports=e["default"]},sandbox:{"backup.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){for(var n=e.length-1;n>=0;n--)try{if(e[n].iframe===t)return e[n]}catch(r){e.splice(n,1)}}function i(e,t){var n=(0,a.getTopSameDomainWindow)(e),r=e!==n?(0,a.getFrameElement)(e):null,i=n[c];i||(i=[],u["default"].objectDefineProperty.call(e.Object,n,c,{value:i}));var s=o(i,r);s?s.sandbox=t:i.push({iframe:r,sandbox:t})}function s(e){var t=(0,a.getTopSameDomainWindow)(e),n=t[c],r=e!==t?e.frameElement:null;if(n){var i=o(n,r);return i?i.sandbox:null}return null}e.__esModule=!0,e.create=i,e.get=s;var a=n("../utils/dom"),l=n("./native-methods"),u=r(l),c="hammerhead|sandbox-backup"},"base.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=n("../utils/event-emitter"),l=r(a),u=n("./native-methods"),c=r(u),p=n("../utils/dom"),d=n("../../processing/dom/internal-properties"),f=r(d),h=function(e){function t(){o(this,t);var n=i(this,e.call(this));return n.window=null,n.nativeMethods=c["default"],n}return s(t,e),t.prototype.isDeactivated=function(){try{if(this.document.body,this.window[f["default"].hammerhead]){var e=(0,p.getFrameElement)(this.window);return e&&!(0,p.isElementInDocument)(e,(0,p.findDocument)(e))}}catch(t){}return!0},t.prototype.attach=function(e,t){this.window=e,this.document=t||e.document},t}(l["default"]);e["default"]=h,t.exports=e["default"]},"code-instrumentation":{"index.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=n("../base"),l=r(a),u=n("./properties"),c=r(u),p=n("./location"),d=r(p),f=n("./methods"),h=r(f),m=n("./storages"),y=r(m),g=n("./properties/attributes"),v=n("../../../processing/script"),E=n("../../../processing/script/instruction"),b=r(E),S=n("../../sandbox/native-methods"),w=r(S),_=n("../../utils/html"),x=function(e){function t(n,r,s,a,l,u){o(this,t);var p=i(this,e.call(this));return p.methodCallInstrumentation=new h["default"](r.message),p.locationAccessorsInstrumentation=new d["default"],p.propertyAccessorsInstrumentation=new c["default"](n,r,s,a,l,u),p.storagesAccessorsInstrumentation=new y["default"](u),p}return s(t,e),t.getAttributesProperty=function(e){return(0,g.getAttributeProperty)(e)},t.getOriginalErrorHandler=function(e){return c["default"].getOriginalErrorHandler(e)},t.prototype.attach=function(t){e.prototype.attach.call(this,t),this.methodCallInstrumentation.attach(t),this.locationAccessorsInstrumentation.attach(t),this.storagesAccessorsInstrumentation.attach(t),this.elementPropertyAccessors=this.propertyAccessorsInstrumentation.attach(t),w["default"].objectDefineProperty.call(t.Object,t,b["default"].getEval,{value:function(e){return e!==t.eval?e:function(t){return"string"==typeof t&&(t=(0,v.processScript)(t)),e(t)}},configurable:!0}),w["default"].objectDefineProperty.call(t.Object,t,b["default"].processScript,{value:function(e,t){if(t){if(e&&e.length&&"string"==typeof e[0]){for(var n=[(0,v.processScript)(e[0],!1)],r=1;r<e.length;r++)n.push(e[r]);return n}}else if("string"==typeof e)return(0,v.processScript)(e,!1);return e},configurable:!0}),w["default"].objectDefineProperty.call(t.Object,t,b["default"].processHtml,{value:function(e,t){return"string"==typeof t&&(t=(0,_.processHtml)("<html><body>"+t+"</body></html>",{processedContext:e})),t},configurable:!0})},t}(l["default"]);e["default"]=x,t.exports=e["default"]},location:{"index.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=n("./wrapper"),l=r(a),u=n("../../base"),c=r(u),p=n("../../../utils/dom"),d=n("../../../../processing/script/instruction"),f=r(d),h=n("../../native-methods"),m=r(h),y="hammerhead|location-wrapper",g=function(e){function t(){o(this,t);var n=i(this,e.call(this));return n.LOCATION_CHANGED_EVENT="hammerhead|event|location-changed",n}return s(t,e),t.isLocationWrapper=function(e){return e instanceof l["default"]},t.getLocationWrapper=function(e){try{return e[y]}catch(t){return e.location}},t.prototype.attach=function(t){
var n=this;e.prototype.attach.call(this,t);var r=new l["default"](t);r.on(r.CHANGED_EVENT,function(e){return n.emit(n.LOCATION_CHANGED_EVENT,e)}),m["default"].objectDefineProperty.call(t.Object,t,y,{value:r,configurable:!0}),m["default"].objectDefineProperty.call(t.Object,t.document,y,{value:r,configurable:!0}),m["default"].objectDefineProperty.call(t.Object,t,f["default"].getLocation,{value:function(e){return(0,p.isLocation)(e)?r:e},configurable:!0}),m["default"].objectDefineProperty.call(t.Object,t,f["default"].setLocation,{value:function(e,t){return(0,p.isLocation)(e)&&"string"==typeof t?(r.href=t,t):null},configurable:!0})},t}(c["default"]);e["default"]=g,t.exports=e["default"]},"wrapper.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){try{return e.location.toString()}catch(t){return}}e.__esModule=!0;var l=n("../../../utils/event-emitter"),u=r(l),c=n("../../../utils/create-property-desc"),p=r(c),d=n("../../../utils/destination-location"),f=n("../../../utils/url"),h=n("../../../../utils/url"),m=n("../../native-methods"),y=r(m),g=n("../../../utils/url-resolver"),v=r(g),E=n("../../../../processing/dom/index"),b=function(e){function t(n){o(this,t);var r=i(this,e.call(this));r.CHANGED_EVENT="hammerhead|location-wrapper|changed";var s=function(e){return r.emit(r.CHANGED_EVENT,e)},l=(0,f.parseProxyUrl)(a(n)),u=l?l.resourceType:"",c=(0,f.parseResourceType)(u);c.isIframe|=n!==n.top;var m=(0,h.getResourceTypeString)({isIframe:c.isIframe,isForm:c.isForm}),g=function(){if(n!==n.top&&"about:blank"===n.location.href)return"about:blank";var e=(0,d.get)(),t=v["default"].getResolverElement(n.document);return t.href=e,(0,h.ensureTrailingSlash)(t.href,e)},b=function(e){if((0,E.isJsProtocol)(e))return(0,E.processJsAttrValue)(e,{isJsProtocol:!0,isEventAttr:!1});var t=a(n),r=null;if(n!==n.parent){var o=a(n.parent),i=(0,f.parseProxyUrl)(o);if(i&&i.proxy){var s=i.proxy.port;r=(0,h.sameOriginCheck)(o,e)?s:(0,f.getCrossDomainProxyPort)(s)}}var l=t&&(0,f.isChangedOnlyHash)(t,e),c=l?u:m;return(0,f.getProxyUrl)(e,{resourceType:c,proxyPort:r})},S=["port","host","hostname","pathname","protocol"];y["default"].objectDefineProperty.call(n.Object,r,"href",(0,p["default"])({get:g,set:function(e){var t=b(e);return n.location.href=t,s(t),e}})),y["default"].objectDefineProperty.call(n.Object,r,"search",(0,p["default"])({get:function(){return n.location.search},set:function(e){var t=(0,f.changeDestUrlPart)(n.location.toString(),"search",e,m);return n.location=t,s(t),e}})),y["default"].objectDefineProperty.call(n.Object,r,"origin",(0,p["default"])({get:function(){return(0,h.getDomain)((0,d.getParsed)())},set:function(e){return e}})),y["default"].objectDefineProperty.call(n.Object,r,"hash",(0,p["default"])({get:function(){return n.location.hash},set:function(e){return n.location.hash=e,e}}));for(var w=function(e){y["default"].objectDefineProperty.call(n.Object,r,e,(0,p["default"])({get:function(){return(0,d.getParsed)()[e]},set:function(t){var r=(0,f.changeDestUrlPart)(n.location.toString(),e,t,m);return n.location=r,s(r),t}}))},_=0;_<S.length;_++){var x=S[_];w(x)}return r.assign=function(e){var t=b(e),r=n.location.assign(t);return s(t),r},r.replace=function(e){var t=b(e),r=n.location.replace(t);return s(t),r},r.reload=function(e){var t=n.location.reload(e);return s(n.location.toString()),t},r.toString=function(){return g()},r}return s(t,e),t}(u["default"]);e["default"]=b,t.exports=e["default"]}},"methods.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("../base"),u=o(l),c=n("../../../processing/script/instruction"),p=o(c),d=n("../../../processing/script/instrumented"),f=n("../../utils/dom"),h=n("../../utils/fast-apply"),m=o(h),y=n("../../utils/types"),g=r(y),v=n("../../utils/url"),E=n("../native-methods"),b=o(E),S=function(e){function t(n){i(this,t);var r=s(this,e.call(this));return r.messageSandbox=n,r.methodWrappers={postMessage:{condition:f.isWindow,method:function(e,t){return n.postMessage(e,t)}},replace:{condition:f.isLocation,method:function(e,n){return e.replace((0,v.getProxyUrl)(n[0],{resourceType:t._getLocationResourceType(e)}))}},assign:{condition:f.isLocation,method:function(e,n){return e.assign((0,v.getProxyUrl)(n[0],{resourceType:t._getLocationResourceType(e)}))}}},r}return a(t,e),t._error=function(e){throw new Error(e)},t._getLocationResourceType=function(e){return window.top.location===e?null:(0,v.stringifyResourceType)({isIframe:!0})},t._isPostMessageFn=function(e,t){return e.postMessage===e.postMessage?e.postMessage===t:t&&"function"==typeof t.toString&&t.toString()===e.postMessage.toString()},t.prototype.attach=function(n){var r=this;e.prototype.attach.call(this,n),b["default"].objectDefineProperty.call(n.Object,n,p["default"].callMethod,{value:function(e,n,o){return g.isNullOrUndefined(e)&&t._error("Cannot call method '"+n+"' of "+g.inaccessibleTypeToStr(e)),"function"!=typeof e[n]&&t._error("'"+n+"' is not a function"),"string"==typeof n&&(0,d.shouldInstrumentMethod)(n)&&r.methodWrappers[n].condition(e)?r.methodWrappers[n].method(e,o):(0,m["default"])(e,n,o)},configurable:!0});var o=this;b["default"].objectDefineProperty.call(n.Object,n,p["default"].getPostMessage,{value:function(e,n){return 1!==arguments.length||(0,f.isWindow)(e)?2!==arguments.length||t._isPostMessageFn(this,n)?function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.messageSandbox.postMessage(this,t)}:n:e.postMessage},configurable:!0})},t}(u["default"]);e["default"]=S,t.exports=e["default"]},properties:{"anchor.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(e.href){var n=(0,a.parseProxyUrl)(e.href);return c.href=n?n.destUrl:e.href,c[t]}return p[t]}function i(e,t,n){if(e.href){var r=(0,a.parseProxyUrl)(e.href);return c.href=r?r.destUrl:e.href,c[t]=n,e.setAttribute("href",c.href),c[t]}return""}function s(){c=null,p=null}e.__esModule=!0,e.getAnchorProperty=o,e.setAnchorProperty=i,e.dispose=s;var a=n("../../../utils/url"),l=n("../../native-methods"),u=r(l),c=u["default"].createElement.call(document,"a"),p=u["default"].createElement.call(document,"a")},"attributes-wrapper.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("../../../utils/dom"),s=n("../../../utils/fn-bind"),a=r(s),l=n("../../native-methods"),u=r(l),c=n("../../../../processing/dom"),p=r(c),d="hammerhead|element-attribute-wrappers-prop",f=["setNamedItem","setNamedItemNS","removeNamedItem","removeNamedItemNS","getNamedItem","getNamedItemNS"],h=function(){function e(t){var n=this;o(this,e),t[d]=t[d]||[],t[d].push(this),e._assignAttributes.call(this,t.attributes),this.item=function(e){return n[e]};var r=function(r){n[r]=function(){for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];var s=t.attributes[r].apply(t.attributes,o);return e.refreshWrappers(t),s}};for(var i in t.attributes)"function"==typeof this[i]&&"item"!==i&&(f.indexOf(i)!==-1?r(i):this[i]=(0,a["default"])(t.attributes[i],t.attributes))}return e._assignAttributes=function(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];if(!(0,i.isHammerheadAttr)(r.name)){var o=e[p["default"].getStoredAttrName(r.name)];if(o){if(p["default"].isAddedAutocompleteAttr(r.name,o.value))continue;r=u["default"].cloneNode.call(r),r.value=o.value,u["default"].objectDefineProperty.call(window.Object,this,r.name,{value:r,configurable:!0})}u["default"].objectDefineProperty.call(window.Object,this,t,{value:r,configurable:!0}),t++}}u["default"].objectDefineProperty.call(window.Object,this,"length",{value:t,configurable:!0})},e._cleanAttributes=function(){if(this.length)for(var e=this.length-1;e>=0;e--)delete this[e]},e.refreshWrappers=function(t){var n=t[d];if(n)for(var r=0;r<n.length;r++)e._cleanAttributes.call(n[r],t.attributes),e._assignAttributes.call(n[r],t.attributes)},e}();e["default"]=h,t.exports=e["default"]},"attributes.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){for(var t=0;t<e.attributes.length;t++)if((0,a.isHammerheadAttr)(e.attributes[t].name))return s["default"].prototype=e.attributes,new s["default"](e);return e.attributes}e.__esModule=!0,e.getAttributesProperty=o;var i=n("./attributes-wrapper"),s=r(i),a=n("../../../utils/dom")},"index.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){for(var t={},n=["innerHTML","outerHTML","innerText","textContent"],r=0;r<n.length;r++){var o=n[r];t[o]=void 0!==e[o]}return t}e.__esModule=!0;var u=n("../../../../processing/dom/internal-properties"),c=o(u),p=n("../../../../request-pipeline/xhr/same-origin-policy"),d=n("../location"),f=o(d),h=n("../location/wrapper"),m=o(h),y=n("../../base"),g=o(y),v=n("../../upload"),E=o(v),b=n("../../shadow-ui"),S=o(b),w=n("../../xhr"),_=o(w),x=n("../../node/element"),T=o(x),C=n("../../../../processing/dom/index"),A=o(C),I=n("../../../utils/destination-location"),P=r(I),N=n("../../../utils/dom"),M=r(N),O=n("../../../utils/types"),j=r(O),k=n("../../../utils/url"),L=r(k),R=n("../../../../utils/url"),D=n("../../../utils/style"),U=n("../../../utils/html"),F=n("./anchor"),B=n("./attributes"),H=n("../../../dom-processor"),V=o(H),W=n("../../../../processing/style"),q=o(W),G=n("../../../../processing/script"),X=n("../../../../processing/script/header"),K=n("../../../../processing/script/instruction"),$=o(K),z=n("../../../../processing/script/instrumented"),Y=n("../../native-methods"),Q=o(Y),J=n("../../../utils/feature-detection"),Z=n("../../node/live-node-list/dom-mutation-tracker"),ee=o(Z),te=l(Q["default"].createElementNS.call(document,"http://www.w3.org/2000/svg","svg")),ne=l(Q["default"].createElement.call(document,"div")),re=function(e){function t(n,r,o,a,l,u){i(this,t);var c=s(this,e.call(this));return c.nodeMutation=n,c.messageSandbox=r.message,c.cookieSandbox=o,c.uploadSandbox=a,c.elementEditingWatcher=r.elementEditingWatcher,c.unloadSandbox=r.unload,c.listenersSandbox=r.listeners,c.shadowUI=l,c.storageSandbox=u,c}return a(t,e),t._error=function(e){throw new Error(e)},t._getUrlAttr=function(e,t){var n=Q["default"].getAttribute.call(e,t);return""===n||null===n&&"action"===t&&J.emptyActionAttrFallbacksToTheLocation?P.get():null===n?"":R.HASH_RE.test(n)?P.withHash(n):L.resolveUrlAsDest(n)},t._getShadowUICollectionLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];M.isShadowUIElement(r)&&t++}return t&&S["default"].checkElementsPosition(e),e.length-t},t._setTextProp=function(e,t,n){var r=null!==n&&void 0!==n?String(n):n;return ee["default"].onChildrenChanged(e),r?M.isScriptElement(e)?e[t]=(0,G.processScript)(r,!0):M.isStyleElement(e)?e[t]=q["default"].process(r,L.getProxyUrl,!0):e[t]=r:e[t]=r,n},t.removeProcessingInstructions=function(e){return e?(e=(0,X.remove)(e),q["default"].cleanUp(e,L.parseProxyUrl)):e},t._elementHasTextProperty=function(e,t){return"string"==typeof e[t]&&(M.isSVGElement(e)?te[t]:ne[t])},t._createForStyleProperty=function(e){return{condition:D.isStyle,get:function(t){return q["default"].cleanUp(t[e],L.parseProxyUrl)},set:function(t,n){return"string"==typeof n?t[e]=q["default"].process(n,L.getProxyUrl):t[e]=n,n}}},t.prototype._createPropertyAccessors=function(e,n){var r=this,o="";return{action:{condition:function(e){return M.isDomElement(e)&&V["default"].isUrlAttr(e,"action")},get:function(e){return M.isDomElement(e.action)?e.action:t._getUrlAttr(e,"action")},set:function(e,t){return e.setAttribute("action",t),t}},activeElement:{condition:M.isDocument,get:function(e){return e.activeElement&&M.isShadowUIElement(e.activeElement)?r.shadowUI.getLastActiveElement()||e.body:e.activeElement},set:function(){}},attributes:{condition:function(t){return M.isDomElement(t)&&t.attributes instanceof e.NamedNodeMap},get:function(e){return(0,B.getAttributesProperty)(e)},set:function(e,t){return t}},autocomplete:{condition:M.isInputElement,get:function(e){return e.getAttribute("autocomplete")||""},set:function(e,t){return e.setAttribute("autocomplete",t),t}},childElementCount:{condition:S["default"].isShadowContainer,get:function(e){return t._getShadowUICollectionLength(e.children)},set:function(){}},cookie:{condition:M.isDocument,get:function(){return r.cookieSandbox.getCookie()},set:function(e,t){return r.cookieSandbox.setCookie(e,String(t),!0)}},data:{condition:function(e){return M.isDomElement(e)&&V["default"].isUrlAttr(e,"data")},get:function(e){return t._getUrlAttr(e,"data")},set:function(e,t){return e.setAttribute("data",t),t}},documentURI:{condition:function(e){return e.documentURI&&M.isDocument(e)},get:function(e){return L.parseProxyUrl(e.documentURI).destUrl},set:function(e){return e}},domain:{condition:M.isDocument,get:function(){return o?o:f["default"].getLocationWrapper(e).hostname},set:function(e,t){return o=t,t}},files:{condition:M.isFileInput,get:function(e){return E["default"].getFiles(e)},set:function(e,t){return t}},firstChild:{condition:S["default"].isShadowContainer,get:function(e){return r.shadowUI.getFirstChild(e)},set:function(){}},firstElementChild:{condition:S["default"].isShadowContainer,get:function(e){return r.shadowUI.getFirstElementChild(e)},set:function(){}},formAction:{condition:function(e){return M.isDomElement(e)&&V["default"].isUrlAttr(e,"formaction")},get:function(e){return t._getUrlAttr(e,"formaction")},set:function(e,t){return e.setAttribute("formaction",t),t}},host:{condition:M.isAnchorElement,get:function(e){return(0,F.getAnchorProperty)(e,"host")},set:function(e,t){return(0,F.setAnchorProperty)(e,"host",t)}},hostname:{condition:M.isAnchorElement,get:function(e){return(0,F.getAnchorProperty)(e,"hostname")},set:function(e,t){return(0,F.setAnchorProperty)(e,"hostname",t)}},href:{condition:function(e){return!!f["default"].isLocationWrapper(e)||(M.isDomElement(e)?V["default"].isUrlAttr(e,"href"):!!(0,D.isStyleSheet)(e))},get:function(e){if(f["default"].isLocationWrapper(e))return e.href;if((0,D.isStyleSheet)(e)){var n=L.parseProxyUrl(e.href);return n?n.destUrl:e.href}return t._getUrlAttr(e,"href")},set:function(e,t){return f["default"].isLocationWrapper(e)?e.href=P.resolveUrl(t,n):(0,D.isStyleSheet)(e)||e.setAttribute("href",t),t}},innerHTML:{condition:function(e){return M.isDomElement(e)&&t._elementHasTextProperty(e,"innerHTML")},get:function(e){return M.isScriptElement(e)?(0,X.remove)(e.innerHTML):M.isStyleElement(e)?q["default"].cleanUp(e.innerHTML,L.parseProxyUrl):(0,U.cleanUpHtml)(e.innerHTML,e.tagName)},set:function(t,n){var o=M.isStyleElement(t),i=M.isScriptElement(t),s=null!==n&&void 0!==n?String(n):n;if(s&&(s=o?q["default"].process(s,L.getProxyUrl,!0):i?(0,G.processScript)(s,!0):(0,U.processHtml)(s,{parentTag:t.tagName})),ee["default"].onChildrenChanged(t),t.innerHTML=s,ee["default"].onChildrenChanged(t),r.document.body===t){var a=r.shadowUI.getRoot();r.shadowUI.markShadowUIContainers(r.document.head,t),S["default"].markElementAndChildrenAsShadow(a)}else M.isShadowUIElement(t)&&S["default"].markElementAndChildrenAsShadow(t);if(o||i)return n;var l=M.findDocument(t),u=l?l.defaultView:null;return u&&u!==e&&u[c["default"].processDomMethodName]?u[c["default"].processDomMethodName](t,l):e[c["default"].processDomMethodName]&&e[c["default"].processDomMethodName](t),e.self&&(M.isHtmlElement(t)||M.isBodyElement(t))&&Q["default"].setTimeout.call(e,function(){return r.nodeMutation.onBodyContentChanged(t)},0),n}},innerText:{condition:function(e){return M.isDomElement(e)&&t._elementHasTextProperty(e,"innerText")},get:function(e){return t.removeProcessingInstructions(e.innerText)},set:function(e,n){return t._setTextProp(e,"innerText",n)}},nextElementSibling:{condition:function(e){return e.nextElementSibling&&M.isDomElement(e)&&M.isDomElement(e.nextElementSibling)},get:function(e){return M.isShadowUIElement(e.nextElementSibling)?null:e.nextElementSibling},set:function(){}},nextSibling:{condition:function(e){return e.nextSibling&&M.isDomElement(e)&&M.isDomElement(e.nextSibling)},get:function(e){return M.isShadowUIElement(e.nextSibling)?null:e.nextSibling},set:function(){}},outerHTML:{condition:function(e){return M.isDomElement(e)&&t._elementHasTextProperty(e,"outerHTML")},get:function(e){return(0,U.cleanUpHtml)(e.outerHTML,e.parentNode&&e.parentNode.tagName)},set:function(t,n){var o=t.parentNode;if(ee["default"].onElementChanged(t),o&&null!==n&&void 0!==n){var i=M.findDocument(o),s=i?i.defaultView:null;return t.outerHTML=(0,U.processHtml)(String(n),{parentTag:o.tagName}),ee["default"].onChildrenChanged(o),s&&s!==e&&s[c["default"].processDomMethodName]?s[c["default"].processDomMethodName](o,i):e[c["default"].processDomMethodName]&&e[c["default"].processDomMethodName](o),e.self&&M.isBodyElement(t)&&Q["default"].setTimeout.call(e,function(){return r.shadowUI.onBodyElementMutation()},0),n}return t.outerHTML=n,n}},onerror:{condition:M.isWindow,get:function(e){return e.onerror},set:function(e,t){return e.onerror=t,r.listenersSandbox.emit(r.listenersSandbox.EVENT_LISTENER_ATTACHED_EVENT,{el:e,listener:t,eventType:"error"}),t}},onunhandledrejection:{condition:function(e){return J.hasUnhandledRejectionEvent&&M.isWindow(e)},get:function(e){return e.onunhandledrejection},set:function(e,t){return e.onunhandledrejection=t,r.listenersSandbox.emit(r.listenersSandbox.EVENT_LISTENER_ATTACHED_EVENT,{el:e,listener:t,eventType:"unhandledrejection"}),t}},lastChild:{condition:S["default"].isShadowContainer,get:function(e){return r.shadowUI.getLastChild(e)},set:function(){}},lastElementChild:{condition:S["default"].isShadowContainer,get:function(e){return r.shadowUI.getLastElementChild(e)},set:function(){}},length:{condition:S["default"].isShadowContainerCollection,get:t._getShadowUICollectionLength,set:function(){}},localStorage:{condition:M.isWindow,get:function(){return r.storageSandbox.localStorage},set:function(){}},location:{condition:function(e){return M.isDocument(e)||M.isWindow(e)},get:function(e){var t=f["default"].getLocationWrapper(e);if(t)return t;var n=M.isWindow(e)?e:e.defaultView;return new m["default"](n)},set:function(e,t){if("string"==typeof t){var n=M.isWindow(e)?e:e.defaultView,r=f["default"].getLocationWrapper(n);return r?r.href=t:e.location=t,t}return e.location}},manifest:{condition:function(e){return M.isDomElement(e)&&V["default"].isUrlAttr(e,"manifest")},get:function(e){return t._getUrlAttr(e,"manifest")},set:function(e,t){return e.setAttribute("manifest",t),t}},onload:{condition:function(e){return M.isDomElement(e)&&M.isImgElement(e)},get:function(e){return e.onload},set:function(e,t){return"function"==typeof t?(T["default"].setHasLoadHandlerFlag(e),e.src&&(e.src=L.getProxyUrl(e.src))):T["default"].removeHasLoadHandlerFlag(e),e.onload=t,e.onload}},origin:{condition:M.isAnchorElement,get:function(e){return void 0!==e.origin?(0,F.getAnchorProperty)(e,"origin"):e.origin},set:function(e,t){return e.origin=t,t}},pathname:{condition:M.isAnchorElement,get:function(e){return(0,F.getAnchorProperty)(e,"pathname")},set:function(e,t){return(0,F.setAnchorProperty)(e,"pathname",t)}},port:{condition:M.isAnchorElement,get:function(e){return(0,F.getAnchorProperty)(e,"port")},set:function(e,t){return(0,F.setAnchorProperty)(e,"port",t)}},protocol:{condition:M.isAnchorElement,get:function(e){return(0,F.getAnchorProperty)(e,"protocol")},set:function(e,t){return(0,F.setAnchorProperty)(e,"protocol",t)}},referrer:{condition:M.isDocument,get:function(e){var t=L.parseProxyUrl(e.referrer);return t?t.destUrl:""},set:function(e,t){return e.referrer=L.getProxyUrl(t),t}},sandbox:{condition:M.isIframeElement,get:function(e){return e.getAttribute("sandbox")},set:function(e,t){return e.setAttribute("sandbox",t),t}},search:{condition:M.isAnchorElement,get:function(e){return(0,F.getAnchorProperty)(e,"search")},set:function(e,t){return(0,F.setAnchorProperty)(e,"search",t)}},sessionStorage:{condition:M.isWindow,get:function(){return r.storageSandbox.sessionStorage},set:function(){}},src:{condition:function(e){return M.isDomElement(e)&&V["default"].isUrlAttr(e,"src")},get:function(e){return t._getUrlAttr(e,"src")},set:function(e,t){return e.setAttribute("src",t),t}},target:{condition:function(e){return M.isDomElement(e)&&A["default"].isTagWithTargetAttr(M.getTagName(e))},get:function(e){return e.target},set:function(e,t){return e.setAttribute("target",t),t}},text:{condition:function(e){return M.isScriptElement(e)||M.isAnchorElement(e)},get:function(e){return t.removeProcessingInstructions(e.text)},set:function(e,n){return t._setTextProp(e,"text",n)}},textContent:{condition:function(e){return M.isDomElement(e)&&t._elementHasTextProperty(e,"textContent")},get:function(e){return t.removeProcessingInstructions(e.textContent)},set:function(e,n){return t._setTextProp(e,"textContent",n)}},URL:{condition:M.isDocument,get:function(e){return f["default"].getLocationWrapper(e).href},set:function(){}},baseURI:{condition:M.isDocument,get:function(e){if(e.baseURI){var t=L.parseProxyUrl(e.baseURI);if(t)return t.destUrl}return e.baseURI},set:function(e,t){var n=e.baseURI=t;return n}},value:{condition:function(e){return M.isDomElement(e)&&(M.isFileInput(e)||M.isTextEditableElementAndEditingAllowed(e)&&!M.isShadowUIElement(e))},get:function(e){return M.isFileInput(e)?E["default"].getUploadElementValue(e):e.value},set:function(e,t){return M.isFileInput(e)?r.uploadSandbox.setUploadElementValue(e,t):(e.value=t,r.elementEditingWatcher.restartWatchingElementEditing(e),t)}},scripts:{condition:M.isDocument,get:function(e){return r.shadowUI._filterNodeList(e.scripts)},set:function(e,t){return e.scripts=t,t}},status:{condition:_["default"].isOpenedXhr,get:function(e){return e.status===p.SAME_ORIGIN_CHECK_FAILED_STATUS_CODE?0:e.status},set:function(e,t){return e.status=t,t}},onbeforeunload:{condition:M.isWindow,get:function(){return r.unloadSandbox.getOnBeforeUnload()},set:function(e,t){return r.unloadSandbox.setOnBeforeUnload(e,t)}},onpagehide:{condition:M.isWindow,get:function(){return r.unloadSandbox.getOnBeforeUnload()},set:function(e,t){return r.unloadSandbox.setOnBeforeUnload(e,t)}},onmessage:{condition:M.isWindow,get:function(){return r.messageSandbox.getOnMessage()},set:function(e,t){return r.messageSandbox.setOnMessage(e,t)}},which:{condition:function(e){return void 0!==e[c["default"].whichPropertyWrapper]||e.originalEvent&&void 0!==e.originalEvent[c["default"].whichPropertyWrapper]},get:function(e){return e.originalEvent?e.originalEvent[c["default"].whichPropertyWrapper]:e[c["default"].whichPropertyWrapper]},set:function(){}},background:t._createForStyleProperty("background"),backgroundImage:t._createForStyleProperty("backgroundImage"),"background-image":t._createForStyleProperty("background-image"),borderImage:t._createForStyleProperty("borderImage"),"border-image":t._createForStyleProperty("border-image"),borderImageSource:t._createForStyleProperty("borderImageSource"),"border-image-source":t._createForStyleProperty("border-image-source"),listStyle:t._createForStyleProperty("listStyle"),"list-style":t._createForStyleProperty("list-style"),listStyleImage:t._createForStyleProperty("listStyleImage"),"list-style-image":t._createForStyleProperty("list-style-image"),cssText:t._createForStyleProperty("cssText"),cursor:t._createForStyleProperty("cursor"),style:{condition:function(e){return M.isDomElement(e)&&(0,D.isStyle)(e.style)},get:function(e){return e.style},set:function(e,t){return e.setAttribute("style",t),t}},styleSheets:{condition:M.isDocument,get:function(e){return r.shadowUI._filterStyleSheetList(e.styleSheets)},set:function(e,t){return e.styleSheets=t,t}},responseURL:{condition:M.isXMLHttpRequest,get:function(e){return e.responseURL?L.parseProxyUrl(e.responseURL).destUrl:e.responseURL},set:function(e,t){return e.responseURL=t,t}}}},t._getSetPropertyInstructionByOwner=function(e,t){try{return e&&e[c["default"].processedContext]&&e[c["default"].processedContext]!==t&&e[c["default"].processedContext][$["default"].setProperty]}catch(n){return null}},t.prototype.attach=function(n){e.prototype.attach.call(this,n);var r=this._createPropertyAccessors(n,n.document);return Q["default"].objectDefineProperty.call(n.Object,n,$["default"].getProperty,{value:function(e,n){return j.isNullOrUndefined(e)&&t._error("Cannot read property '"+n+"' of "+j.inaccessibleTypeToStr(e)),"string"==typeof n&&(0,z.shouldInstrumentProperty)(n)&&r[n].condition(e)?r[n].get(e):e[n]},configurable:!0}),Q["default"].objectDefineProperty.call(n.Object,n,$["default"].setProperty,{value:function(e,o,i){j.isNullOrUndefined(e)&&t._error("Cannot set property '"+o+"' of "+j.inaccessibleTypeToStr(e));var s=t._getSetPropertyInstructionByOwner(e,n);return s?s(e,o,i):"string"==typeof o&&(0,z.shouldInstrumentProperty)(o)&&r[o].condition(e)?r[o].set(e,i):e[o]=i},configurable:!0}),r},t}(g["default"]);e["default"]=re,t.exports=e["default"]}},"storages.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=n("../base"),l=r(a),u=n("../../../processing/script/instruction"),c=r(u),p=n("../native-methods"),d=r(p),f=function(e){function t(n){o(this,t);var r=i(this,e.call(this));return r.storageSandbox=n,r}return s(t,e),t.prototype.attach=function(t){var n=this;e.prototype.attach.call(this,t),d["default"].objectDefineProperty.call(t.Object,t,c["default"].getStorage,{value:function(e){return e===n.window.sessionStorage?(n.storageSandbox.sessionStorage.setContext(t),n.storageSandbox.sessionStorage):e===n.window.localStorage?(n.storageSandbox.localStorage.setContext(t),n.storageSandbox.localStorage):e},configurable:!0})},t}(l["default"]);e["default"]=f,t.exports=e["default"]}},"console.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=n("./base"),l=r(a),u=n("../utils/dom"),c=function(e){function t(n){o(this,t);var r=i(this,e.call(this));return r.CONSOLE_METH_CALLED_EVENT="hammerhead|event|console-meth-called",r.messageSandbox=n,r}return s(t,e),t.prototype._proxyConsoleMeth=function(e){var t=this;this.window.console[e]=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];if(!(0,u.isCrossDomainWindows)(window,window.top)){var i=window!==window.top;i?(t.emit(t.CONSOLE_METH_CALLED_EVENT,{meth:e,args:r,inIframe:!0}),t.messageSandbox.sendServiceMsg({meth:e,args:r,cmd:t.CONSOLE_METH_CALLED_EVENT},window.top)):t.emit(t.CONSOLE_METH_CALLED_EVENT,{meth:e,args:r})}t.nativeMethods.consoleMeths[e].apply(t.nativeMethods.console,r)}},t.prototype.attach=function(t){var n=this;e.prototype.attach.call(this,t),this._proxyConsoleMeth("log"),this._proxyConsoleMeth("info"),this._proxyConsoleMeth("error"),this._proxyConsoleMeth("warn");var r=this.messageSandbox;r.on(r.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message;t.cmd===n.CONSOLE_METH_CALLED_EVENT&&n.emit(n.CONSOLE_METH_CALLED_EVENT,{meth:t.meth,args:t.args})})},t}(l["default"]);e["default"]=c,t.exports=e["default"]},cookie:{"cookie-sync.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("../../sandbox/native-methods"),s=r(i),a=n("../../sandbox/xhr"),l=r(a),u=n("../../settings"),c=r(u),p=n("../../json"),d=2e3,f=3,h=function(){function e(){var t=this;o(this,e),this.useAsyncXhr=!0,this.queue=[],this.sendedQueue=null,this.activeReq=null,this.failedReqCount=0,s["default"].windowAddEventListener.call(window,"beforeunload",function(){return t._beforeUnloadHandler()},!0)}return e.prototype._beforeUnloadHandler=function(){var e=this;this.useAsyncXhr&&(this.useAsyncXhr=!1,this.activeReq&&this.activeReq.abort()),s["default"].setTimeout.call(window,function(){e.useAsyncXhr=!0},d)},e.prototype._onRequestLoad=function(e){204===e.status?(this.sendedQueue=null,this.activeReq=null,this.failedReqCount=0,this.queue.length&&this._sendQueue()):this._onRequestError(e)},e.prototype._onRequestError=function(e){this.activeReq===e&&(this.queue=this.sendedQueue.concat(this.queue),++this.failedReqCount<f&&this._sendQueue())},e.prototype._attachRequestHandlers=function(e){var t=this;e.addEventListener("load",function(){return t._onRequestLoad(e)}),e.addEventListener("abort",function(){return t._onRequestError(e)}),e.addEventListener("error",function(){return t._onRequestError(e)}),e.addEventListener("timeout",function(){return t._onRequestError(e)})},e.prototype._sendQueue=function(){var e=this.useAsyncXhr,t=l["default"].createNativeXHR();l["default"].openNativeXhr(t,c["default"].get().cookieSyncUrl,e),this.sendedQueue=this.queue,this.queue=[],this.activeReq=t,e&&this._attachRequestHandlers(t);try{t.send((0,p.stringify)({sessionId:c["default"].get().sessionId,queue:this.sendedQueue}))}catch(n){return void this._onRequestError(t)}e||this._onRequestLoad(t)},e.prototype.perform=function(e){
this.queue.push(e),this.activeReq||this._sendQueue()},e}();e["default"]=h,t.exports=e["default"]},"index.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("../base"),u=o(l),c=n("../../settings"),p=o(c),d=n("./cookie-sync"),f=o(d),h=n("../../utils/destination-location"),m=r(h),y=n("../../utils/cookie"),g=r(y),v=n("../../utils/dom"),E=n("../../../utils/string-trim"),b=o(E),S=n("../../../processing/dom/internal-properties"),w=o(S),_=n("../../../session/cookie-limit"),x=o(_),T=function(e){function t(){i(this,t);var n=s(this,e.call(this));return n.cookieSync=new f["default"],n}return a(t,e),t.prototype._getSettings=function(){var e=this.window===this.window.top||(0,v.isCrossDomainWindows)(this.window,this.window.top)?p["default"]:this.window.top[w["default"].hammerhead].get("./settings");return e.get()},t._getBrowserProcessedCookie=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);var o=Math.floor(1e10*Math.random())+"|";n.key=o+n.key,n.path&&"/"!==n.path&&(n.path=m.getCookiePathPrefix()+n.path),t.cookie=g.format(n);var i=g.get(t,n.key);if(g.del(t,n),i){var s=""===e.key?o.length+1:o.length;return i.substr(s)}return null},t._isValidCookie=function(e){if(!e)return!1;if(e.httponly)return!1;var t=m.getParsed(),n=t.protocol;if(e.secure&&"https:"!==n)return!1;var r=e.domain&&"//"+e.domain;return!r||m.sameOriginCheck(m.get(),r)},t.prototype._updateClientCookieStr=function(e,t){for(var n=this._getSettings().cookie?this._getSettings().cookie.split(";"):[],r=!1,o=""===e?null:e+"=",i=0;i<n.length;i++){n[i]=(0,b["default"])(n[i]);var s=o?0===n[i].indexOf(o):n[i].indexOf("=")===-1;s&&(null===t?n.splice(i,1):n[i]=t,r=!0)}r||null===t||n.push(t),this._getSettings().cookie=n.join("; ")},t.prototype.getCookie=function(){return this._getSettings().cookie},t.prototype.setCookie=function(e,n,r){if(n.length>x["default"]||"file:"===m.getParsed().protocol)return n;var o=g.parse(n);if(t._isValidCookie(o)){delete o.secure,delete o.domain;var i=t._getBrowserProcessedCookie(o,e);null===i?(delete o.expires,null!==t._getBrowserProcessedCookie(o,e)&&this._updateClientCookieStr(o.key,null)):this._updateClientCookieStr(o.key,i)}return r&&this.cookieSync.perform({cookie:n,url:e.location.href}),n},t}(u["default"]);e["default"]=T,t.exports=e["default"]}},"electron.js":function(exports,module,require){function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _base=require("./base"),_base2=_interopRequireDefault(_base),_script=require("../../processing/script"),_destinationLocation=require("../utils/destination-location"),destinationLocation=_interopRequireWildcard(_destinationLocation),ElectronSandbox=function(_SandboxBase){function ElectronSandbox(){return _classCallCheck(this,ElectronSandbox),_possibleConstructorReturn(this,_SandboxBase.apply(this,arguments))}return _inherits(ElectronSandbox,_SandboxBase),ElectronSandbox._createFnWrapper=function(e,t){return function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return"string"==typeof r[0]&&(r[0]=(0,_script.processScript)(r[0])),t.apply(e,r)}},ElectronSandbox._overrideElectronModulePaths=function _overrideElectronModulePaths(window){var electronRequire=eval("require"),path=electronRequire("path"),destination=destinationLocation.getParsed();if("file:"===destination.protocol){var pathname="win32"===window.process.platform&&"/"===destination.pathname[0]?destination.pathname.substr(1):destination.pathname;window.__filename=path.normalize(decodeURIComponent(pathname)),window.__dirname=path.dirname(window.__filename),window.module.filename=window.__filename,window.module.paths=window.module.paths.concat(electronRequire("module")._nodeModulePaths(window.__dirname))}},ElectronSandbox.prototype.attach=function(e){if(_SandboxBase.prototype.attach.call(this,e),e.require){var t=e.require("vm");if(t){var n=this.nativeMethods;n.refreshElectronMeths(t)&&(t.createScript=ElectronSandbox._createFnWrapper(t,n.createScript),t.runInDebugContext=ElectronSandbox._createFnWrapper(t,n.runInDebugContext),t.runInContext=ElectronSandbox._createFnWrapper(t,n.runInContext),t.runInNewContext=ElectronSandbox._createFnWrapper(t,n.runInNewContext),t.runInThisContext=ElectronSandbox._createFnWrapper(t,n.runInThisContext),ElectronSandbox._overrideElectronModulePaths(e))}}},ElectronSandbox}(_base2["default"]);exports["default"]=ElectronSandbox,module.exports=exports["default"]},event:{"active-window-tracker.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=n("../base"),l=r(a),u="hammerhead|event|window-activated",c="hammerhead|event|window-deactivated",p=function(e){function t(n){o(this,t);var r=i(this,e.call(this));return r.messageSandbox=n,r.isIframeWindow=null,r.activeWindow=null,r.isActive=null,r}return s(t,e),t.prototype._notifyPrevActiveWindow=function(){try{this.activeWindow.top&&this.activeWindow!==this.activeWindow.top&&this.messageSandbox.sendServiceMsg({cmd:c},this.activeWindow)}catch(e){}},t.prototype.attach=function(t){var n=this;e.prototype.attach.call(this,t),this.isIframeWindow=t!==t.top,this.activeWindow=this.isIframeWindow?null:t.top,this.isActive=!this.isIframeWindow,this.messageSandbox.on(this.messageSandbox.SERVICE_MSG_RECEIVED_EVENT,function(e){e.message.cmd===u?(n._notifyPrevActiveWindow(),n.isActive=!1,n.activeWindow=e.source):e.message.cmd===c&&(n.isActive=!1)})},t.prototype.isCurrentWindowActive=function(){return this.isActive},t.prototype.makeCurrentWindowActive=function(){this.isActive=!0,this.isIframeWindow?this.messageSandbox.sendServiceMsg({cmd:u},this.window.top):(this._notifyPrevActiveWindow(),this.activeWindow=this.window)},t}(l["default"]);e["default"]=p,t.exports=e["default"]},"drag-and-drop":{"data-store-mode.js":function(e,t,n){e.__esModule=!0,e["default"]={readwrite:"readwrite",readonly:"readonly","protected":"protected"},t.exports=e["default"]},"data-transfer-item-kind.js":function(e,t,n){e.__esModule=!0,e["default"]={string:"string",file:"file"},t.exports=e["default"]},"data-transfer-item-list.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){e=e.replace(/\r\n$/,"");var t=[];if(""===e)return t;e=e.split(/\r\n/);for(var n=0,r=e;n<r.length;n++){var o=r[n];"#"!==o&&t.push(o)}return t}function s(e){return"text"===e?"text/plain":"url"===e?"text/uri-list":e}e.__esModule=!0;var a=n("../../native-methods"),l=r(a),u=n("./data-transfer-item"),c=r(u),p=n("./data-store-mode"),d=r(p),f=n("./data-transfer-item-kind"),h=r(f),m=function y(e){var t=this;o(this,y);var n=[],r=[],a=function(){for(var e=[],t=0,r=n;t<r.length;t++){var o=r[t];e.push(o.type)}return e},u=function(){for(var e=0;void 0!==n[e]||void 0!==t[e];){var r=n[e];l["default"].objectDefineProperty.call(window.Object,t,e,{enumerable:void 0!==r,configurable:!0,value:r}),e++}},p=function(e){var t=!1;e=s(e),"url"===e&&(t=!0);for(var o="",a=0;a<n.length;a++)n[a].type===e&&(o=r[a]);return t&&o&&(o=i(o)[0]),o},f=function(e){e=s(e);for(var t=0;t<n.length;t++)if(n[t].type===e){n.splice(t,1),r.splice(t,1);break}u()},m=function(e,t,o){var i=null;if("string"==typeof e){var a=t.toString().toLowerCase(),l=p(a);if(!o&&l)throw new Error("Failed to execute 'add' on 'DataTransferItemList': An item already exists for type '"+a+"'.");l&&f(a),i=new c["default"](h["default"].string,s(t),e)}else i=new c["default"](h["default"].file,null,e);return n.push(i),r.push(e),u(),i};this.getAndHideInternalMethods=function(){var e={getTypes:a,getItemData:p,removeItem:f,addItem:m};return delete t.getAndHideInternalMethods,e},l["default"].objectDefineProperty.call(window.Object,this,"length",{enumerable:!0,get:function(){return n.length}}),l["default"].objectDefineProperty.call(window.Object,this,"remove",{configurable:!0,enumerable:!0,get:function(){return function(t){e.mode===d["default"].readwrite&&(n.splice(t,1),r.splice(t,1),u())}}}),l["default"].objectDefineProperty.call(window.Object,this,"clear",{configurable:!0,enumerable:!0,get:function(){return function(){e.mode===d["default"].readwrite&&(n=[],r=[],u())}}}),l["default"].objectDefineProperty.call(window.Object,this,"add",{configurable:!0,enumerable:!0,get:function(){return function(t,n){if(!arguments.length)throw new Error("Failed to execute 'add' on 'DataTransferItemList': 1 argument required, but only 0 present.");if(1===arguments.length&&"string"==typeof t)throw new Error("Failed to execute 'add' on 'DataTransferItemList': parameter 1 is not of type 'File'.");if(e.mode===d["default"].readwrite)return m(t,n,!1)}}})};e["default"]=m,l["default"].DataTransferItemList&&(m.prototype=l["default"].DataTransferItemList.prototype),t.exports=e["default"]},"data-transfer-item.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("../../native-methods"),s=r(i),a=n("./data-transfer-item-kind"),l=r(a),u=function c(e,t,n){o(this,c),s["default"].objectDefineProperty.call(window.Object,this,"kind",{enumerable:!0,get:function(){return e}}),s["default"].objectDefineProperty.call(window.Object,this,"type",{enumerable:!0,get:function(){return t}}),s["default"].objectDefineProperty.call(window.Object,this,"getAsString",{configurable:!0,enumerable:!0,get:function(){return function(t){if(!arguments.length)throw new Error("Failed to execute 'getAsString' on 'DataTransferItem': 1 argument required, but only 0 present.");"function"==typeof t&&e===l["default"].string&&s["default"].setTimeout.call(window,function(){return t(n)},0)}}}),s["default"].objectDefineProperty.call(window.Object,this,"getAsFile",{configurable:!0,enumerable:!0,get:function(){return function(){return e!==l["default"].file?null:n}}})};e["default"]=u,s["default"].DataTransferItem&&(u.prototype=s["default"].DataTransferItem.prototype),t.exports=e["default"]},"data-transfer.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("../../../utils/browser"),s=n("../../../utils/feature-detection"),a=n("../../native-methods"),l=r(a),u=n("./data-transfer-item-list"),c=r(u),p=n("./file-list"),d=r(p),f=n("./data-store-mode"),h=r(f),m=n("./drop-effect"),y=r(m),g=n("./effect-allowed"),v=r(g),E=function b(e){o(this,b);var t=y["default"].none,n=v["default"].uninitialized,r=new c["default"](e),s=r.getAndHideInternalMethods(),a=new d["default"],u=new c["default"](e),p=u.getAndHideInternalMethods(),f=function(){return e.mode===h["default"]["protected"]?u:r},m=function(){return e.mode===h["default"]["protected"]?p:s};l["default"].objectDefineProperty.call(window.Object,this,"dropEffect",{configurable:!0,enumerable:!0,get:function(){return t},set:function(e){return y["default"][e]&&(t=y["default"][e]),e}}),l["default"].objectDefineProperty.call(window.Object,this,"effectAllowed",{configurable:!0,enumerable:!0,get:function(){return n},set:function(e){return v["default"][e]&&(n=v["default"][e]),e}}),i.isIE11||l["default"].objectDefineProperty.call(window.Object,this,"items",{configurable:!0,enumerable:!0,get:f}),l["default"].objectDefineProperty.call(window.Object,this,"types",{configurable:!0,enumerable:!0,get:function(){return m().getTypes()}}),l["default"].objectDefineProperty.call(window.Object,this,"files",{configurable:!0,enumerable:!0,get:function(){return a}}),i.isIE11||(this.setDragImage=function(){}),this.getData=function(e){if(!arguments.length)throw new Error("Failed to execute 'getData' on 'DataTransfer': 1 argument required, but only 0 present.");return e=e.toString().toLowerCase(),m().getItemData(e)},this.setData=function(t,n){if(arguments.length<2)throw new Error("Failed to execute 'setData' on 'DataTransfer': 2 argument required, but only "+arguments.length+" present.");e.mode===h["default"].readwrite&&(t=t.toString().toLowerCase(),s.addItem(n,t,!0))},this.clearData=function(t){e.mode===h["default"].readwrite&&(void 0===t?r.clear():s.removeItem(t))}};e["default"]=E,s.hasDataTransfer&&(E.prototype=l["default"].DataTransfer.prototype),t.exports=e["default"]},"drag-data-store.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("./data-store-mode"),s=r(i),a=function(){function e(){o(this,e),this.mode=s["default"].readwrite}return e.prototype.setReadOnlyMode=function(){this.mode=s["default"].readonly},e.prototype.setProtectedMode=function(){this.mode=s["default"]["protected"]},e}();e["default"]=a,t.exports=e["default"]},"drop-effect.js":function(e,t,n){e.__esModule=!0,e["default"]={none:"none",copy:"copy",link:"link",move:"move"},t.exports=e["default"]},"effect-allowed.js":function(e,t,n){e.__esModule=!0,e["default"]={uninitialized:"uninitialized",none:"none",copy:"copy",copyLink:"copyLink",copyMove:"copyMove",link:"link",linkMove:"linkMove",move:"move",all:"all"},t.exports=e["default"]},"file-list.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("../../native-methods"),s=r(i),a=function l(){o(this,l),s["default"].objectDefineProperty.call(window.Object,this,"length",{enumerable:!0,get:function(){return 0}}),s["default"].objectDefineProperty.call(window.Object,this,"item",{enumerable:!0,get:function(){return function(){}}})};e["default"]=a,s["default"].FileList&&(a.prototype=s["default"].FileList.prototype),t.exports=e["default"]}},"element-editing-watcher.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("../native-methods"),s=r(i),a=n("../../utils/dom"),l="hammerhead|element-editing-observed",u="hammerhead|old-value",c=function(){function e(t){o(this,e),this.eventSimulator=t}return e.prototype._onBlur=function(e){this.processElementChanging(e.target)||this.stopWatching(e.target)},e.prototype._onChange=function(e){this.stopWatching(e.target)},e.prototype.stopWatching=function(e){var t=this;e&&(s["default"].removeEventListener.call(e,"blur",function(e){return t._onBlur(e)}),s["default"].removeEventListener.call(e,"change",function(e){return t._onChange(e)}),e[l]&&delete e[l],e[u]&&delete e[u])},e.prototype.watchElementEditing=function(e){var t=this;e&&!e[l]&&(0,a.isTextEditableElementAndEditingAllowed)(e)&&!(0,a.isShadowUIElement)(e)&&(e[l]=!0,e[u]=e.value,s["default"].addEventListener.call(e,"blur",function(e){return t._onBlur(e)}),s["default"].addEventListener.call(e,"change",function(e){return t._onChange(e)}))},e.prototype.restartWatchingElementEditing=function(e){e&&e[l]&&(e[u]=e.value)},e.prototype.processElementChanging=function(e){return!(!e||!e[l]||e.value===e[u])&&(this.eventSimulator.change(e),this.restartWatchingElementEditing(e),!0)},e}();e["default"]=c,t.exports=e["default"]},"focus-blur.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("../../../processing/dom/internal-attributes"),u=o(l),c=n("../../../processing/dom/internal-properties"),p=o(c),d=n("../base"),f=o(d),h=n("../event/active-window-tracker"),m=o(h),y=n("../native-methods"),g=o(y),v=n("../../utils/browser"),E=r(v),b=n("../../utils/dom"),S=r(b),w=n("../../utils/style"),_=r(w),x="hammerhead|event|internal-",T={bubbles:{focus:"focusin",blur:"focusout"},nonBubbles:{focusin:"focus",focusout:"blur"}},C=function(e){function t(n,r,o,a,l,u){i(this,t);var c=s(this,e.call(this));return c.shouldDisableOuterFocusHandlers=!1,c.topWindow=null,c.lastFocusedElement=null,c.scrollState={},c.eventSimulator=r,c.activeWindowTracker=new m["default"](o),c.shadowUI=a,c.listeners=n,c.elementEditingWatcher=u,c.timersSandbox=l,c}return a(t,e),t._getNativeMeth=function(e,t){if(S.isSVGElement(e)){if("focus"===t)return g["default"].svgFocus;if("blur"===t)return g["default"].svgBlur}return g["default"][t]},t._restoreElementScroll=function(e,t){var n=_.getElementScroll(e);n.left!==t.left&&_.setScrollLeft(e,t.left),n.top!==t.top&&_.setScrollTop(e,t.top)},t.prototype._onChangeActiveElement=function(e){this.lastFocusedElement!==e&&(this.lastFocusedElement&&g["default"].getAttribute.call(this.lastFocusedElement,u["default"].focusPseudoClass)&&g["default"].removeAttribute.call(this.lastFocusedElement,u["default"].focusPseudoClass),!S.isElementFocusable(e)||S.isBodyElement(e)&&null===S.getTabIndex(e,"tabIndex")?this.lastFocusedElement=null:(this.lastFocusedElement=e,g["default"].setAttribute.call(e,u["default"].focusPseudoClass,!0)))},t.prototype._shouldUseLabelHtmlForElement=function(e,t){return"focus"===t&&S.isLabelElement(e)&&e.htmlFor},t.prototype._getElementNonScrollableParentsScrollState=function(e){for(var t=[],n=S.getParents(e),r=0;r<n.length;r++){var o=n[r];"hidden"===_.get(o,"overflow")&&t.push({element:o,state:_.getElementScroll(o)})}return t},t.prototype._restoreElementNonScrollableParentsScrollState=function(e){for(var n=0;n<e.length;n++){var r=e[n];t._restoreElementScroll(r.element,r.state)}},t.prototype._saveScrollStateIfNecessary=function(e,t){t&&(this.scrollState.windowScroll=_.getElementScroll(this.window)),E.isIE&&(this.scrollState.elementNonScrollableParentsScrollState=this._getElementNonScrollableParentsScrollState(e))},t.prototype._restoreScrollStateIfNecessary=function(e){e&&t._restoreElementScroll(this.window,this.scrollState.windowScroll),E.isIE&&this._restoreElementNonScrollableParentsScrollState(this.scrollState.elementNonScrollableParentsScrollState)},t.prototype._raiseEvent=function(e,n,r,o,i,s,a){var l=this,u=function(){E.isIE&&E.version<12?l.window.setTimeout(function(){l.window.setTimeout(function(){delete e[t.getInternalEventFlag(n)]},0)},0):delete e[t.getInternalEventFlag(n)];var s=T.bubbles[n];o||(i?(l.eventSimulator[s](e),l.timersSandbox.deferFunction(function(){return l.eventSimulator[n](e)})):E.isMSEdge&&"blur"===n?(l.eventSimulator[s](e),l.eventSimulator[n](e)):(l.eventSimulator[n](e),l.eventSimulator[s](e))),r()};if(e[n]){if(this._saveScrollStateIfNecessary(e,a),this._shouldUseLabelHtmlForElement(e,n)){var c=g["default"].getElementById.call(S.findDocument(e),e.htmlFor);if(!c)return void r();e=c}e[t.getInternalEventFlag(n)]=!0,t._getNativeMeth(e,n).call(e),this._restoreScrollStateIfNecessary(a);var p=S.findDocument(e),d=S.getActiveElement(p),f=e.parentNode,h=f===document?null:S.closest(f,"[tabindex]");if("focus"===n&&d!==e&&h&&s){var m=E.isWebKit||E.isSafari||E.isIE;this._raiseEvent(h,"focus",u,!1,!1,s,m)}else"blur"===n&&d===e&&e!==p.body?this._raiseEvent(p.body,"focus",u,!0):u()}else u()},t.getInternalEventFlag=function(e){return x+e},t.getNonBubblesEventType=function(e){return T.nonBubbles[e]},t.prototype.attach=function(t){var n=this;e.prototype.attach.call(this,t),this.activeWindowTracker.attach(t),this.topWindow=S.isCrossDomainWindows(t,t.top)?t:t.top,this.listeners.addInternalEventListener(t,["focus","blur"],function(){var e=S.getActiveElement(n.document);n._onChangeActiveElement(e)})},t.prototype._raiseSelectionChange=function(e,t){E.isMSEdge&&t&&S.isTextEditableElement(t)&&this.eventSimulator.selectionchange(t),"function"==typeof e&&e()},t.prototype.focus=function(e,t,n,r,o,i){var s=this;if(this.shouldDisableOuterFocusHandlers&&!S.isShadowUIElement(e))return null;var a=!o||E.isWebKit||!_.isElementInInvisibleIframe(e),l=(e[p["default"].processedContext]||this.window).document;if(!a||o&&!_.isElementVisible(e,l))return null;var u=S.isElementInIframe(e),c=u?S.getIframeByElement(e):null,d=S.findDocument(e),f=S.isBodyElement(e),h=S.getActiveElement(),m=S.findDocument(h),y=!1,g=!1,v=!1,b=S.isContentEditableElement(e),w=this.activeWindowTracker.isCurrentWindowActive();y=h===e?!(f&&b&&!w):f&&!(b||E.isIE);var x=!1,T=function(){w||S.isShadowUIElement(e)||s.activeWindowTracker.makeCurrentWindowActive(),s._raiseEvent(e,"focus",function(){n||s.elementEditingWatcher.watchElementEditing(e),u&&c&&S.getActiveElement(s.topWindow.document)!==c?s._raiseEvent(c,"focus",function(){return s._raiseSelectionChange(t,e)},!0,x):s._raiseSelectionChange(t,e)},y||n,x,r,i)};if(o&&E.isIE){if((this.eventSimulator.isSavedWindowsEventsExists()||E.version>10)&&this.window.event&&"focus"===this.window.event.type&&this.window.event.srcElement===e)return this._raiseSelectionChange(t,e),null;E.version<12&&(x=!0)}return h&&h.tagName&&(h!==e&&(d!==m&&h===m.body?g=!1:h===d.body?!n&&E.isIE&&(x?this.timersSandbox.setTimeout.call(this.window,function(){return s.eventSimulator.blur(h)},0):this.eventSimulator.blur(h)):g=!0),v=d!==m&&S.isElementInIframe(h,m)),v&&!g?E.isIE?(this.eventSimulator.blur(S.getIframeByElement(h)),T()):this.blur(S.getIframeByElement(h),T,!0,o):g?this.blur(h,function(){v?s.blur(S.getIframeByElement(h),T,!0,o):T()},n,o):T(),null},t.prototype.blur=function(e,t,n,r){var o=S.getActiveElement(S.findDocument(e)),i=r&&E.isIE&&E.version<12;o!==e&&(n=!0),n||(this.elementEditingWatcher.processElementChanging(e),this.elementEditingWatcher.stopWatching(e)),this._raiseEvent(e,"blur",function(){"function"==typeof t&&t()},n,i)},t._processFocusPseudoClassSelector=function(e){return E.isIE?e:e.replace(/\s*:focus\b/gi,"["+u["default"].focusPseudoClass+"]")},t}(f["default"]);e["default"]=C,t.exports=e["default"]},"hover.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("../../../processing/dom/internal-attributes"),u=o(l),c=n("../base"),p=o(c),d=n("../native-methods"),f=o(d),h=n("../../utils/dom"),m=r(h),y=function(e){function t(n){i(this,t);var r=s(this,e.call(this));return r.listeners=n,r.hoverElementFixed=!1,r.lastHoveredElement=null,r}return a(t,e),t._setHoverMarker=function(e,t){for(t&&f["default"].setAttribute.call(t,u["default"].hoverPseudoClass,"");e&&e.tagName&&e!==t;)f["default"].setAttribute.call(e,u["default"].hoverPseudoClass,""),e=e.parentNode},t.prototype._clearHoverMarkerUntilJointParent=function(e){var t=null;if(this.lastHoveredElement){for(var n=this.lastHoveredElement;n&&n.tagName&&n.contains;){if(n.contains(e)){t=n;break}f["default"].removeAttribute.call(n,u["default"].hoverPseudoClass),n=n.parentNode}t&&f["default"].removeAttribute.call(t,u["default"].hoverPseudoClass)}return t},t.prototype._hover=function(e){if(!this.hoverElementFixed&&!m.isShadowUIElement(e)){var n=this._clearHoverMarkerUntilJointParent(e);t._setHoverMarker(e,n),this.lastHoveredElement=e}},t.prototype.fixHoveredElement=function(){this.hoverElementFixed=!0},t.prototype.freeHoveredElement=function(){this.hoverElementFixed=!1},t.prototype.attach=function(t){var n=this;e.prototype.attach.call(this,t),this.listeners.addInternalEventListener(t,["mouseover","touchstart"],function(e){return n._hover(e.target)})},t}(p["default"]);e["default"]=y,t.exports=e["default"]},"index.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("./focus-blur"),u=o(l),c=n("./hover"),p=o(c),d=n("./listeners"),f=o(d),h=n("./selection"),m=o(h),y=n("../base"),g=o(y),v=n("../native-methods"),E=o(v),b=n("../../utils/dom"),S=r(b),w=n("../../utils/event"),_=n("./drag-and-drop/data-transfer"),x=o(_),T=n("./drag-and-drop/drag-data-store"),C=o(T),A=function(e){function t(n,r,o,a,l,c,d){i(this,t);var f=s(this,e.call(this));return f.EVENT_PREVENTED_EVENT="hammerhead|event|event-prevented",f.listeners=n,f.elementEditingWatcher=o,f.unload=a,f.timers=d,f.eventSimulator=r,f.focusBlur=new u["default"](n,r,l,c,d,o),f.selection=new m["default"](f),f.hover=new p["default"](n),f.shadowUI=c,f.message=l,f.DataTransfer=x["default"],f.DragDataStore=C["default"],f.overriddenMethods=null,f.onFocus=null,f.cancelInternalEvents=null,f._createOverridedMethods(),f._createInternalHandlers(),f}return a(t,e),t.prototype._createOverridedMethods=function(){var e=this.selection,t=this.focusBlur,n=this.eventSimulator,r=this;this.overriddenMethods={dispatchEvent:function(){f["default"].beforeDispatchEvent(this);var e=S.isWindow(this),t=e?E["default"].windowDispatchEvent.apply(this,arguments):E["default"].dispatchEvent.apply(this,arguments);return f["default"].afterDispatchEvent(this),t},click:function(){f["default"].beforeDispatchEvent(this);var e=n.nativeClick(this,E["default"].click);return f["default"].afterDispatchEvent(this),e},setSelectionRange:function(){return e.setSelectionRangeWrapper.apply(this,arguments)},select:function(){return e.selectWrapper.call(this)},focus:function(){return t.focus(this,null,!1,!1,!0)},blur:function(){return t.blur(this,null,!1,!0)},preventDefault:function(){return r.emit(r.EVENT_PREVENTED_EVENT,this),E["default"].preventDefault.call(this)}}},t.prototype._createInternalHandlers=function(){var e=this.shadowUI,t=this.document,n=this.eventSimulator;this.onFocus=function(n){var r=n.target,o=S.getActiveElement(t);S.isShadowUIElement(r)||S.isShadowUIElement(o)||e.setLastActiveElement(o)},this.cancelInternalEvents=function(e,t,r,o,i){var s=u["default"].getNonBubblesEventType(e.type)||e.type,a=u["default"].getInternalEventFlag(s);e.target[a]&&!e[n.DISPATCHED_EVENT_FLAG]&&i()}},t.prototype.attach=function(t){e.prototype.attach.call(this,t),t.HTMLInputElement.prototype.setSelectionRange=this.overriddenMethods.setSelectionRange,t.HTMLTextAreaElement.prototype.setSelectionRange=this.overriddenMethods.setSelectionRange,t.Window.prototype.dispatchEvent=this.overriddenMethods.dispatchEvent,t.Document.prototype.dispatchEvent=this.overriddenMethods.dispatchEvent,t.HTMLElement.prototype.dispatchEvent=this.overriddenMethods.dispatchEvent,t.SVGElement.prototype.dispatchEvent=this.overriddenMethods.dispatchEvent,t.HTMLElement.prototype.focus=this.overriddenMethods.focus,t.HTMLElement.prototype.blur=this.overriddenMethods.blur,t.HTMLElement.prototype.click=this.overriddenMethods.click,t.Window.focus=this.overriddenMethods.focus,t.Window.blur=this.overriddenMethods.blur,t.Event.prototype.preventDefault=this.overriddenMethods.preventDefault,t.TextRange&&t.TextRange.prototype.select&&(t.TextRange.prototype.select=this.overriddenMethods.select),this.initDocumentListening(t.document),this.listeners.initElementListening(t,w.DOM_EVENTS.concat(["load","beforeunload","pagehide","unload","message"])),this.listeners.addInternalEventListener(t,["focus"],this.onFocus),this.listeners.addInternalEventListener(t,["focus","blur","change","focusin","focusout"],this.cancelInternalEvents),this.unload.attach(t),this.message.attach(t),this.timers.attach(t),this.focusBlur.attach(t),this.hover.attach(t)},t.prototype.initDocumentListening=function(e){this.listeners.initElementListening(e,w.DOM_EVENTS)},t}(g["default"]);e["default"]=A,t.exports=e["default"]},"listeners.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("../../../processing/dom/internal-properties"),u=o(l),c=n("../native-methods"),p=o(c),d=n("../../utils/event-emitter"),f=o(d),h=n("./listening-context"),m=r(h),y=n("../../utils/event"),g=n("../../utils/dom"),v=Array.prototype.map,E=["click","mousedown","mouseup","dblclick","contextmenu","mousemove","mouseover","mouseout","pointerdown","pointermove","pointerover","pointerout","pointerup","MSPointerDown","MSPointerMove","MSPointerOver","MSPointerOut","MSPointerUp","touchstart","touchmove","touchend","keydown","keypress","keyup","change","focus","blur","focusin","focusout"],b="hammerhead|event-sandbox-dispatch-event-flag",S=function(e){
function t(){i(this,t);var n=s(this,e.call(this));return n.EVENT_LISTENER_ATTACHED_EVENT="hammerhead|event|event-listener-attached",n.EVENT_LISTENER_DETACHED_EVENT="hammerhead|event|event-listener-detached",n.listeningCtx=m,n.addInternalEventListener=n.listeningCtx.addInternalHandler,n.addFirstInternalHandler=n.listeningCtx.addFirstInternalHandler,n.removeInternalEventListener=n.listeningCtx.removeInternalHandler,n}return a(t,e),t._getBodyEventListenerWrapper=function(e,t){return function(n){return e.cancelOuterHandlers?null:t.call(this,n)}},t._getNativeAddEventListener=function(e){return(0,g.isWindow)(e)?p["default"].windowAddEventListener:void 0!==e.body?p["default"].documentAddEventListener:p["default"].addEventListener},t._getNativeRemoveEventListener=function(e){return(0,g.isWindow)(e)?p["default"].windowRemoveEventListener:void 0!==e.body?p["default"].documentRemoveEventListener:p["default"].removeEventListener},t._getEventListenerWrapper=function(e,t){return function(n){var r="[object FunctionWrapper]"===t.toString();return r?null:e.cancelOuterHandlers?null:"function"==typeof e.outerHandlersWrapper?e.outerHandlersWrapper.call(this,n,t):(0,y.isObjectEventListener)(t)?t.handleEvent.call(t,n):t.call(this,n)}},t._isDifferentHandler=function(e,t,n){for(var r=0;r<e.length;r++){var o=e[r];if(o.fn===t&&o.useCapture===n)return!1}return!0},t._isValidEventListener=function(e){return"function"==typeof e||(0,y.isObjectEventListener)(e)},t.prototype._createEventHandler=function(){var e=this;return function(t){var n=this,r=n[u["default"].processedContext]||window,o=!1,i=!1,s=!1,a=e.listeningCtx.getEventCtx(n,t.type);if(a){var l=a.internalHandlers;a.cancelOuterHandlers=!1;for(var c=function(){o=!0,(0,y.preventDefault)(t)},p=function(){i||(a.cancelOuterHandlers=!0),i=!0},d=function(){s=!0,(0,y.stopPropagation)(t)},f=0;f<l.length;f++){var h=l[f];if(h.call(n,t,r[b],c,p,d),o||s)break}}}},t.prototype._createElementOverridedMethods=function(e){var n=this;return{addEventListener:function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];var s=o[0],a=o[1],l=o[2],u=m.getEventCtx(e,s),c=t._getNativeAddEventListener(e);if(!u||!t._isValidEventListener(a))return c.apply(e,o);var p=t._isDifferentHandler(u.outerHandlers,a,l);if(!p)return null;var d=t._getEventListenerWrapper(u,a);m.wrapEventListener(u,a,d,l),o[1]=d;var f=c.apply(e,o);return n.emit(n.EVENT_LISTENER_ATTACHED_EVENT,{el:e,listener:a,eventType:s}),f},removeEventListener:function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];var s=o[0],a=o[1],l=o[2],u=t._getNativeRemoveEventListener(e),c=m.getEventCtx(e,s);if(!c||!t._isValidEventListener(a))return u.apply(e,o);o[1]=m.getWrapper(c,a,l);var p=u.apply(e,o);return n.emit(n.EVENT_LISTENER_DETACHED_EVENT,{el:e,listener:a,eventType:s}),p}}},t.prototype._createDocumentBodyOverridedMethods=function(e){var n=this,r=function(){return e.body.addEventListener}(),o=function(){return e.body.removeEventListener}();return{addEventListener:function(o,i,s){var a=m.getEventCtx(e,o),l=m.getEventCtx(this,o);if(!a||!t._isValidEventListener(i))return r.call(this,o,i,s);var u=t._isDifferentHandler(l.outerHandlers,i,s);if(!u)return null;var c=t._getBodyEventListenerWrapper(a,i);m.wrapEventListener(l,i,c,s);var p=r.call(this,o,c,s);return n.emit(n.EVENT_LISTENER_ATTACHED_EVENT,{el:this,eventType:o,listener:i}),p},removeEventListener:function(e,n,r){var i=m.getEventCtx(this,e);return i&&t._isValidEventListener(n)?o.call(this,e,m.getWrapper(i,n,r),r):o.call(this,e,n,r)}}},t.prototype.initElementListening=function(e,n){var r=t._getNativeAddEventListener(e);n=n||E,this.listeningCtx.addListeningElement(e,n);for(var o=0,i=n;o<i.length;o++){var s=i[o];r.call(e,s,this._createEventHandler(),!0)}var a=this._createElementOverridedMethods(e);e.addEventListener=a.addEventListener,e.removeEventListener=a.removeEventListener},t.prototype.initDocumentBodyListening=function(e){m.addListeningElement(e.body,y.DOM_EVENTS);var t=this._createDocumentBodyOverridedMethods(e);e.body.addEventListener=t.addEventListener,e.body.removeEventListener=t.removeEventListener},t.prototype.restartElementListening=function(e){var n=t._getNativeAddEventListener(e),r=this.listeningCtx.getElementCtx(e);if(r)for(var o=Object.keys(r),i=0;i<o.length;i++){var s=o[i];n.call(e,s,this._createEventHandler(),!0)}},t.prototype.cancelElementListening=function(e){this.listeningCtx.removeListeningElement(e),e.body&&this.listeningCtx.removeListeningElement(e.body)},t.beforeDispatchEvent=function(e){var t=e[u["default"].processedContext]||window;t[b]=(t[b]||0)+1},t.afterDispatchEvent=function(e){var t=e[u["default"].processedContext]||window;t[b]--,t[b]||delete t[b]},t.prototype.setEventListenerWrapper=function(e,t,n){this.listeningCtx.isElementListening(e)||this.initElementListening(e,t);for(var r=0;r<t.length;r++){var o=t[r],i=this.listeningCtx.getEventCtx(e,o);i.outerHandlersWrapper=n}},t.prototype.getEventListeners=function(e,t){var n=this.listeningCtx.getEventCtx(e,t);return n?v.call(n.outerHandlers,function(e){return e.fn}):null},t}(f["default"]);e["default"]=S,t.exports=e["default"]},"listening-context.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e[g]}function i(e,t){t=h.isIE&&h.version>10&&/MSPointer/.test(t)?t.replace("MS","").toLowerCase():t;var n=o(e);return n&&n[t]}function s(e){return!!e[g]}function a(e,t){for(var n=o(e)||{},r=0;r<t.length;r++)n[t[r]]||(n[t[r]]={internalHandlers:[],outerHandlers:[],outerHandlersWrapper:null,wrappers:[],cancelOuterHandlers:!1});s(e)||y["default"].objectDefineProperty.call(window.Object,e,g,{value:n,writable:!0})}function l(e){delete e[g]}function u(e,t,n){for(var r=o(e),i=0;i<t.length;i++){var s=t[i];r[s].internalHandlers.unshift(n)}}function c(e,t,n){for(var r=o(e),i=0;i<t.length;i++){var s=t[i];r[s].internalHandlers.push(n)}}function p(e,t,n){for(var r=o(e),i=0;i<t.length;i++){var s=t[i],a=r[s].internalHandlers,l=a.indexOf(n);l>-1&&a.splice(l,1)}}function d(e,t,n,r){e.outerHandlers.push({fn:t,useCapture:r||!1}),e.wrappers.push(n)}function f(e,t,n){for(var r=e.outerHandlers,o=e.wrappers,i=null,s=0;s<r.length;s++){var a=r[s];if(a.fn===t&&(a.useCapture||!1)===(n||!1))return i=o[s],o.splice(s,1),r.splice(s,1),i}return null}e.__esModule=!0,e.getElementCtx=o,e.getEventCtx=i,e.isElementListening=s,e.addListeningElement=a,e.removeListeningElement=l,e.addFirstInternalHandler=u,e.addInternalHandler=c,e.removeInternalHandler=p,e.wrapEventListener=d,e.getWrapper=f;var h=n("../../utils/browser"),m=n("../native-methods"),y=r(m),g="hammerhead|element-listening-events-storage-prop"},"message.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("pinkie"),u=o(l),c=n("../base"),p=o(c),d=n("../native-methods"),f=o(d),h=n("../../utils/destination-location"),m=r(h),y=n("../../utils/url"),g=n("../../json"),v=n("../../utils/dom"),E=n("../../utils/event"),b=n("../../utils/fast-apply"),S=o(b),w=n("../../utils/create-event"),_=o(w),x={service:"hammerhead|service-msg",user:"hammerhead|user-msg"},T=function(e){function t(n,r){i(this,t);var o=s(this,e.call(this));return o.PING_DELAY=200,o.PING_IFRAME_TIMEOUT=7e3,o.PING_IFRAME_MIN_TIMEOUT=100,o.SERVICE_MSG_RECEIVED_EVENT="hammerhead|event|service-msg-received",o.RECEIVE_MSG_FN="hammerhead|receive-msg-function",o.pingCallback=null,o.pingCmd=null,o.topWindow=null,o.window=null,o.listeners=n,o.unloadSandbox=r,o.storedOnMessageHandler=null,o.isWindowUnloaded=!1,o.iframeInternalMsgQueue=[],o}return a(t,e),t.prototype._onMessage=function(e){var t="string"==typeof e.data?(0,g.parse)(e.data):e.data;t.type===x.service&&e.source&&(this.pingCmd&&t.message.cmd===this.pingCmd&&t.message.isPingResponse?(this.pingCallback(),this.pingCallback=null,this.pingCmd=null):this.emit(this.SERVICE_MSG_RECEIVED_EVENT,{message:t.message,source:e.source}))},t.prototype._onWindowMessage=function(e,t){var n="string"==typeof e.data?(0,g.parse)(e.data):e.data;if(n.type!==x.service){var r=m.get();if("*"===n.targetUrl||m.sameOriginCheck(r,n.targetUrl)){var o=(0,_["default"])(e,{origin:n.originUrl,data:n.message});return(0,E.isObjectEventListener)(t)?t.handleEvent.call(t,o):t.call(this.window,o)}}return null},t._wrapMessage=function(e,t,n){var r=m.getParsed(),o=(0,y.formatUrl)({protocol:r.protocol,host:r.host});return{message:t,originUrl:o,targetUrl:n,type:e}},t.prototype._removeInternalMsgFromQueue=function(e){for(var t=0,n=this.iframeInternalMsgQueue.length;t<n;t++)if(this.iframeInternalMsgQueue[t].sendFunc===e)return this.iframeInternalMsgQueue.splice(t,1),!0;return!1},t.prototype.attach=function(t){var n=this;e.prototype.attach.call(this,t),this.topWindow=t.top,this.isWindowUnloaded=!1,this.unloadSandbox.on(this.unloadSandbox.UNLOAD_EVENT,function(){for(n.isWindowUnloaded=!0;n.iframeInternalMsgQueue.length;){var e=n.iframeInternalMsgQueue[0];f["default"].clearTimeout.call(n.window,e.timeoutId),e.sendFunc()}});var r=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,S["default"])(n,"_onMessage",t)},o=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,S["default"])(n,"_onWindowMessage",t)};this.listeners.addInternalEventListener(t,["message"],r),this.listeners.setEventListenerWrapper(t,["message"],o),f["default"].objectDefineProperty.call(t.Object,t,this.RECEIVE_MSG_FN,{value:r,configurable:!0})},t.prototype.setOnMessage=function(e,t){var n=this;"function"==typeof t?(this.storedOnMessageHandler=t,e.onmessage=function(e){return n._onWindowMessage(e,t)}):(this.storedOnMessageHandler=null,e.onmessage=null)},t.prototype.getOnMessage=function(){return this.storedOnMessageHandler},t.prototype.postMessage=function(e,n){var r=n[1];return(0,v.isCrossDomainWindows)(this.window,e)?n[1]=(0,y.getCrossDomainProxyUrl)():(0,y.isSupportedProtocol)(e.location.toString())&&(0,y.isSupportedProtocol)(this.window.location.toString())?n[1]=(0,y.formatUrl)({protocol:this.window.location.protocol,host:this.window.location.host}):n[1]="*",n[0]=t._wrapMessage(x.user,n[0],r),isIframeWithoutSrc?(this.window.tc_cw_375fb9e7=e,this.window.tc_a_375fb9e7=n,this.window.eval("this.window.tc_cw_375fb9e7.postMessage(this.window.tc_a_375fb9e7[0], this.window.tc_a_375fb9e7[1]); delete this.window.tc_cw_375fb9e7; delete this.window.tc_a_375fb9e7")):e.postMessage(n[0],n[1])},t.prototype.sendServiceMsg=function(e,n){var r=this,o=t._wrapMessage(x.service,e),i=function(){return!(0,v.isCrossDomainWindows)(n,r.window)&&n[r.RECEIVE_MSG_FN]};if(i()){var s=function u(e){if(e||r._removeInternalMsgFromQueue(u))try{n[r.RECEIVE_MSG_FN]({data:(0,g.parse)((0,g.stringify)(o)),source:r.window})}catch(t){}};if(this.isWindowUnloaded)s(!0);else{var a=(0,v.getTopSameDomainWindow)(this.window),l=f["default"].setTimeout.call(a,s,10);this.iframeInternalMsgQueue.push({timeoutId:l,sendFunc:s})}return null}return n.postMessage(o,"*")},t.prototype.pingIframe=function(e,t,n){var r=this;return new u["default"](function(o,i){var s=null,a=null,l=null,u=function(){e.contentWindow&&(l=e.contentWindow,r.sendServiceMsg({cmd:r.pingCmd,isPingRequest:!0},l))},c=function(){f["default"].clearInterval.call(r.window,s),f["default"].clearTimeout.call(r.window,a),r.pingCallback=null,r.pingCmd=null,s=null,a=null};a=f["default"].setTimeout.call(r.window,function(){c(),i()},n?r.PING_IFRAME_MIN_TIMEOUT:r.PING_IFRAME_TIMEOUT),r.pingCallback=function(){c(),o()},r.pingCmd=t,u(),s=f["default"].setInterval.call(r.window,u,r.PING_DELAY)})},t}(p["default"]);e["default"]=T,t.exports=e["default"]},"selection.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n("./focus-blur"),a=o(s),l=n("./listeners"),u=o(l),c=n("../native-methods"),p=o(c),d=n("../../utils/browser"),f=r(d),h=n("../../utils/dom"),m=r(h),y=n("../../../processing/dom/internal-properties"),g=o(y),v=f.isFirefox&&f.version>50,E=function(){function e(t){i(this,e),this.focusBlurSandbox=t.focusBlur,this.timersSandbox=t.timers,this.listeners=t.listeners,this.eventSimulator=t.eventSimulator;var n=this,r=this.eventSimulator,o=this.listeners,s=this.timersSandbox;this.setSelectionRangeWrapper=function(){var t=arguments[0],o=arguments[1],i=arguments[2]||"none",s=this,a=m.isTextAreaElement(s)?p["default"].textAreaSetSelectionRange:p["default"].setSelectionRange,l=m.getActiveElement(m.findDocument(s)),u=!1,c=function(){var l=e._needChangeInputType(s),c=e._needForInternalSelection(s),p=s.type,d=void 0;l&&(s.type="text");try{d=a.call(s,t,o,i)}catch(h){d=a.call(s,0,0,i)}return c&&(s[g["default"].selection]={selectionStart:s.selectionStart,selectionEnd:s.selectionEnd,selectionDirection:s.selectionDirection}),l&&(s.type=p,u&&(n.focusBlurSandbox.blur(s,null,!0),n.focusBlurSandbox.focus(s,null,!0),m.getActiveElement(m.findDocument(s))!==s&&n.focusBlurSandbox.focus(s,null,!0))),f.isIE&&f.version>11&&r.selectionchange(s),d};return l===s?(u=!0,c()):n.wrapSetterSelection(s,c,f.isIE&&f.version<12)},this.selectWrapper=function(){var e=this.parentElement();if(!e||m.getActiveElement(m.findDocument(e))===e)return p["default"].select.call(this);var t=null,n=!1,i=function(t){t.target!==e&&"none"!==e.style.display||(n=!0)};return o.addInternalEventListener(document,["focus"],i),t=p["default"].select.call(this),s.setTimeout.call(window,function(){s.setTimeout.call(window,function(){o.removeInternalEventListener(document,["focus"],i),n||r.focus(e)},0)},0),t}}return e._isNumberOrEmailInput=function(e){return m.isInputElement(e)&&/^(number|email)$/.test(e.type)},e._needChangeInputType=function(t){return(f.isWebKit||v)&&e._isNumberOrEmailInput(t)},e._needForInternalSelection=function(t){return e._isNumberOrEmailInput(t)&&v},e.prototype.setSelection=function(e,t,n,r){e.setSelectionRange?e.setSelectionRange(t,n,r):(e.selectionStart=t,e.selectionEnd=n)},e.prototype.getSelection=function(t){var n=e._needChangeInputType(t),r=m.getActiveElement(m.findDocument(t)),o=r===t,i=t.type,s=null;n&&(!v&&o&&this.focusBlurSandbox.blur(t,null,!0),t.type="text");var a=t[g["default"].selection];return s={start:a?a.selectionStart:t.selectionStart,end:a?a.selectionEnd:t.selectionEnd,direction:a?a.selectionDirection:t.selectionDirection},n&&(t.type=i,o&&this.focusBlurSandbox.focus(t,null,!0)),s},e.prototype.wrapSetterSelection=function(e,t,n,r){var o=this,i=m.findDocument(e),s=null,l=null,c=!1,p=function(t){t.target!==e&&"none"!==e.style.display||(c=!0)};return n&&this.listeners.addInternalEventListener(document,["focus"],p),u["default"].beforeDispatchEvent(e),u["default"].beforeDispatchEvent(e),l=t(),u["default"].afterDispatchEvent(e),u["default"].afterDispatchEvent(e),n&&(s=m.getActiveElement(i),f.isWebKit&&s!==e&&(c&&(e[a["default"].getInternalEventFlag("focus")]=!0),e.focus()),f.isIE&&f.version<12?this.timersSandbox.setTimeout.call(window,function(){o.timersSandbox.setTimeout.call(window,function(){o.listeners.removeInternalEventListener(document,["focus"],p),c||o.eventSimulator.focus(e)},0)},0):(this.listeners.removeInternalEventListener(document,["focus"],p),c||(r&&f.isFirefox?this.focusBlurSandbox.focus(e,null,!0,!1,!0):this.eventSimulator.focus(e)))),l},e}();e["default"]=E,t.exports=e["default"]},"simulator.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n("../../../processing/dom/internal-properties"),a=o(s),l=n("../../utils/extend"),u=o(l),c=n("../native-methods"),p=o(c),d=n("../../utils/browser"),f=r(d),h=n("../../utils/dom"),m=r(h),y=n("../../utils/event"),g=r(y),v=n("../../utils/position"),E=n("../../utils/style"),b=25,S=.5,w={noButton:-1,leftButton:0,rightButton:2},_=/^key\w+$/,x=/^((mouse\w+)|((dbl)?click)|(contextmenu)|(drag\w*)|(drop))$/,T=/^touch\w+$/,C=/^focus(in|out)$/,A=function(){function e(){i(this,e),this.DISPATCHED_EVENT_FLAG="hammerhead|dispatched-event",this.touchIdentifier=p["default"].dateNow(),this.savedWindowEvents=[],this.savedNativeClickCount=0}return e._dispatchStorageEvent=function(e,t){var n=p["default"].documentCreateEvent.call(document,"StorageEvent");return n.initStorageEvent("storage",t.canBubble,t.cancelable,t.key,t.oldValue,t.newValue,t.url,null),p["default"].objectDefineProperty.call(window.Object,n,"storageArea",{get:function(){return t.storageArea},configurable:!0}),null===t.key&&p["default"].objectDefineProperty.call(window.Object,n,"key",{get:function(){return null},configurable:!0}),e.dispatchEvent(n)},e._dispatchTouchEvent=function(e,t){var n=p["default"].documentCreateEvent.call(document,"TouchEvent");return n.initTouchEvent?f.isIOS?n.initTouchEvent(t.type,t.canBubble,t.cancelable,t.view,t.detail,t.screenX,t.screenY,t.pageX,t.pageY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.touches,t.targetTouches,t.changedTouches,void 0===t.scale?1:t.scale,void 0===t.rotation?0:t.rotation):12===n.initTouchEvent.length?n.initTouchEvent(t.type,t.canBubble,t.cancelable,t.view,t.detail,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.touches,t.targetTouches,t.changedTouches):n.initTouchEvent(t.touches,t.targetTouches,t.changedTouches,t.type,t.view,t.screenX,t.screenY,t.pageX-t.view.pageXOffset,t.pageY-t.view.pageYOffset,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey):n=new p["default"].WindowTouchEvent(t.type,{touches:t.touches,targetTouches:t.targetTouches,changedTouches:t.changedTouches,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,bubbles:t.canBubble,cancelable:t.cancelable,cancelBubble:!1,defaultPrevented:!1,detail:t.detail,view:t.view}),e.dispatchEvent(n)},e._getUIEventArgs=function(e,t){var n=t||{};return{type:e,canBubble:n.canBubble!==!1,cancelable:n.cancelable!==!1,view:n.view||window,detail:n.detail||0,ctrlKey:n.ctrlKey||!1,altKey:n.altKey||!1,shiftKey:n.shiftKey||!1,metaKey:n.metaKey||!1}},e._getStorageEventArgs=function(e){var t=e||{};return(0,u["default"])(t,{canBubble:t.canBubble!==!1,cancelable:t.cancelable!==!1})},e._getMouseEventArgs=function(t,n){var r=n||{};return(0,u["default"])(e._getUIEventArgs(t,n),{screenX:r.screenX||0,screenY:r.screenY||0,clientX:r.clientX||0,clientY:r.clientY||0,button:void 0===r.button?g.BUTTON.left:r.button,buttons:void 0===r.buttons?g.BUTTONS_PARAMETER.leftButton:r.buttons,relatedTarget:r.relatedTarget||null,which:void 0===r.which?g.WHICH_PARAMETER.leftButton:r.which})},e._getKeyEventArgs=function(t,n){var r={keyCode:n.keyCode||0,charCode:n.charCode||0,which:"press"===t?n.charCode:n.keyCode};return"keyIdentifier"in n&&(r.keyIdentifier=n.keyIdentifier),"key"in n&&(r.key=n.key),(0,u["default"])(e._getUIEventArgs(t,n),r)},e._getModifiersAsString=function(e){var t="";for(var n in g.KEYBOARD_MODIFIERS_PARAMETER)g.KEYBOARD_MODIFIERS_PARAMETER.hasOwnProperty(n)&&e[n]&&(t+=g.KEYBOARD_MODIFIERS_PARAMETER[n]+" ");return t},e.prototype._simulateEvent=function(t,n,r,o){var i=this,s=null,a=null,l="click"===n&&m.isAnchorElement(t),c=(0,u["default"])(r?{clientX:r.clientX,clientY:r.clientY,altKey:!l&&r.alt,shiftKey:!l&&r.shift,ctrlKey:!l&&r.ctrl,metaKey:r.meta,button:r.button,which:r.which,buttons:r.buttons,relatedTarget:r.relatedTarget}:{},o||{});return c.relatedTarget||(c.relatedTarget=document.body),"storage"===n?(c=(0,u["default"])(c,r),s=e._getStorageEventArgs(c),a=e._dispatchStorageEvent):x.test(n)?(r&&void 0!==r.button&&(c=(0,u["default"])(c,{button:r.button})),s=e._getMouseEventArgs(n,c),a=function(e,t){return i._dispatchMouseEvent(e,t,r?r.dataTransfer:void 0)}):_.test(n)?(!r||void 0===r.keyCode&&void 0===r.charCode||(c=(0,u["default"])(c,{key:r.key||void 0,keyCode:r.keyCode||0,charCode:r.charCode||0}),"keyIdentifier"in r&&(c.keyIdentifier=r.keyIdentifier),"key"in r&&(c.key=r.key)),s=e._getKeyEventArgs(n,c),a=function(e,t){return i._dispatchKeyEvent(e,t)}):T.test(n)&&(s=this._getTouchEventArgs(n,(0,u["default"])(c,{target:t})),a=e._dispatchTouchEvent),a(t,s)},e.prototype._getTouchEventArgs=function(t,n){var r=n||{},o=(0,u["default"])(e._getUIEventArgs(t,r),{screenX:r.screenX||0,screenY:r.screenY||0,clientX:r.clientX||0,clientY:r.clientY||0,pageX:r.clientX||0,pageY:r.clientY||0,identifier:this._getTouchIdentifier(t)});return p["default"].documentCreateTouch?f.isIOS?o.touch=p["default"].documentCreateTouch.call(document,o.view,n.target,o.identifier,o.clientX,o.clientY,0,0):o.touch=p["default"].documentCreateTouch.call(document,o.view,n.target,o.identifier,o.pageX,o.pageY,o.screenX,o.screenY,o.clientX,o.clientY,null,null,void 0===o.rotation?0:o.rotation):o.touch=new p["default"].WindowTouch({identifier:o.identifier,target:n.target,clientX:o.clientX,clientY:o.clientY,pageX:o.pageX,pageY:o.pageY,screenX:o.screenX,screenY:o.screenY,rotationAngle:0,radiusX:b,radiusY:b,force:S}),p["default"].documentCreateTouchList&&(o.changedTouches=p["default"].documentCreateTouchList.call(document,o.touch),o.touches="touchend"===o.type?p["default"].documentCreateTouchList.call(document):o.changedTouches,o.targetTouches=o.touches),o},e.prototype._getTouchIdentifier=function(e){return"touchstart"===e&&this.touchIdentifier++,this.touchIdentifier},e.prototype._raiseNativeClick=function(e,t){var n=this,r=m.isElementInIframe(e)?m.getIframeByElement(e).contentWindow:window,o=r.event;f.isIE&&f.version<=11&&delete r.event,t.call(e),f.isIE&&f.version<11&&(this.savedNativeClickCount--&&this.savedWindowEvents.shift(),this.savedWindowEvents.length&&p["default"].objectDefineProperty.call(window.Object,r,"event",{get:function(){return n.savedWindowEvents[0]},configurable:!0})),f.isIE11&&o&&p["default"].objectDefineProperty.call(window.Object,r,"event",{get:function(){return o},configurable:!0})},e.prototype._dispatchKeyEvent=function(t,n){var r=null,o=!f.isIE||f.version>11;if(o&&p["default"].WindowKeyboardEvent){var i={bubbles:n.canBubble,cancelable:n.cancelable,cancelBubble:!1,defaultPrevented:!1,view:n.view,detail:n.detail,ctrlKey:n.ctrlKey,altKey:n.altKey,shiftKey:n.shiftKey,metaKey:n.metaKey,keyCode:n.keyCode,charCode:n.charCode,which:n.which};"keyIdentifier"in n&&(i.keyIdentifier=n.keyIdentifier),"key"in n&&(i.key=n.key),r=new p["default"].WindowKeyboardEvent(n.type,i)}else p["default"].documentCreateEvent&&(r=p["default"].documentCreateEvent.call(document,"KeyboardEvent"),r.initKeyboardEvent(n.type,n.canBubble,n.cancelable,n.view,"",0,e._getModifiersAsString(n),!1,""));if(r){p["default"].objectDefineProperty.call(window.Object,r,"keyCode",{configurable:!0,enumerable:!0,get:function(){return n.keyCode}}),p["default"].objectDefineProperty.call(window.Object,r,"charCode",{configurable:!0,enumerable:!0,get:function(){return n.charCode}}),p["default"].objectDefineProperty.call(window.Object,r,"which",{configurable:!0,enumerable:!0,get:function(){return n.which}}),"key"in n&&p["default"].objectDefineProperty.call(window.Object,r,"key",{configurable:!0,enumerable:!0,get:function(){return n.key}}),"keyIdentifier"in n&&p["default"].objectDefineProperty.call(window.Object,r,"keyIdentifier",{configurable:!0,enumerable:!0,get:function(){return n.keyIdentifier}});var s=!1,a=!0;o&&p["default"].objectDefineProperty.call(window.Object,r,"preventDefault",{get:function(){return function(){return s=!0,!1}},set:function(){}}),f.isMSEdge&&p["default"].objectDefineProperty.call(window.Object,r,"returnValue",{get:function(){return a},set:function(e){e===!1&&r.preventDefault(),a=e}});var l=this._raiseDispatchEvent(t,r,n);return f.isMSEdge?a&&!s:f.isIE?l:!s}return null},e.prototype._dispatchPointerEvent=function(e,t){var n=null,r=(0,v.getOffsetPosition)(e),o=(0,E.getBordersWidth)(e),i=(0,v.offsetToClientCoords)({x:r.left+o.left,y:r.top+o.top}),s=t.type.replace("mouse",""),a=f.isIE10?"MSPointer"+s.charAt(0).toUpperCase()+s.substring(1):"pointer"+s,l=(0,u["default"])({width:f.isIE10?0:1,height:f.isIE10?0:1,pressure:0,tiltX:0,tiltY:0,pointerId:1,pointerType:f.isIE10?4:"mouse",timeStamp:p["default"].dateNow(),isPrimary:!0},t);l.type=a,l.offsetX=t.clientX-i.x,l.offsetY=t.clientY-i.y,l.button=t.buttons===g.BUTTONS_PARAMETER.noButton?w.noButton:l.button,f.isIE?(l.rotation=0,n=p["default"].documentCreateEvent.call(document,f.isIE10?"MSPointerEvent":"PointerEvent"),n.initPointerEvent(l.type,l.canBubble,l.cancelable,window,l.detail,l.screenX,l.screenY,l.clientX,l.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.button,null,l.offsetX,l.offsetY,l.width,l.height,l.pressure,l.rotation,l.tiltX,l.tiltY,l.pointerId,l.pointerType,l.timeStamp,l.isPrimary),p["default"].objectDefineProperty.call(window.Object,n,"target",{get:function(){return e},configurable:!0}),p["default"].objectDefineProperty.call(window.Object,n,"relatedTarget",{get:function(){return t.relatedTarget},configurable:!0}),p["default"].objectDefineProperty.call(window.Object,n,"buttons",{get:function(){return t.buttons}})):(l.bubbles=!0,l.cancelable=!0,n=new p["default"].WindowPointerEvent(a,l)),this._raiseDispatchEvent(e,n,l)},e.prototype._dispatchMouseEvent=function(e,t,n){var r=null,o=/mouse(down|up|move|over|out)/;if(f.isIE&&("click"===t.type||"mouseup"===t.type||"mousedown"===t.type)){var i=m.closest(e.parentNode,"button");e.parentNode&&i&&"submit"===p["default"].getAttribute.call(i,"type")&&(e=i)}return g.hasPointerEvents&&o.test(t.type)&&this._dispatchPointerEvent(e,t),r=p["default"].documentCreateEvent.call(document,"MouseEvents"),r.initMouseEvent(t.type,t.canBubble,t.cancelable,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),n&&p["default"].objectDefineProperty.call(window.Object,r,"dataTransfer",{configurable:!0,enumerable:!0,get:function(){return n}}),(f.isFirefox||f.isIE)&&p["default"].objectDefineProperty.call(window.Object,r,"buttons",{get:function(){return t.buttons}}),void 0!==t.which&&f.isWebKit&&p["default"].objectDefineProperty.call(window.Object,r,a["default"].whichPropertyWrapper,{get:function(){return t.which}}),this._raiseDispatchEvent(e,r,t)},e.prototype._dispatchFocusEvent=function(e,t){var n=!f.isIE||f.version>11,r=null,o=C.test(t);return n&&p["default"].WindowFocusEvent?r=new p["default"].WindowFocusEvent(t,{bubbles:o,cancelable:!1,cancelBubble:!1,defaultPrevented:!1}):p["default"].documentCreateEvent&&(r=p["default"].documentCreateEvent.call(document,"FocusEvent"),r.initEvent(t,o,!0)),r?(r[this.DISPATCHED_EVENT_FLAG]=!0,this._raiseDispatchEvent(e,r)):null},e.prototype._dispatchEvent=function(e,t,n,r){var o=null;return p["default"].documentCreateEvent&&(o=p["default"].documentCreateEvent.call(document,"Events"),o.initEvent(t,n,!0)),o?(r&&(o[r]=!0),this._raiseDispatchEvent(e,o)):null},e.prototype._raiseDispatchEvent=function(e,t){var n=m.isElementInIframe(e),r=n?m.getIframeByElement(e):null,o=r?r.contentWindow:window;f.isIE&&11===f.version&&r&&p["default"].objectDefineProperty.call(window.Object,r.contentWindow,"event",{get:function(){return window.event},configurable:!0});var i=e.dispatchEvent(t);return f.isIE11&&delete o.event,i},e.prototype.click=function(e,t){return this._simulateEvent(e,"click",t,{button:g.BUTTON.left,buttons:g.BUTTONS_PARAMETER.leftButton})},e.prototype.nativeClick=function(e,t){this._raiseNativeClick(e,t)},e.prototype.dblclick=function(e,t){return this._simulateEvent(e,"dblclick",t,{button:g.BUTTON.left,buttons:g.BUTTONS_PARAMETER.leftButton})},e.prototype.rightclick=function(e,t){return this._simulateEvent(e,"click",t,{button:g.BUTTON.right,buttons:g.BUTTONS_PARAMETER.rightButton})},e.prototype.contextmenu=function(e,t){return this._simulateEvent(e,"contextmenu",t,{button:g.BUTTON.right,which:g.WHICH_PARAMETER.rightButton,buttons:g.BUTTONS_PARAMETER.rightButton})},e.prototype.mousedown=function(e,t){return t=t||{},t.button=void 0===t.button?g.BUTTON.left:t.button,t.which=void 0===t.which||t.button!==g.BUTTON.right?g.WHICH_PARAMETER.leftButton:g.WHICH_PARAMETER.rightButton,t.buttons=void 0===t.buttons?g.BUTTONS_PARAMETER.leftButton:t.buttons,this._simulateEvent(e,"mousedown",t)},e.prototype.mouseup=function(e,t){return t=t||{},t.button=void 0===t.button?g.BUTTON.left:t.button,t.which=void 0===t.which||t.button!==g.BUTTON.right?g.WHICH_PARAMETER.leftButton:g.WHICH_PARAMETER.rightButton,t.buttons=void 0===t.buttons?g.BUTTONS_PARAMETER.leftButton:t.buttons,this._simulateEvent(e,"mouseup",t)},e.prototype.mouseover=function(e,t){return this._simulateEvent(e,"mouseover",t)},e.prototype.mousemove=function(e,t){return this._simulateEvent(e,"mousemove",t,{cancelable:!1})},e.prototype.mouseout=function(e,t){return this._simulateEvent(e,"mouseout",t)},e.prototype.mouseenter=function(e,t){return this._simulateEvent(e,"mouseenter",t,{canBubble:!1})},e.prototype.mouseleave=function(e,t){return this._simulateEvent(e,"mouseleave",t,{canBubble:!1})},e.prototype.keypress=function(e,t){return this._simulateEvent(e,"keypress",t)},e.prototype.keyup=function(e,t){return this._simulateEvent(e,"keyup",t)},e.prototype.keydown=function(e,t){return this._simulateEvent(e,"keydown",t)},e.prototype.blur=function(e){return this._dispatchFocusEvent(e,"blur")},e.prototype.focus=function(e){return this._dispatchFocusEvent(e,"focus")},e.prototype.focusin=function(e){return this._dispatchFocusEvent(e,"focusin")},e.prototype.focusout=function(e){return this._dispatchFocusEvent(e,"focusout")},e.prototype.storage=function(e,t){return this._simulateEvent(e,"storage",t)},e.prototype.change=function(e){return this._dispatchEvent(e,"change",!0,this.DISPATCHED_EVENT_FLAG)},e.prototype.input=function(e){return this._dispatchEvent(e,"input",!0)},e.prototype.submit=function(e){return this._dispatchEvent(e,"submit",!0)},e.prototype.selectionchange=function(e){return this._dispatchEvent(e,"selectionchange",!1)},e.prototype.touchstart=function(e,t){return this._simulateEvent(e,"touchstart",t)},e.prototype.touchend=function(e,t){return this._simulateEvent(e,"touchend",t)},e.prototype.touchmove=function(e,t){return this._simulateEvent(e,"touchmove",t)},e.prototype.dragstart=function(e,t){return this._simulateEvent(e,"dragstart",t)},e.prototype.drag=function(e,t){return this._simulateEvent(e,"drag",t)},e.prototype.dragenter=function(e,t){return this._simulateEvent(e,"dragenter",t)},e.prototype.dragover=function(e,t){return this._simulateEvent(e,"dragover",t)},e.prototype.dragleave=function(e,t){return this._simulateEvent(e,"dragleave",t)},e.prototype.drop=function(e,t){return this._simulateEvent(e,"drop",t)},e.prototype.dragend=function(e,t){return this._simulateEvent(e,"dragend",t)},e.prototype.isSavedWindowsEventsExists=function(){return this.savedWindowEvents&&this.savedWindowEvents.length},e}();e["default"]=A,t.exports=e["default"]},"unload.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=n("../base"),l=r(a),u=n("../native-methods"),c=r(u),p=n("../../utils/create-property-desc.js"),d=r(p),f=n("../../utils/browser"),h=function(e){function t(n){o(this,t);var r=i(this,e.call(this));return r.BEFORE_UNLOAD_EVENT="hammerhead|event|before-unload",r.BEFORE_BEFORE_UNLOAD_EVENT="hammerhead|event|before-before-unload",r.UNLOAD_EVENT="hammerhead|event|unload",r.listeners=n,r.storedBeforeUnloadReturnValue="",r.prevented=!1,r.storedBeforeUnloadHandler=null,r.beforeUnloadEventName=f.isIOS?"pagehide":"beforeunload",r}return s(t,e),t.prototype._emitBeforeUnloadEvent=function(){this.emit(this.BEFORE_UNLOAD_EVENT,{returnValue:this.storedBeforeUnloadReturnValue,prevented:this.prevented})},t.prototype._onBeforeUnloadHandler=function(e,t){var n=this,r=e;!e&&window.event&&window.event.type===this.beforeUnloadEventName&&(r=window.event),r&&(c["default"].objectDefineProperty.call(this.window.Object,r,"returnValue",(0,d["default"])({get:function(){return n.storedBeforeUnloadReturnValue},set:function(e){n.storedBeforeUnloadReturnValue=e,n.prevented=!f.isFirefox||""!==e}})),c["default"].objectDefineProperty.call(this.window.Object,r,"preventDefault",(0,d["default"])({get:function(){return function(){return n.prevented=!0,!0}},set:function(){}})));var o=e?t(e):t();void 0!==o&&(this.storedBeforeUnloadReturnValue=o,this.prevented=!0)},t.prototype._reattachBeforeUnloadListener=function(){c["default"].windowRemoveEventListener.call(this.window,this.beforeUnloadEventName,this),c["default"].windowAddEventListener.call(this.window,this.beforeUnloadEventName,this)},t.prototype.attach=function(t){var n=this;e.prototype.attach.call(this,t),this.listeners.setEventListenerWrapper(t,[this.beforeUnloadEventName],function(e,t){return n._onBeforeUnloadHandler(e,t)}),this.listeners.addInternalEventListener(t,["unload"],function(){return n.emit(n.UNLOAD_EVENT)}),c["default"].windowAddEventListener.call(t,this.beforeUnloadEventName,this),this.listeners.addInternalEventListener(t,[this.beforeUnloadEventName],function(){return n.emit(n.BEFORE_BEFORE_UNLOAD_EVENT)}),this.listeners.on(this.listeners.EVENT_LISTENER_ATTACHED_EVENT,function(e){e.el===t&&e.eventType===n.beforeUnloadEventName&&n._reattachBeforeUnloadListener()})},t.prototype.setOnBeforeUnload=function(e,t){var n=this;"function"==typeof t?(this.storedBeforeUnloadHandler=t,e["on"+this.beforeUnloadEventName]=function(e){return n._onBeforeUnloadHandler(e,t)},this._reattachBeforeUnloadListener()):(this.storedBeforeUnloadHandler=null,e["on"+this.beforeUnloadEventName]=null)},t.prototype.getOnBeforeUnload=function(){return this.storedBeforeUnloadHandler},t.prototype.handleEvent=function(){this._emitBeforeUnloadEvent()},t}(l["default"]);e["default"]=h,t.exports=e["default"]}},"fetch.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=n("./base"),l=r(a),u=n("./native-methods"),c=r(u),p=n("../../request-pipeline/xhr/headers"),d=r(p),f=n("../utils/url"),h=n("../utils/destination-location"),m=n("../utils/dom"),y=n("../../request-pipeline/xhr/same-origin-policy"),g=c["default"].Request?new c["default"].Request(window.location.toString()).credentials:void 0,v=function(e){function t(){o(this,t);var n=i(this,e.call(this));return n.FETCH_REQUEST_SENT_EVENT="hammerhead|event|fetch-request-sent-event",n}return s(t,e),t._addSpecialHeadersToRequestInit=function(e){var t=e.headers||{},n=e.credentials||g,r=(0,h.getOriginHeader)();return(0,m.isFetchHeaders)(t)?(t.set(d["default"].origin,r),t.set(d["default"].fetchRequestCredentials,n)):(t[d["default"].origin]=r,t[d["default"].fetchRequestCredentials]=n),e.headers=t,e},t._processArguments=function(e){var n=e[0],r="string"==typeof n,o=(0,m.isFetchRequest)(n),i=e[1];r?(e[0]=(0,f.getProxyUrl)(n),i=i||{},e[1]=t._addSpecialHeadersToRequestInit(i)):o&&i&&(e[1]=t._addSpecialHeadersToRequestInit(i))},t._isValidRequestArgs=function(e){return"string"==typeof e[0]||(0,m.isFetchRequest)(e[0])},t._requestIsValid=function(e){if(!t._isValidRequestArgs(e))return!1;var n=null,r=null;return(0,m.isFetchRequest)(e[0])?(n=(0,f.parseProxyUrl)(e[0].url).destUrl,r=e[0].mode):(n=e[0],r=(e[1]||{}).mode),"same-origin"!==r||(0,h.sameOriginCheck)((0,h.get)(),n,!0)},t.prototype._processFetchPromise=function(e){var n=e.then,r=this.window;e.then=function(){for(var e=arguments.length,o=Array(e),i=0;i<e;i++)o[i]=arguments[i];var s=o[0];return o[0]=function(e){c["default"].objectDefineProperty.call(r.Object,e,"type",{get:function(){return t._getResponseType(e)},set:function(){},configurable:!0});var n=e.status===y.SAME_ORIGIN_CHECK_FAILED_STATUS_CODE?0:e.status;return c["default"].objectDefineProperty.call(r.Object,e,"status",{get:function(){return n},set:function(){},configurable:!0}),s?s.apply(this,arguments):e},n.apply(this,o)}},t._getResponseType=function(e){var t=(0,f.parseProxyUrl)(e.url),n=t&&t.destUrl,r=(0,h.sameOriginCheck)((0,h.get)(),n,!0);return r?"basic":0===e.status?"opaque":"cors"},t.prototype.attach=function(n){e.prototype.attach.call(this,n,n.document);var r=this;n.fetch&&(n.Request=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t._processArguments(n),1===n.length?new c["default"].Request(n[0]):new c["default"].Request(n[0],n[1])},n.Request.prototype=c["default"].Request.prototype,n.fetch=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];if(!n.length)return c["default"].fetch.apply(this);if(!t._requestIsValid(n))return r.window.Promise.reject(new TypeError);t._processArguments(n);var i=c["default"].fetch.apply(this,n);return r._processFetchPromise(i),r.emit(r.FETCH_REQUEST_SENT_EVENT,i),i})},t}(l["default"]);e["default"]=v,t.exports=e["default"]},"iframe.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("../../processing/dom/internal-properties"),u=o(l),c=n("./base"),p=o(c),d=n("../settings"),f=o(d),h=n("../sandbox/native-methods"),m=o(h),y=n("../../processing/dom"),g=n("../utils/dom"),v=n("../utils/browser"),E=n("../utils/url"),b=n("../json"),S=r(b),w="hammerhead|iframe-window-inited",_=function(e){function t(n,r){i(this,t);var o=s(this,e.call(this));return o.RUN_TASK_SCRIPT_EVENT="hammerhead|event|run-task-script",o.EVAL_HAMMERHEAD_SCRIPT_EVENT="hammerhead|event|eval-hammerhead-script",o.EVAL_EXTERNAL_SCRIPT_EVENT="hammerhead|event|eval-external-script",o.IFRAME_DOCUMENT_CREATED_EVENT="hammerhead|event|iframe-document-created",o.cookieSandbox=r,o.on(o.RUN_TASK_SCRIPT_EVENT,o.iframeReadyToInitHandler),n.on(n.IFRAME_ADDED_TO_DOM_EVENT,function(e){return o.processIframe(e.iframe)}),o.iframeNativeMethodsBackup=null,o}return a(t,e),t.prototype._shouldSaveIframeNativeMethods=function(e){if(!v.isWebKit)return!1;var t=this.nativeMethods.getAttribute.call(e,"src");return(0,y.isJsProtocol)(t)},t.prototype._ensureIframeNativeMethodsForChrome=function(e){!this.iframeNativeMethodsBackup&&this._shouldSaveIframeNativeMethods(e)?this.iframeNativeMethodsBackup=new this.nativeMethods.constructor(e.contentDocument,e.contentWindow):this.iframeNativeMethodsBackup&&(this.iframeNativeMethodsBackup.restoreDocumentMeths(e.contentDocument,e.contentWindow),this.iframeNativeMethodsBackup=null)},t.prototype._ensureIframeNativeMethodsForIE=function(e){var t=e.contentWindow[u["default"].iframeNativeMethods];t&&(t.restoreDocumentMeths(e.contentDocument,e.contentWindow),delete e.contentWindow[u["default"].iframeNativeMethods])},t.prototype._raiseReadyToInitEvent=function(e){if((0,g.isIframeWithoutSrc)(e)){var n=t.isIframeInitialized(e),r=e.contentWindow[w];n&&!r?(this._ensureIframeNativeMethodsForChrome(e),this._ensureIframeNativeMethodsForIE(e),m["default"].objectDefineProperty.call(this.window.Object,e.contentWindow,w,{value:!0}),this.emit(this.EVAL_HAMMERHEAD_SCRIPT_EVENT,{iframe:e}),this.emit(this.EVAL_EXTERNAL_SCRIPT_EVENT,{iframe:e}),this.emit(this.RUN_TASK_SCRIPT_EVENT,{iframe:e}),e.contentWindow[u["default"].processDomMethodName]()):n||e.contentDocument.write.toString()===this.nativeMethods.documentWrite.toString()&&this.emit(this.IFRAME_DOCUMENT_CREATED_EVENT,{iframe:e})}},t.isIframeInitialized=function(e){var t=v.isFirefox&&"uninitialized"===e.contentWindow.document.readyState;return!t&&!!e.contentDocument.documentElement},t.isWindowInited=function(e){return e[w]},t.prototype.iframeReadyToInitHandler=function(e){var t=f["default"].get().iframeTaskScriptTemplate,n=function(e){return e.replace(/\$/g,"$$$$")},r=S.stringify(this.cookieSandbox.getCookie()),o=f["default"].get().referer||this.window.location.toString(),i=S.stringify(t),s=t.replace("{{{cookie}}}",n(r)).replace("{{{referer}}}",n(o)).replace("{{{iframeTaskScriptTemplate}}}",n(i));e.iframe.contentWindow.eval.call(e.iframe.contentWindow,s)},t.prototype.onIframeBeganToRun=function(e){this._raiseReadyToInitEvent(e)},t.prototype.processIframe=function(e){var t=this;if(!(0,g.isShadowUIElement)(e)){var n=this.nativeMethods.getAttribute.call(e,"src");if(n&&(0,E.isSupportedProtocol)(n))(0,g.isElementInDocument)(e)&&this._raiseReadyToInitEvent(e),this.nativeMethods.addEventListener.call(e,"load",function(){return t._raiseReadyToInitEvent(e)});else if(e.contentWindow){this._raiseReadyToInitEvent(e);var r=function(){e.contentWindow&&t._raiseReadyToInitEvent(e)};this.nativeMethods.addEventListener.call(e,"load",r),v.isFirefox&&this.nativeMethods.documentAddEventListener.call(e.contentDocument,"ready",r)}else{var o=function i(){(0,g.isCrossDomainIframe)(e)?t.nativeMethods.removeEventListener.call(e,"load",i):t._raiseReadyToInitEvent(e)};(0,g.isElementInDocument)(e)&&this._raiseReadyToInitEvent(e),this.nativeMethods.addEventListener.call(e,"load",o)}!v.isWebKit&&e.contentDocument&&this.nativeMethods.documentAddEventListener.call(e.contentDocument,"DOMContentLoaded",function(){t._raiseReadyToInitEvent(e)})}},t}(p["default"]);e["default"]=_,t.exports=e["default"]},"index.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("../../processing/dom/internal-properties"),u=o(l),c=n("./code-instrumentation"),p=o(c),d=n("./cookie"),f=o(d),h=n("./event/element-editing-watcher"),m=o(h),y=n("./event"),g=o(y),v=n("./event/simulator"),E=o(v),b=n("./iframe"),S=o(b),w=n("./event/listeners"),_=o(w),x=n("./event/message"),T=o(x),C=n("./node/mutation"),A=o(C),I=n("./node"),P=o(I),N=n("./base"),M=o(N),O=n("./shadow-ui"),j=o(O),k=n("./timers"),L=o(k),R=n("./event/unload"),D=o(R),U=n("./upload"),F=o(U),B=n("./xhr"),H=o(B),V=n("./fetch"),W=o(V),q=n("./storages"),G=o(q),X=n("./electron"),K=o(X),$=n("./console"),z=o($),Y=n("../utils/browser"),Q=n("../utils/html"),J=n("./code-instrumentation/properties/anchor"),Z=n("./backup"),ee=n("../utils/url-resolver"),te=o(ee),ne=n("./windows-storage"),re=r(ne),oe=n("../sandbox/native-methods"),ie=o(oe),se=function(e){function t(){i(this,t);var n=s(this,e.call(this));(0,Z.create)(window,n),re.add(window);var r=new _["default"],o=new A["default"],a=new D["default"](r),l=new T["default"](r,a),u=new E["default"],c=new m["default"](u),d=new L["default"];return n.storageSandbox=new G["default"](r,a,u),n.cookie=new f["default"],n.xhr=new H["default"](n.cookie),n.fetch=new W["default"],n.iframe=new S["default"](o,n.cookie),n.shadowUI=new j["default"](o,l,n.iframe),n.upload=new F["default"](r,u,n.shadowUI),n.event=new g["default"](r,u,c,a,l,n.shadowUI,d),n.codeInstrumentation=new p["default"](o,n.event,n.cookie,n.upload,n.shadowUI,n.storageSandbox),n.node=new P["default"](o,n.iframe,n.event,n.upload,n.shadowUI),n.console=new z["default"](l),n.unload=a,Y.isElectron&&(n.electron=new K["default"]),n.windowStorage=re,n}return a(t,e),t._canUseSandbox=function(e){try{e.off()}catch(t){return!1}return!0},t.prototype._refreshNativeMethods=function(e,t){var n=this,r=function(e){try{return e()}catch(t){return!0}},o=r(function(){return!t.createElement||n.nativeMethods.createElement.toString()===t.createElement.toString()}),i=r(function(){var e=n.nativeMethods.createElement.call(t,"div");return e.getAttribute.toString()===n.nativeMethods.getAttribute.toString()}),s=r(function(){return n.nativeMethods.setTimeout.call(e,function(){},0),e.XMLHttpRequest.prototype.open.toString()===n.nativeMethods.xhrOpen.toString()});o&&this.nativeMethods.refreshDocumentMeths(t),i&&this.nativeMethods.refreshElementMeths(t),s&&this.nativeMethods.refreshWindowMeths(e)},t.prototype._restoreDocumentMethodsFromProto=function(e){var t=e.constructor.prototype;e.createDocumentFragment=e.createDocumentFragment||t.createDocumentFragment,e.createElement=e.createElement||t.createElement,e.createElementNS=e.createElementNS||t.createElementNS,e.open=e.open||t.open,e.close=e.close||t.close,e.write=e.write||t.write,e.writeln=e.writeln||t.writeln,e.elementFromPoint=e.elementFromPoint||t.elementFromPoint,e.getElementById=e.getElementById||t.getElementById,e.getElementsByClassName=e.getElementsByClassName||t.getElementsByClassName,e.getElementsByName=e.getElementsByName||t.getElementsByName,e.getElementsByTagName=e.getElementsByTagName||t.getElementsByTagName,e.querySelector=e.querySelector||t.querySelector,e.querySelectorAll=e.querySelectorAll||t.querySelectorAll,e.addEventListener=e.addEventListener||t.addEventListener,e.removeEventListener=e.removeEventListener||t.removeEventListener},t.prototype.onIframeDocumentRecreated=function(e){if(e){var n=(0,Z.get)(e.contentWindow);n&&t._canUseSandbox(n)?n.reattach(e.contentWindow,e.contentDocument):(e.contentWindow[u["default"].iframeNativeMethods]&&delete e.contentWindow[u["default"].iframeNativeMethods],this.nativeMethods.restoreDocumentMeths(e.contentDocument),this.iframe.onIframeBeganToRun(e))}},t.prototype.reattach=function(e,t){(Y.isIE||Y.isWebKit)&&this._refreshNativeMethods(e,t),te["default"].init(t),this.event.initDocumentListening(t),Y.isWebKit&&e.top===e&&this.event.listeners.restartElementListening(e),this.shadowUI.attach(e),this.codeInstrumentation.attach(e),this.node.doc.attach(e,t),this.console.attach(e),this._restoreDocumentMethodsFromProto(t)},t.prototype.attach=function(t){var n=this;e.prototype.attach.call(this,t),te["default"].init(this.document),this.iframe.on(this.iframe.EVAL_HAMMERHEAD_SCRIPT_EVENT,function(e){return initHammerheadClient(e.iframe.contentWindow,!0)}),this.node.mutation.on(this.node.mutation.DOCUMENT_CLEANED_EVENT,function(e){return n.reattach(e.window,e.document)}),this.iframe.attach(t),this.xhr.attach(t),this.fetch.attach(t),this.storageSandbox.attach(t),this.codeInstrumentation.attach(t),this.shadowUI.attach(t),this.event.attach(t),this.node.attach(t),this.upload.attach(t),this.cookie.attach(t),this.console.attach(t),this.electron&&this.electron.attach(t),this.unload.on(this.unload.UNLOAD_EVENT,function(){return n.dispose()})},t.prototype._removeInternalProperties=function(){var e=this.event.listeners.listeningCtx.removeListeningElement;e(this.window),e(this.document);for(var t=ie["default"].querySelectorAll.call(this.document,"*"),n=0;n<t.length;n++){var r=t[n];delete r[u["default"].processedContext],e(r)}},t.prototype.dispose=function(){this.event.hover.lastHoveredElement=null,this.event.focusBlur.lastFocusedElement=null,(0,Q.dispose)(),(0,J.dispose)(),te["default"].dispose(this.document),this.storageSandbox.dispose(),this._removeInternalProperties()},t}(M["default"]);e["default"]=se,t.exports=e["default"]},"native-methods.js":function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function e(t,n){r(this,e),this.refreshDocumentMeths(t),this.refreshElementMeths(t,n),this.refreshWindowMeths(n)}return e.prototype.refreshDocumentMeths=function(e){e=e||document;var t=e.constructor.prototype;this.createDocumentFragment=e.createDocumentFragment||t.createDocumentFragment,this.createElement=e.createElement||t.createElement,this.createElementNS=e.createElementNS||t.createElementNS,this.documentOpen=e.open||t.open,this.documentClose=e.close||t.close,this.documentWrite=e.write||t.write,this.documentWriteLn=e.writeln||t.writeln,this.elementFromPoint=e.elementFromPoint||t.elementFromPoint,this.caretRangeFromPoint=e.caretRangeFromPoint||t.caretRangeFromPoint,this.caretPositionFromPoint=e.caretPositionFromPoint||t.caretPositionFromPoint,this.getElementById=e.getElementById||t.getElementById,this.getElementsByClassName=e.getElementsByClassName||t.getElementsByClassName,this.getElementsByName=e.getElementsByName||t.getElementsByName,this.getElementsByTagName=e.getElementsByTagName||t.getElementsByTagName,this.querySelector=e.querySelector||t.querySelector,this.querySelectorAll=e.querySelectorAll||t.querySelectorAll,this.documentAddEventListener=e.addEventListener||t.addEventListener,this.documentRemoveEventListener=e.removeEventListener||t.removeEventListener,this.documentCreateEvent=e.createEvent||t.createEvent,this.documentCreateTouch=e.createTouch||t.createTouch,this.documentCreateTouchList=e.createTouchList||t.createTouchList},e.prototype.refreshElementMeths=function(e,t){var n=this;t=t||window;var r=function(t){return n.createElement.call(e||document,t)},o=r("div");this.appendChild=o.appendChild,this.replaceChild=o.replaceChild,this.cloneNode=o.cloneNode,this.elementGetElementsByClassName=o.getElementsByClassName,this.elementGetElementsByTagName=o.getElementsByTagName,this.elementQuerySelector=o.querySelector,this.elementQuerySelectorAll=o.querySelectorAll,this.getAttribute=o.getAttribute,this.getAttributeNS=o.getAttributeNS,this.insertAdjacentHTML=o.insertAdjacentHTML,this.insertBefore=o.insertBefore,this.insertCell=r("tr").insertCell,this.insertTableRow=r("table").insertRow,this.insertTBodyRow=r("tbody").insertRow,this.removeAttribute=o.removeAttribute,this.removeAttributeNS=o.removeAttributeNS,this.removeChild=o.removeChild,this.setAttribute=o.setAttribute,this.setAttributeNS=o.setAttributeNS,this.hasAttribute=o.hasAttribute,this.hasAttributeNS=o.hasAttributeNS,this.hasAttributes=o.hasAttributes,this.addEventListener=o.addEventListener,this.removeEventListener=o.removeEventListener,this.blur=o.blur,this.click=o.click,this.dispatchEvent=o.dispatchEvent,this.focus=o.focus,this.select=window.TextRange?r("body").createTextRange().select:null,this.setSelectionRange=r("input").setSelectionRange,this.textAreaSetSelectionRange=r("textarea").setSelectionRange,this.svgFocus=t.SVGElement?t.SVGElement.prototype.focus:this.focus,this.svgBlur=t.SVGElement?t.SVGElement.prototype.blur:this.blur},e.prototype.refreshWindowMeths=function(e){e=e||window;var t=e.constructor.prototype;this.eval=e.eval,this.formSubmit=e.HTMLFormElement.prototype.submit,this.documentFragmentQuerySelector=e.DocumentFragment.prototype.querySelector,this.documentFragmentQuerySelectorAll=e.DocumentFragment.prototype.querySelectorAll,this.preventDefault=e.Event.prototype.preventDefault,this.historyPushState=e.history.pushState,this.historyReplaceState=e.history.replaceState,this.windowDispatchEvent=e.dispatchEvent,this.postMessage=e.postMessage||t.postMessage,this.windowOpen=e.open||t.open,this.setTimeout=e.setTimeout||t.setTimeout,this.setInterval=e.setInterval||t.setInterval,this.clearTimeout=e.clearTimeout||t.clearTimeout,this.clearInterval=e.clearInterval||t.clearInterval,e.navigator.registerProtocolHandler&&(this.registerProtocolHandler=e.navigator.registerProtocolHandler),e.navigator.sendBeacon&&(this.sendBeacon=e.navigator.sendBeacon),this.xhrAbort=e.XMLHttpRequest.prototype.abort,this.xhrOpen=e.XMLHttpRequest.prototype.open,this.xhrSend=e.XMLHttpRequest.prototype.send,this.xhrAddEventListener=e.XMLHttpRequest.prototype.addEventListener,this.xhrRemoveEventListener=e.XMLHttpRequest.prototype.removeEventListener,this.xhrGetResponseHeader=e.XMLHttpRequest.prototype.getResponseHeader,this.xhrGetAllResponseHeaders=e.XMLHttpRequest.prototype.getAllResponseHeaders,this.xhrSetRequestHeader=e.XMLHttpRequest.prototype.setRequestHeader,this.xhrOverrideMimeType=e.XMLHttpRequest.prototype.overrideMimeType,this.xhrDispatchEvent=e.XMLHttpRequest.prototype.dispatchEvent;try{this.registerServiceWorker=e.navigator.serviceWorker.register}catch(n){this.registerServiceWorker=null}this.createContextualFragment=e.Range.prototype.createContextualFragment;var r=e.performance,o=e.performance.now||e.Performance.prototype.now;this.performanceNow=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.apply(r,t)},this.fetch=e.fetch,this.Request=e.Request,this.Headers=e.Headers,this.windowAddEventListener=e.addEventListener||t.addEventListener,this.windowRemoveEventListener=e.removeEventListener||t.removeEventListener,this.WindowPointerEvent=e.PointerEvent||t.PointerEvent,this.WindowMSPointerEvent=e.MSPointerEvent||t.MSPointerEvent,this.WindowTouch=e.Touch||t.Touch,this.WindowTouchEvent=e.TouchEvent||t.TouchEvent,this.WindowKeyboardEvent=e.KeyboardEvent||t.KeyboardEvent,this.WindowFocusEvent=e.FocusEvent||t.FocusEvent,this.canvasContextDrawImage=e.CanvasRenderingContext2D.prototype.drawImage,this.formDataAppend=e.FormData.prototype.append,this.date=e.Date,this.dateNow=e.Date.now,this.objectToString=e.Object.prototype.toString,this.objectAssign=e.Object.assign,this.objectKeys=e.Object.keys,this.objectDefineProperty=e.Object.defineProperty,this.objectDefineProperties=e.Object.defineProperties,this.objectCreate=e.Object.create,this.objectIsExtensible=e.Object.isExtensible,this.objectIsFrozen=e.Object.isFrozen,this.objectGetOwnPropertyDescriptor=e.Object.getOwnPropertyDescriptor,this.DOMParserParseFromString=e.DOMParser.prototype.parseFromString;var i=e.Object.getOwnPropertyDescriptor(e.HTMLInputElement.prototype,"value"),s=e.Object.getOwnPropertyDescriptor(e.HTMLTextAreaElement.prototype,"value");if(i&&"function"==typeof i.set&&(this.inputValueSetter=i.set),s&&"function"==typeof s.set&&(this.textAreaValueSetter=s.set),e.WebSocket){var a=e.Object.getOwnPropertyDescriptor(window.WebSocket.prototype,"url");a&&a.get&&a.configurable&&(this.webSocketUrlGetter=a.get)}if(e.MessageEvent){var l=e.Object.getOwnPropertyDescriptor(window.MessageEvent.prototype,"origin");l&&l.get&&l.configurable&&(this.messageEventOriginGetter=l.get)}e.CSSStyleDeclaration&&(this.CSSStyleDeclarationGetPropertyValue=e.CSSStyleDeclaration.prototype.getPropertyValue,this.CSSStyleDeclarationSetProperty=e.CSSStyleDeclaration.prototype.setProperty,this.CSSStyleDeclarationRemoveProperty=e.CSSStyleDeclaration.prototype.removeProperty),e.MSStyleCSSProperties&&(this.MSStyleCSSPropertiesGetPropertyValue=e.MSStyleCSSProperties.prototype.getPropertyValue,this.MSStyleCSSPropertiesSetProperty=e.MSStyleCSSProperties.prototype.setProperty,this.MSStyleCSSPropertiesRemoveProperty=e.MSStyleCSSProperties.prototype.removeProperty),e.CSS2Property&&(this.CSS2PropertyGetPropertyValue=e.CSS2Property.prototype.getPropertyValue,this.CSS2PropertySetProperty=e.CSS2Property.prototype.setProperty,this.CSS2PropertyRemoveProperty=e.CSS2Property.prototype.removeProperty),this.console=e.console,this.console&&(this.consoleMeths={log:e.console.log,warn:e.console.warn,error:e.console.error,info:e.console.info}),this.refreshClasses(e)},e.prototype.refreshClasses=function(e){this.windowClass=e.Window,this.documentClass=e.Document,this.locationClass=e.Location,this.styleClass=e.CSSStyleDeclaration||e.CSS2Properties||e.MSStyleCSSProperties,this.styleSheetClass=e.CSSStyleSheet,this.elementClass=e.Element,this.svgElementClass=e.SVGElement,this.Worker=e.Worker,this.Blob=e.Blob,this.XMLHttpRequest=e.XMLHttpRequest,this.Image=e.Image,this.Function=e.Function,this.functionToString=e.Function.toString,this.FontFace=e.FontFace,this.StorageEvent=e.StorageEvent,this.MutationObserver=e.MutationObserver,this.EventSource=e.EventSource,this.WebSocket=e.WebSocket,e.DataTransfer&&(this.DataTransfer=e.DataTransfer),e.DataTransferItemList&&(this.DataTransferItemList=e.DataTransferItemList),e.DataTransferItem&&(this.DataTransferItem=e.DataTransferItem),e.FileList&&(this.FileList=e.FileList)},e.prototype.refreshElectronMeths=function(e){return(!this.createScript||this.createScript.toString()===e.createScript.toString())&&(this.createScript=e.createScript,this.runInDebugContext=e.runInDebugContext,this.runInContext=e.runInContext,this.runInNewContext=e.runInNewContext,this.runInThisContext=e.runInThisContext,!0)},e.prototype.restoreDocumentMeths=function(e){e.createDocumentFragment=this.createDocumentFragment,e.createElement=this.createElement,e.createElementNS=this.createElementNS,e.open=this.documentOpen,e.close=this.documentClose,e.write=this.documentWrite,e.writeln=this.documentWriteLn,e.elementFromPoint=this.elementFromPoint,e.caretRangeFromPoint=this.caretRangeFromPoint,e.caretPositionFromPoint=this.caretPositionFromPoint,e.getElementById=this.getElementById,e.getElementsByClassName=this.getElementsByClassName,e.getElementsByName=this.getElementsByName,e.getElementsByTagName=this.getElementsByTagName,e.querySelector=this.querySelector,e.querySelectorAll=this.querySelectorAll,e.addEventListener=this.documentAddEventListener,e.removeEventListener=this.documentRemoveEventListener,e.createEvent=this.documentCreateEvent,e.createTouch=this.documentCreateTouch,e.createTouchList=this.documentCreateTouchList},e}();e["default"]=new o,t.exports=e["default"]},node:{document:{"index.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("../../base"),u=o(l),c=n("../../iframe"),p=o(c),d=n("../../native-methods"),f=o(d),h=n("../../../dom-processor"),m=o(h),y=n("../../../utils/url"),g=r(y),v=n("../../../utils/browser"),E=n("../../../utils/dom"),b=n("./writer"),S=o(b),w=n("./../../shadow-ui"),_=o(w),x=function(e){function t(n){i(this,t);var r=s(this,e.call(this));return r.nodeSandbox=n,r.documentWriter=null,r}return a(t,e),t.prototype._isUninitializedIframeWithoutSrc=function(e){var t=(0,E.getFrameElement)(e);return e!==e.top&&t&&(0,E.isIframeWithoutSrc)(t)&&!p["default"].isIframeInitialized(t)},t.prototype._beforeDocumentCleaned=function(){this.nodeSandbox.mutation.onBeforeDocumentCleaned({document:this.document})},t.prototype._onDocumentClosed=function(){this.nodeSandbox.mutation.onDocumentClosed({document:this.document})},t.prototype._overridedDocumentWrite=function(e,t){var n="loading"!==this.document.readyState&&"uninitialized"!==this.document.readyState;n&&this._beforeDocumentCleaned();var r=this.documentWriter.write(e,t,n);return n||this.nodeSandbox.processNodes(null,this.document),r},t.prototype._needToUpdateDocumentWriter=function(e,t){try{return!this.documentWriter||this.window!==e||this.document!==t}catch(n){return!0}},t.prototype.attach=function(t,n){var r=this;this._needToUpdateDocumentWriter(t,n)&&(this.documentWriter=new S["default"](t,n),this.nodeSandbox.mutation.on(this.nodeSandbox.mutation.BEFORE_DOCUMENT_CLEANED_EVENT,function(){r.documentWriter=new S["default"](t,n)})),e.prototype.attach.call(this,t,n);var o=this;n.open=function(){for(var e=arguments.length,o=Array(e),i=0;i<e;i++)o[i]=arguments[i];var s=r._isUninitializedIframeWithoutSrc(t);s||r._beforeDocumentCleaned();var a=f["default"].documentOpen.apply(n,o);return s?r.attach(t,n):r.nodeSandbox.mutation.onDocumentCleaned({window:t,document:n}),a},n.close=function(){for(var e=arguments.length,o=Array(e),i=0;i<e;i++)o[i]=arguments[i];v.isIE&&!p["default"].isWindowInited(t)&&f["default"].restoreDocumentMeths(n),"string"==typeof n.designMode&&"on"===n.designMode.toLowerCase()&&_["default"].removeSelfRemovingScripts(n);var s=f["default"].documentClose.apply(n,o);return r._isUninitializedIframeWithoutSrc(t)||r._onDocumentClosed(),s},n.createElement=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=f["default"].createElement.apply(n,t);return m["default"].processElement(i,g.convertToProxyUrl),r.nodeSandbox.processNodes(i),i},n.createElementNS=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=f["default"].createElementNS.apply(n,t);return m["default"].processElement(i,g.convertToProxyUrl),r.nodeSandbox.processNodes(i),i},n.write=function(){return o._overridedDocumentWrite(arguments)},n.writeln=function(){return o._overridedDocumentWrite(arguments,!0)},n.createDocumentFragment=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=f["default"].createDocumentFragment.apply(n,t);return o.nodeSandbox.processNodes(i),i}},t}(u["default"]);e["default"]=x,t.exports=e["default"]},"writer.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n("../../native-methods"),a=o(s),l=n("../../../utils/html"),u=r(l),c=n("../../../utils/dom"),p=n("../../../utils/browser"),d=n("../../../../shadow-ui/class-name"),f=o(d),h=n("../../../../processing/script"),m=n("../../../../processing/style"),y=o(m),g=n("../../../utils/url"),v=n("../../../../processing/dom/internal-properties"),E=o(v),b=Array.prototype.join,S="hammerhead_write_marker_begin",w="hammerhead_write_marker_end",_="<"+S+"></"+S+">",x="<"+w+"></"+w+">",T=new RegExp("^[\\S\\s]*"+_,"g"),C=new RegExp(x+"[\\S\\s]*$","g"),A=/^<[^>]+>/g,I=/<\/[^<>]+>$/g,P=/<\/?(?:[A-Za-z][^>]*)?$/g,N="hammerhead|unclosed-element-flag",M=('\n    <script class="'+f["default"].selfRemovingScript+'" type="text/javascript">\n        (function () {\n            var hammerhead = window["'+E["default"].hammerhead+'"];\n            var sandbox    = hammerhead && hammerhead.sandbox;\n            var script     = document.currentScript || document.scripts[document.scripts.length - 1];\n\n            if (!sandbox) {\n                try {\n                    sandbox = window.parent["'+E["default"].hammerhead+"\"].get('./sandbox/backup').get(window);\n                } catch(e) {}\n            }\n\n            if (sandbox) {\n                sandbox.node.mutation.onDocumentCleaned({\n                    window: window,\n                    document: document\n                });\n\n                /* NOTE: B234357 */\n                sandbox.node.processNodes(null, document);\n            }\n\n            script.parentNode.removeChild(script);\n        })();\n    </script>").replace(/\n\s*/g,""),O=function(){
function e(t,n){i(this,e),this.window=t,this.document=n,this.pending="",this.parentTagChain=[],this.isBeginMarkerInDOM=!1,this.isEndMarkerInDOM=!1,this.isClosingContentEl=!1,this.isNonClosedComment=!1,this.isAddContentToEl=!1,this.contentForProcessing="",this.nonClosedEl=null,this.cachedStartsWithClosingTagRegExps={}}return e.prototype._cutPending=function(e){var t=e.match(P);return this.pending=t?t[0]:"",this.pending?e.substring(0,e.length-this.pending.length):e},e.prototype._wrapHtmlChunk=function(e){var t=this.parentTagChain.length?"<"+this.parentTagChain.join("><")+">":"";this.isNonClosedComment&&(t+="<!--");var n=t+_+e+x;return n+"-->"},e.prototype._unwrapHtmlChunk=function(e){return e?(e=e.replace(T,"").replace(C,""),this.isBeginMarkerInDOM||(e=this.isNonClosedComment?e.slice(4):e.replace(A,"")),this.isEndMarkerInDOM||(e=this.isNonClosedComment?e.slice(0,-3):e.replace(I,"")),!this.isBeginMarkerInDOM&&this.isEndMarkerInDOM&&(this.isNonClosedComment=!1),e):e},e._setUnclosedElementFlag=function(e){((0,c.isScriptElement)(e)||(0,c.isStyleElement)(e))&&(e[N]=!0)},e.hasUnclosedElementFlag=function(e){return!!e[N]},e._searchBeginMarker=function(e){var t=a["default"].elementQuerySelector.call(e,S);if(t)return t;for(t=e;t.firstElementChild;)t=t.firstElementChild;return t.parentNode.firstChild!==t?t=t.parentNode.firstChild:(0,c.isCommentNode)(t.firstChild)&&(t=t.firstChild),t},e._searchEndMarker=function(e){var t=a["default"].elementQuerySelector.call(e,w);if(t)return t;for(t=e;t.lastElementChild;)t=t.lastElementChild;return t.parentNode.lastChild!==t?t=t.parentNode.lastChild:(0,c.isCommentNode)(t.lastChild)&&(t=t.lastChild),t},e.prototype._updateParentTagChain=function(e,t){var n=(0,c.getTagName)(t)!==w?t:t.parentNode;for((0,c.isCommentNode)(t)&&(this.isNonClosedComment=!0,n=t.parentNode),this.parentTagChain=[];n!==e;)this.parentTagChain.unshift((0,c.getTagName)(n)),n=n.parentNode},e.prototype._processBeginMarkerInContent=function(t){var n=t;e._setUnclosedElementFlag(n),this.isClosingContentEl&&((0,c.isScriptElement)(n)||(0,c.isStyleElement)(n))?(this.contentForProcessing=this.nonClosedEl.textContent+n.textContent.replace(T,""),n.textContent=""):n.textContent=n.textContent.replace(T,""),t=a["default"].createElement.call(document,S),a["default"].insertBefore.call(n.parentNode,t,n)},e._createStartsWithClosingTagRegExp=function(e){for(var t=[e.charAt(e.length-1),"?"],n=e.length-2;n>-1;n--)t.unshift("(?:",e.charAt(n)),t.push(")?");return t.unshift("^</"),t.push("$"),new RegExp(t.join(""),"i")},e.prototype._getStartsWithClosingTagRegExp=function(t){return t=t.toLowerCase(),this.cachedStartsWithClosingTagRegExps[t]||(this.cachedStartsWithClosingTagRegExps[t]=e._createStartsWithClosingTagRegExp(t)),this.cachedStartsWithClosingTagRegExps[t]},e.prototype._processEndMarkerInContent=function(t){var n=t;if(e._setUnclosedElementFlag(n),n.textContent=n.textContent.replace(C,""),t=a["default"].createElement.call(document,w),this.pending){var r=this._getStartsWithClosingTagRegExp(n.tagName),o=r.test(this.pending);o||(n.textContent+=this.pending,this.pending="")}a["default"].appendChild.call(n.parentNode,t)},e._addOnDocumentRecreationScript=function(e){var t=a["default"].createElement.call(e.ownerDocument,"span");a["default"].insertBefore.call(e.parentNode,t,e),t.outerHTML=M},e.prototype._prepareDom=function(t,n){var r=e._searchBeginMarker(t),o=e._searchEndMarker(t);this.isBeginMarkerInDOM=(0,c.getTagName)(r)===S,this.isEndMarkerInDOM=(0,c.getTagName)(o)===w,this.isAddContentToEl=r===o,this.isClosingContentEl=!this.isBeginMarkerInDOM&&!this.isAddContentToEl,this.isAddContentToEl||(this._updateParentTagChain(t,o),n&&e._addOnDocumentRecreationScript(o)),this.isBeginMarkerInDOM||this.isEndMarkerInDOM?this.isBeginMarkerInDOM&&!this.isEndMarkerInDOM?this._processEndMarkerInContent(o):!this.isBeginMarkerInDOM&&this.isEndMarkerInDOM&&this._processBeginMarkerInContent(r):(this._processBeginMarkerInContent(r),this._processEndMarkerInContent(o))},e.prototype._processHtmlChunk=function(e,t){var n=this;return e=this._cutPending(this.pending+e),e=this._wrapHtmlChunk(e),e=u.processHtml(e,{prepareDom:function(e){return n._prepareDom(e,t)}}),e=this._unwrapHtmlChunk(e),e&&this.isBeginMarkerInDOM&&(p.isFirefox||p.isIE)&&!u.isPageHtml(e)&&(e=u.INIT_SCRIPT_FOR_IFRAME_TEMPLATE+e),e},e.prototype.write=function(e,t,n){var r=this._processHtmlChunk(b.call(e,""),n);this.nonClosedEl&&this.contentForProcessing&&((0,c.isScriptElement)(this.nonClosedEl)?this.nonClosedEl.textContent=(0,h.processScript)(this.contentForProcessing,!0):(0,c.isStyleElement)(this.nonClosedEl)&&(this.nonClosedEl.textContent=y["default"].process(this.contentForProcessing,g.getProxyUrl,!0)),this.contentForProcessing="");var o=t?a["default"].documentWriteLn:a["default"].documentWrite,i=o.call(this.document,r);if(!this.isEndMarkerInDOM&&!this.isAddContentToEl){for(var s=this.document.documentElement;s.lastElementChild;)s=s.lastElementChild;this.nonClosedEl=s}return i},e}();e["default"]=O,t.exports=e["default"]}},"element.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("../base"),u=o(l),c=n("../node/index"),p=o(c),d=n("../../../processing/dom"),f=o(d),h=n("../native-methods"),m=o(h),y=n("../../dom-processor"),g=o(y),v=n("../../../processing/script"),E=n("../../../processing/style"),b=o(E),S=n("../../utils/url"),w=r(S),_=n("../../utils/dom"),x=r(_),T=n("../upload/hidden-info"),C=r(T),A=n("../../utils/url-resolver"),I=r(A),P=n("../../utils/destination-location"),N=n("../../utils/event"),M=n("../../utils/html"),O=n("../../utils/query-selector"),j=n("../../../utils/url"),k=n("../windows-storage"),L=r(k),R=n("../code-instrumentation/properties/attributes-wrapper"),D=o(R),U=n("../shadow-ui"),F=o(U),B=n("./live-node-list/dom-mutation-tracker"),H=o(B),V=["_blank","_self","_parent","_top"],W=["sandbox","autocomplete","target","style"],q="hammerhead|element|has-load-handler-flag",G=Array.prototype.slice,X=function(e){function t(n,r,o,a,l){i(this,t);var u=s(this,e.call(this));return u.nodeSandbox=n,u.shadowUI=a,u.uploadSandbox=r,u.iframeSandbox=o,u.eventSandbox=l,u.overriddenMethods=null,u.BEFORE_FORM_SUBMIT_EVENT="hammerhead|event|before-form-submit",u.SCRIPT_ELEMENT_ADDED_EVENT="hammerhead|event|script-added",u}return a(t,e),t._isKeywordTarget=function(e){return e=e.toLowerCase(),V.indexOf(e)!==-1},t._onTargetChanged=function(e){var t=x.getTagName(e);if(f["default"].isIframeFlagTag(t)){var n="form"===t?"action":"href",r=f["default"].getStoredAttrName(n);if(e.hasAttribute(r)){var o=e.getAttribute(r);w.isSupportedProtocol(o)&&e.setAttribute(n,o)}}},t.setHasLoadHandlerFlag=function(e){e[q]=!0},t.removeHasLoadHandlerFlag=function(e){delete e[q]},t._setProxiedSrc=function(e){e[q]||(t.setHasLoadHandlerFlag(e),e.src&&e.setAttribute("src",e.src))},t.prototype._getAttributeCore=function(e,t,n){var r=String(t[n?1:0]),o=r.toLowerCase(),i=n?t[0]:null,s=n?m["default"].getAttributeNS:m["default"].getAttribute;if(g["default"].isUrlAttr(e,o,i)||g["default"].EVENTS.indexOf(o)!==-1||W.indexOf(o)!==-1){var a=f["default"].getStoredAttrName(r),l=s.apply(e,n?[i,a]:[a]);if(f["default"].isAddedAutocompleteAttr(o,l))return null;e.hasAttribute(a)&&(t[n?1:0]=a)}return s.apply(e,t)},t.prototype._setAttributeCore=function(e,n,r){var o=r?n[0]:null,i=String(n[r?1:0]),s=i.toLowerCase(),a=r?2:1,l=String(n[a]),u=r?m["default"].setAttributeNS:m["default"].setAttribute,c=x.getTagName(e),p=g["default"].isUrlAttr(e,i,o),d=g["default"].EVENTS.indexOf(i)!==-1,h=!1,y=w.isSpecialPage(l),v=w.isSupportedProtocol(l);if(p&&!v&&!y||d){var E=f["default"].isJsProtocol(l),S=f["default"].getStoredAttrName(i);(p&&E||d)&&(n[a]=f["default"].processJsAttrValue(l,{isJsProtocol:E,isEventAttr:d})),u.apply(e,r?[o,S,l]:[S,l])}else if(p&&(v||y)){var _=f["default"].getStoredAttrName(i);if(u.apply(e,r?[o,_,l]:[_,l]),"img"!==c||e[q]){if(""!==l&&(!y||"a"===c)){var T="iframe"===c||"frame"===c,C="script"===c,A=v&&!(0,P.sameOriginCheck)(location.toString(),l),N=g["default"].getElementResourceType(e),M=C&&e.charset;if("formaction"===s&&(N="f",e.form)){var O=w.parseProxyUrl(e.form.action);O&&(N=O.resourceType)}t._isHrefAttrForBaseElement(e,i)&&x.isElementInDocument(e,this.document)&&I.updateBase(l,this.document),n[a]=T&&A?w.getCrossDomainIframeProxyUrl(l):w.getProxyUrl(l,{resourceType:N,charset:M})}}else!l||y||w.parseProxyUrl(l)||(n[a]=e[this.nodeSandbox.win.FORCE_PROXY_SRC_FOR_IMAGE]?w.getProxyUrl(l):w.resolveUrlAsDest(l))}else if("autocomplete"===s){var k=f["default"].getStoredAttrName(i);u.apply(e,r?[o,k,l]:[k,l]),n[a]="off"}else if("target"===s&&f["default"].isTagWithTargetAttr(c)){var L=this.getTarget(e,l);if(L===e.target)return null;var R=f["default"].getStoredAttrName(i);u.apply(e,r?[o,R,l]:[R,l]),n[a]=L,h=!0}else if("sandbox"===i){var D=f["default"].getStoredAttrName(i),U=l.indexOf("allow-same-origin")!==-1,F=l.indexOf("allow-scripts")!==-1;u.apply(e,r?[o,D,l]:[D,l]),U&&F||(n[a]+=U?"":" allow-same-origin",n[a]+=F?"":" allow-scripts")}else{if("meta"===c&&["http-equiv","content"].indexOf(i)!==-1)return null;if("xlink:href"===s&&g["default"].SVG_XLINK_HREF_TAGS.indexOf(c)!==-1&&x.isSVGElement(e)){var B=f["default"].getStoredAttrName(i);u.apply(e,r?[o,B,l]:[B,l]),j.HASH_RE.test(l)||(n[a]=w.getProxyUrl(l))}else if("style"===s){var H=f["default"].getStoredAttrName(i);u.apply(e,r?[o,H,l]:[H,l]),n[a]=b["default"].process(l,w.getProxyUrl)}}var V=u.apply(e,n);return h&&t._onTargetChanged(e),V},t.prototype._hasAttributeCore=function(e,t,n){var r=n?1:0,o=n?m["default"].hasAttributeNS:m["default"].hasAttribute,i=f["default"].getStoredAttrName("autocomplete"),s=m["default"].getAttribute.call(e,i);return("string"!=typeof t[r]||!f["default"].isAddedAutocompleteAttr(t[r],s))&&o.apply(e,t)},t.prototype._removeAttributeCore=function(e,n,r){var o=String(n[r?1:0]),i=o.toLowerCase(),s=r?m["default"].removeAttributeNS:m["default"].removeAttribute,a=x.getTagName(e),l=void 0;if(g["default"].isUrlAttr(e,i,r?n[0]:null)||"sandbox"===i||"autocomplete"===i||g["default"].EVENTS.indexOf(i)!==-1||"target"===i&&f["default"].isTagWithTargetAttr(a)){var u=f["default"].getStoredAttrName(o);"autocomplete"===i?m["default"].setAttribute.call(e,u,g["default"].AUTOCOMPLETE_ATTRIBUTE_ABSENCE_MARKER):s.apply(e,r?[n[0],u]:[u])}return t._isHrefAttrForBaseElement(e,i)&&I.updateBase((0,P.get)(),this.document),"autocomplete"!==i&&(l=s.apply(e,n)),"target"===i&&f["default"].isTagWithTargetAttr(a)&&t._onTargetChanged(e),l},t.prototype._addNodeCore=function(e){var t=e.parentNode,n=e.args,r=e.nativeFn,o=e.checkBody,i=n[0];this._prepareNodeForInsertion(i,t);var s=null,a=null;if(x.isDocumentFragmentNode(i)&&(a=G.call(i.childNodes)),s=o&&x.isBodyElementWithChildren(t)&&x.isElementInDocument(t)?this.shadowUI.insertBeforeRoot(i):r.apply(t,n),a)for(var l=0,u=a;l<u.length;l++){var c=u[l];this._onElementAdded(c)}else this._onElementAdded(i);return s},t.prototype._prepareNodeForInsertion=function(e,n){x.isTextNode(e)&&t._processTextNodeContent(e,n),this.nodeSandbox.processNodes(e)},t.prototype._createOverridedMethods=function(){var e=this;this.overriddenMethods={insertRow:function(){var t=x.isTableElement(this)?m["default"].insertTableRow:m["default"].insertTBodyRow,n=t.apply(this,arguments);return e.nodeSandbox.processNodes(n),n},insertCell:function(){var t=m["default"].insertCell.apply(this,arguments);return e.nodeSandbox.processNodes(t),t},insertAdjacentHTML:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[0],i=n[1];n.length>1&&null!==i&&(n[1]=(0,M.processHtml)(String(i),{parentTag:this.parentNode&&this.parentNode.tagName})),m["default"].insertAdjacentHTML.apply(this,n),e.nodeSandbox.processNodes(this.parentNode||this),"afterbegin"===o||"beforeend"===o?H["default"].onChildrenChanged(this):this.parentNode&&H["default"].onChildrenChanged(this.parentNode)},formSubmit:function(){return e._ensureTargetContainsExistingBrowsingContext(this),e.emit(e.BEFORE_FORM_SUBMIT_EVENT,{form:this}),m["default"].formSubmit.apply(this,arguments)},insertBefore:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e._addNodeCore({parentNode:this,nativeFn:m["default"].insertBefore,checkBody:!n[1],args:n})},appendChild:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e._addNodeCore({parentNode:this,nativeFn:m["default"].appendChild,checkBody:!0,args:n})},removeChild:function(){var t=arguments[0];e._onRemoveFileInputInfo(t),e._onRemoveIframe(t);var n=m["default"].removeChild.apply(this,arguments);return e._onElementRemoved(t),n},replaceChild:function(){var n=arguments[0],r=arguments[1];x.isTextNode(n)&&t._processTextNodeContent(n,this),e._onRemoveFileInputInfo(r);var o=m["default"].replaceChild.apply(this,arguments);return e._onAddFileInputInfo(n),H["default"].onElementChanged(n),H["default"].onElementChanged(r),o},cloneNode:function(){var t=m["default"].cloneNode.apply(this,arguments);return e.nodeSandbox.processNodes(t),t},getAttribute:function(){return e._getAttributeCore(this,arguments)},getAttributeNS:function(){return e._getAttributeCore(this,arguments,!0)},setAttribute:function(){var n=e._setAttributeCore(this,arguments);return t._refreshAttributesWrappers(this),n},setAttributeNS:function(){var n=e._setAttributeCore(this,arguments,!0);return t._refreshAttributesWrappers(this),n},removeAttribute:function(){var n=e._removeAttributeCore(this,arguments);return t._refreshAttributesWrappers(this),n},removeAttributeNS:function(){var n=e._removeAttributeCore(this,arguments,!0);return t._refreshAttributesWrappers(this),n},querySelector:function(){return"string"==typeof arguments[0]&&(arguments[0]=p["default"].processSelector(arguments[0])),(0,O.getNativeQuerySelector)(this).apply(this,arguments)},querySelectorAll:function(){return"string"==typeof arguments[0]&&(arguments[0]=p["default"].processSelector(arguments[0])),(0,O.getNativeQuerySelectorAll)(this).apply(this,arguments)},hasAttribute:function(){return e._hasAttributeCore(this,arguments,!1)},hasAttributeNS:function(){return e._hasAttributeCore(this,arguments,!0)},hasAttributes:function(){return 2===this.attributes.length&&this.attributes.getNamedItem("autocomplete")&&this.attributes.getNamedItem(f["default"].getStoredAttrName("autocomplete"))?e._hasAttributeCore(this,["autocomplete"],!1):m["default"].hasAttributes.apply(this,arguments)}}},t._processTextNodeContent=function(e,t){t.tagName&&(x.isScriptElement(t)?e.data=(0,v.processScript)(e.data,!0):x.isStyleElement(t)&&(e.data=b["default"].process(e.data,w.getProxyUrl)))},t._isHrefAttrForBaseElement=function(e,t){return x.isBaseElement(e)&&"href"===t},t._removeFileInputInfo=function(e){C.removeInputInfo(e)},t._refreshAttributesWrappers=function(e){D["default"].refreshWrappers(e)},t._hasShadowUIParentOrContainsShadowUIClassPostfix=function(e){return e.parentNode&&x.isShadowUIElement(e.parentNode)||F["default"].containsShadowUIClassPostfix(e)},t.prototype._isFirstBaseTagOnPage=function(e){return m["default"].querySelector.call(this.document,"base")===e},t.prototype._onAddFileInputInfo=function(e){if(x.isDomElement(e))for(var t=x.getFileInputs(e),n=0;n<t.length;n++){var r=t[n];this.addFileInputInfo(r)}},t.prototype._onRemoveFileInputInfo=function(e){x.isDomElement(e)&&(x.isFileInput(e)?t._removeFileInputInfo(e):x.find(e,"input[type=file]",t._removeFileInputInfo))},t.prototype._onRemoveIframe=function(e){x.isDomElement(e)&&x.isIframeElement(e)&&L.remove(e.contentWindow)},t.prototype._onElementAdded=function(e){if(t._hasShadowUIParentOrContainsShadowUIClassPostfix(e)&&F["default"].markElementAndChildrenAsShadow(e),(x.isDomElement(e)||x.isDocument(e))&&x.isElementInDocument(e)){for(var n=x.getIframes(e),r=0;r<n.length;r++){var o=n[r];this.onIframeAddedToDOM(o),L.add(o.contentWindow)}for(var i=x.getScripts(e),s=0;s<i.length;s++){var a=i[s];this.emit(this.SCRIPT_ELEMENT_ADDED_EVENT,{el:a})}H["default"].onElementChanged(e)}if((x.isInputElement(e)||x.isButtonElement(e))&&e.form&&m["default"].hasAttribute.call(e,"formaction")&&e.setAttribute("formaction",e.getAttribute("formaction")),x.isBodyElement(e)&&this.shadowUI.onBodyElementMutation(),this._onAddFileInputInfo(e),x.isBaseElement(e)&&this._isFirstBaseTagOnPage(e)){var l=f["default"].getStoredAttrName("href"),u=e.getAttribute(l);null!==u&&I.updateBase(u,this.document)}},t.prototype._onElementRemoved=function(e){if(x.isBodyElement(e))this.shadowUI.onBodyElementMutation();else if(x.isBaseElement(e)){var t=m["default"].querySelector.call(this.document,"base"),n=t&&t.getAttribute(f["default"].getStoredAttrName("href"));I.updateBase(n||(0,P.get)(),this.document)}H["default"].onElementChanged(e)},t.prototype.addFileInputInfo=function(e){var t=this.uploadSandbox.infoManager;C.addInputInfo(e,t.getFiles(e),t.getValue(e))},t.prototype.onIframeAddedToDOM=function(e){x.isCrossDomainIframe(e,!0)||this.nodeSandbox.mutation.onIframeAddedToDOM({iframe:e})},t.prototype.attach=function(n){e.prototype.attach.call(this,n),this._createOverridedMethods(),n.Element.prototype.insertBefore=this.overriddenMethods.insertBefore,n.Element.prototype.appendChild=this.overriddenMethods.appendChild,n.Element.prototype.replaceChild=this.overriddenMethods.replaceChild,n.Element.prototype.removeChild=this.overriddenMethods.removeChild,n.Element.prototype.setAttribute=this.overriddenMethods.setAttribute,n.Element.prototype.setAttributeNS=this.overriddenMethods.setAttributeNS,n.Element.prototype.getAttribute=this.overriddenMethods.getAttribute,n.Element.prototype.getAttributeNS=this.overriddenMethods.getAttributeNS,n.Element.prototype.removeAttribute=this.overriddenMethods.removeAttribute,n.Element.prototype.removeAttributeNS=this.overriddenMethods.removeAttributeNS,n.Element.prototype.cloneNode=this.overriddenMethods.cloneNode,n.Element.prototype.querySelector=this.overriddenMethods.querySelector,n.Element.prototype.querySelectorAll=this.overriddenMethods.querySelectorAll,n.Element.prototype.hasAttribute=this.overriddenMethods.hasAttribute,n.Element.prototype.hasAttributeNS=this.overriddenMethods.hasAttributeNS,n.Element.prototype.hasAttributes=this.overriddenMethods.hasAttributes,n.Node.prototype.cloneNode=this.overriddenMethods.cloneNode,n.Node.prototype.appendChild=this.overriddenMethods.appendChild,n.Node.prototype.removeChild=this.overriddenMethods.removeChild,n.Node.prototype.insertBefore=this.overriddenMethods.insertBefore,n.Node.prototype.replaceChild=this.overriddenMethods.replaceChild,n.DocumentFragment.prototype.querySelector=this.overriddenMethods.querySelector,n.DocumentFragment.prototype.querySelectorAll=this.overriddenMethods.querySelectorAll,n.HTMLTableElement.prototype.insertRow=this.overriddenMethods.insertRow,n.HTMLTableSectionElement.prototype.insertRow=this.overriddenMethods.insertRow,n.HTMLTableRowElement.prototype.insertCell=this.overriddenMethods.insertCell,n.HTMLFormElement.prototype.submit=this.overriddenMethods.formSubmit,n.Element.prototype.insertAdjacentHTML?n.Element.prototype.insertAdjacentHTML=this.overriddenMethods.insertAdjacentHTML:n.HTMLElement.prototype.insertAdjacentHTML&&(n.HTMLElement.prototype.insertAdjacentHTML=this.overriddenMethods.insertAdjacentHTML),this._setValidBrowsingContextOnElementClick(n),this.eventSandbox.listeners.on(this.eventSandbox.listeners.EVENT_LISTENER_ATTACHED_EVENT,function(e){"load"===e.eventType&&x.isImgElement(e.el)&&t._setProxiedSrc(e.el)}),this.eventSandbox.listeners.on(this.eventSandbox.listeners.EVENT_LISTENER_DETACHED_EVENT,function(e){"load"===e.eventType&&x.isImgElement(e.el)&&t.removeHasLoadHandlerFlag(e.el)})},t.prototype._ensureTargetContainsExistingBrowsingContext=function(e){var t=m["default"].getAttribute.call(e,f["default"].getStoredAttrName("target"));e.setAttribute("target",t||e.target)},t.prototype._setValidBrowsingContextOnElementClick=function(e){var t=this;this.eventSandbox.listeners.initElementListening(e,["click"]),this.eventSandbox.listeners.addInternalEventListener(e,["click"],function(e){var n=e.target;x.isInputElement(n)&&n.form&&(n=n.form);var r=x.getTagName(n);f["default"].isTagWithTargetAttr(r)&&t._ensureTargetContainsExistingBrowsingContext(n)})},t.prototype._setProxiedSrcUrlOnError=function(e){e.addEventListener("error",function(t){var n=m["default"].getAttribute.call(e,f["default"].getStoredAttrName("src"));n&&!w.parseProxyUrl(e.src)&&w.isSupportedProtocol(e.src)&&!w.isSpecialPage(e.src)&&(m["default"].setAttribute.call(e,"src",w.getProxyUrl(n)),(0,N.stopPropagation)(t))},!1)},t.prototype.getTarget=function(e,n){var r=n||"";return r&&!t._isKeywordTarget(r)&&!L.findByName(r)||/_blank/i.test(r)?"_top":r},t.prototype.processElement=function(e){var t=x.getTagName(e);switch(t){case"img":e[this.nodeSandbox.win.FORCE_PROXY_SRC_FOR_IMAGE]||this._setProxiedSrcUrlOnError(e);break;case"iframe":case"frame":this.iframeSandbox.processIframe(e);break;case"base":if(!this._isFirstBaseTagOnPage(e))break;var n=m["default"].getAttribute.call(e,f["default"].getStoredAttrName("href"));null!==n&&I.updateBase(n,this.document)}f["default"].isIframeFlagTag(t)&&"_parent"===e.target&&g["default"].processElement(e,w.convertToProxyUrl)},t}(u["default"]);e["default"]=X,t.exports=e["default"]},"index.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("../../../processing/dom/internal-properties"),u=o(l),c=n("../base"),p=o(c),d=n("./window"),f=o(d),h=n("./document"),m=o(h),y=n("./element"),g=o(y),v=n("../event/focus-blur"),E=o(v),b=n("../../../processing/dom"),S=n("../../dom-processor"),w=o(S),_=n("../../utils/dom"),x=r(_),T=n("../../utils/query-selector"),C=n("../native-methods"),A=o(C),I=/\[([\w-]+)(\^?=.+?)]/g,P=/^\W+\s*#/,N=function(e){function t(n,r,o,a,l){i(this,t);var c=s(this,e.call(this));return c.raiseBodyCreatedEvent=c._onBodyCreated,A["default"].objectDefineProperty.call(window.Object,document,u["default"].documentCharset,{value:x.parseDocumentCharset(),writable:!0}),c.eventSandbox=o,c.iframeSandbox=r,c.shadowUI=l,c.mutation=n,c.doc=new m["default"](c),c.win=new f["default"](c,o.message,o.listeners),c.element=new g["default"](c,a,r,l,o),c}return a(t,e),t.prototype._onBodyCreated=function(){this.eventSandbox.listeners.initDocumentBodyListening(this.document),this.mutation.onBodyCreated({body:this.document.body})},t.prototype._processElement=function(e){var t=e[u["default"].processedContext];if(t!==this.window){var n=null;t&&(n=w["default"].getUrlAttr(e),n=e.hasAttribute(n)?n:null);var r=A["default"].objectIsExtensible.call(window.Object,e),o=t&&!A["default"].objectIsFrozen.call(window.Object,e);(r||o)&&A["default"].objectDefineProperty.call(this.window,e,u["default"].processedContext,{value:this.window,writable:!0}),n&&e.setAttribute(n,e.getAttribute(n)),this.element.processElement(e)}},t.prototype.processNodes=function(e,t){if(e){if(e.querySelectorAll){this._processElement(e);for(var n=(0,T.getNativeQuerySelectorAll)(e).call(e,"*"),r=0;r<n.length;r++){var o=n[r];this._processElement(o)}}}else t=t||this.document,t.documentElement&&this.processNodes(t.documentElement)},t.prototype.attach=function(t){var n=this,r=t.document,o=!1;e.prototype.attach.call(this,t,r),this.iframeSandbox.on(this.iframeSandbox.IFRAME_DOCUMENT_CREATED_EVENT,function(e){var t=e.iframe,r=new n.nativeMethods.constructor(t.contentDocument,t.contentWindow);t.contentWindow[u["default"].iframeNativeMethods]=r,n.doc.attach(t.contentWindow,t.contentDocument)}),A["default"].objectDefineProperty.call(t.Object,t,u["default"].processDomMethodName,{value:function(e,t){o||n.shadowUI.onBodyElementMutation(),n.processNodes(e,t)},configurable:!0}),r.addEventListener("DOMContentLoaded",function(){o=!0,n.processNodes(null,r)},!1),this.doc.attach(t,r),this.win.attach(t),this.element.attach(t)},t._processAttributeSelector=function(e){return I.test(e)?e.replace(I,function(e,t,n){return w["default"].URL_ATTRS.indexOf(t)===-1||P.test(n)?e:(t=(0,b.getStoredAttrName)(t),"["+t+n+"]")}):e},t.processSelector=function(e){return e&&(e=E["default"]._processFocusPseudoClassSelector(e),e=t._processAttributeSelector(e)),e},t}(p["default"]);e["default"]=N,t.exports=e["default"]},"live-node-list":{"dom-mutation-tracker.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("../../native-methods"),s=r(i),a=n("../../../utils/dom"),l=n("../../../utils/query-selector"),u=Math.pow(2,53)-1,c=-u,p=function(){function e(){var t=this;o(this,e),this._mutations=s["default"].objectCreate.call(window.Object,null),this._isDomContentLoaded=!1,s["default"].addEventListener.call(document,"DOMContentLoaded",function(){t._isDomContentLoaded=!0})}return e.prototype._updateVersion=function(e){e in this._mutations&&(this._mutations[e]===u?this._mutations[e]=c:++this._mutations[e])},e.prototype._processElement=function(e){if(e.tagName&&!(0,a.isShadowUIElement)(e)){var t=(0,a.getTagName)(e);this._updateVersion("*"),this._updateVersion(t)}},e.prototype._processChildren=function(e){if(e.querySelectorAll)for(var t=(0,l.getNativeQuerySelectorAll)(e).call(e,"*"),n=0;n<t.length;n++){var r=t[n];this._processElement(r)}},e.prototype.onElementChanged=function(e){this._processElement(e),this._processChildren(e)},e.prototype.onChildrenChanged=function(e){this._processChildren(e)},e.prototype.isOutdated=function(e,t){if(!this._isDomContentLoaded)return!0;var n=e in this._mutations;n||(this._mutations[e]=c);var r=this._mutations[e];return t<r},e.prototype.getVersion=function(e){return this._mutations[e]},e}();e["default"]=new p,t.exports=e["default"]},"factory.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("./wrapper-base"),s=n("./wrapper"),a=r(s),l=function(){function e(){o(this,e)}return e._createLiveNodeListWrapper=function(e,t){return e instanceof NodeList?a["default"].prototype=i.nodeListWrapperBase:e instanceof HTMLCollection?a["default"].prototype=i.htmlCollectionWrapperBase:(i.LiveNodeListWrapperBase.prototype=e,a["default"].prototype=new i.LiveNodeListWrapperBase),new a["default"](e,t)},e.createNodeListForGetElementsByTagNameFn=function(t){var n=t.nodeList,r=t.tagName;return"string"!=typeof r?n:e._createLiveNodeListWrapper(n,r.toLowerCase())},e}();e["default"]=l,t.exports=e["default"]},"wrapper-base.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.htmlCollectionWrapperBase=e.nodeListWrapperBase=e.LiveNodeListWrapperBase=void 0;var i=n("../../native-methods"),s=r(i),a=1e4,l=e.LiveNodeListWrapperBase=function u(){var e=this;o(this,u);for(var t=function(t){s["default"].objectDefineProperty.call(window.Object,e,t,{enumerable:!1,configurable:!0,get:function(){return this.item(t)}})},n=0;n<a;n++)t(n)};l.prototype=NodeList.prototype;e.nodeListWrapperBase=new l;l.prototype=HTMLCollection.prototype;e.htmlCollectionWrapperBase=new l},"wrapper-state.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("./dom-mutation-tracker"),s=r(i),a=n("../../../utils/dom"),l=Array.prototype.filter,u=function(){function e(t,n){o(this,e),this.nodeList=t,this.filteredNodeList=null,this.version=-(1/0),this.tagName=n,this.refreshNodeListIfNecessary()}return e.prototype.refreshNodeListIfNecessary=function(){s["default"].isOutdated(this.tagName,this.version)&&(this.filteredNodeList=l.call(this.nodeList,function(e){return!(0,a.isShadowUIElement)(e)}),this.version=s["default"].getVersion(this.tagName))},e}();e["default"]=u,t.exports=e["default"]},"wrapper.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("../../native-methods"),s=r(i),a=n("../../../utils/dom"),l=n("./wrapper-state"),u=r(l),c=function p(e,t){o(this,p);var n=new u["default"](e,t);s["default"].objectDefineProperties.call(window.Object,this,{item:{value:function(e){return n.refreshNodeListIfNecessary(),n.filteredNodeList[e]}},length:{get:function(){return n.refreshNodeListIfNecessary(),n.filteredNodeList.length}}}),n.nodeList.namedItem&&s["default"].objectDefineProperty.call(window.Object,this,"namedItem",{value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=n.nodeList.namedItem.apply(n.nodeList,t);return o&&(0,a.isShadowUIElement)(o)?null:o}})};e["default"]=c,t.exports=e["default"]}},"mutation.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=n("../../utils/event-emitter"),l=r(a),u=function(e){function t(){o(this,t);var n=i(this,e.call(this));return n.BEFORE_DOCUMENT_CLEANED_EVENT="hammerhead|event|before-document-cleaned",n.DOCUMENT_CLEANED_EVENT="hammerhead|event|document-cleaned",n.DOCUMENT_CLOSED_EVENT="hammerhead|event|document-closed",n.BODY_CONTENT_CHANGED_EVENT="hammerhead|event|body-content-changed",n.BODY_CREATED_EVENT="hammerhead|event|body-created",n.IFRAME_ADDED_TO_DOM_EVENT="hammerhead|event|iframe-added-to-dom",n}return s(t,e),t.prototype.onIframeAddedToDOM=function(e){this.emit(this.IFRAME_ADDED_TO_DOM_EVENT,e)},t.prototype.onBeforeDocumentCleaned=function(e){this.emit(this.BEFORE_DOCUMENT_CLEANED_EVENT,e)},t.prototype.onDocumentCleaned=function(e){this.emit(this.DOCUMENT_CLEANED_EVENT,e)},t.prototype.onDocumentClosed=function(e){this.emit(this.DOCUMENT_CLOSED_EVENT,e)},t.prototype.onBodyContentChanged=function(e){this.emit(this.BODY_CONTENT_CHANGED_EVENT,e)},t.prototype.onBodyCreated=function(e){this.emit(this.BODY_CREATED_EVENT,e)},t}(l["default"]);e["default"]=u,t.exports=e["default"]},"window.js":function(e,t,n){function r(e){
if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("../base"),u=o(l),c=n("../shadow-ui"),p=o(c),d=n("../native-methods"),f=o(d),h=n("../../../processing/script"),m=n("../../../processing/style"),y=o(m),g=n("../../utils/destination-location"),v=r(g),E=n("../../utils/html"),b=n("../../utils/url"),S=n("../../utils/browser"),w=n("../../utils/dom"),_=n("../../utils/types"),x=n("../../../processing/dom/internal-attributes"),T=o(x),C=n("../../utils/constructor-is-called-without-new-keyword"),A=o(C),I=n("../../../processing/script/instruction"),P=o(I),N=n("pinkie"),M=o(N),O=f["default"].Function.toString(),j=Array.prototype.concat,k=/^http/i,L=["https:","wss:","file:"],R=["localhost","127.0.0.1"],D=function(e){function t(n,r,o){i(this,t);var a=s(this,e.call(this));return a.nodeSandbox=n,a.messageSandbox=r,a.listenersSandbox=o,a.UNCAUGHT_JS_ERROR_EVENT="hammerhead|event|uncaught-js-error",a.UNHANDLED_REJECTION_EVENT="hammerhead|event|unhandled-rejection",a.FORCE_PROXY_SRC_FOR_IMAGE="hammerhead|image|force-proxy-src-flag",a}return a(t,e),t.prototype._raiseUncaughtJsErrorEvent=function(e,t,n,r){if(!(0,w.isCrossDomainWindows)(n,n.top)){var o=n!==n.top;r||(r=v.get()),o?(this.emit(e,{msg:t,pageUrl:r,inIframe:!0}),this.messageSandbox.sendServiceMsg({msg:t,pageUrl:r,cmd:e},n.top)):this.emit(e,{msg:t,pageUrl:r})}},t.prototype._reattachHandler=function(e,t){f["default"].windowRemoveEventListener.call(e,t,this),f["default"].windowAddEventListener.call(e,t,this)},t._formatUnhandledRejectionReason=function(e){if(!(0,_.isPrimitiveType)(e)){var t=f["default"].objectToString.call(e);return"[object Error]"===t?e.message:t}return String(e)},t._wrapCSSGetPropertyValueIfNecessary=function(e,t){t&&(e.prototype.getPropertyValue=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=t.apply(this,n);return y["default"].cleanUp(o,b.parseProxyUrl)})},t._wrapCSSSetPropertyIfNecessary=function(e,t){t&&(e.prototype.setProperty=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[1];return"string"==typeof o&&(n[1]=y["default"].process(o,b.getProxyUrl)),t.apply(this,n)})},t._wrapCSSRemovePropertyIfNecessary=function(e,t){t&&(e.prototype.removeProperty=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=t.apply(this,n);return y["default"].cleanUp(o,b.parseProxyUrl)})},t._isSecureOrigin=function(e){var t=(0,b.parseUrl)((0,b.resolveUrlAsDest)(e));return L.indexOf(t.protocol)===-1&&R.indexOf(t.hostname)===-1},t.prototype.handleEvent=function(e){if(!e.defaultPrevented)if("unhandledrejection"===e.type){var n=t._formatUnhandledRejectionReason(e.reason);this._raiseUncaughtJsErrorEvent(this.UNHANDLED_REJECTION_EVENT,n,this.window)}else"error"===e.type&&(e.message.indexOf("NS_ERROR_NOT_INITIALIZED")!==-1?e.preventDefault():this._raiseUncaughtJsErrorEvent(this.UNCAUGHT_JS_ERROR_EVENT,e.message,window))},t.prototype.attach=function(n){var r=this;e.prototype.attach.call(this,n);var o=this.messageSandbox,i=this.nodeSandbox,s=this;this._reattachHandler(n,"unhandledrejection"),this._reattachHandler(n,"error"),this.listenersSandbox.initElementListening(n,["error","unhandledrejection"]),this.listenersSandbox.on(this.listenersSandbox.EVENT_LISTENER_ATTACHED_EVENT,function(e){e.el===n&&("unhandledrejection"===e.eventType?r._reattachHandler(n,"unhandledrejection"):"error"===e.eventType&&r._reattachHandler(n,"error"))}),o.on(o.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message;t.cmd!==r.UNCAUGHT_JS_ERROR_EVENT&&t.cmd!==r.UNHANDLED_REJECTION_EVENT||r._raiseUncaughtJsErrorEvent(t.cmd,t.msg,n,t.pageUrl)}),n.CanvasRenderingContext2D.prototype.drawImage=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=t[0];if((0,w.isImgElement)(o)&&!o[s.FORCE_PROXY_SRC_FOR_IMAGE]){var i=o.src;v.sameOriginCheck(location.toString(),i)&&(t[0]=f["default"].createElement.call(n.document,"img"),t[0].src=(0,b.getProxyUrl)(i))}return f["default"].canvasContextDrawImage.apply(this,t)},f["default"].objectAssign&&(n.Object.assign=function(e){var t=[];t.push(e);for(var r=typeof e,o=arguments.length,i=Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];if(e&&("object"===r||"function"===r)&&i.length)for(var a=0;a<i.length;a++){var l=i[a],u=typeof l;if(!l||"object"!==u&&"function"!==u)f["default"].objectAssign.call(this,e,l);else for(var c=f["default"].objectKeys.call(n.Object,l),p=0;p<c.length;p++){var d=c[p];n[P["default"].setProperty](e,d,l[d])}}else t=j.call(t,i);return f["default"].objectAssign.apply(this,t)}),n.open=function(){var e=[],t=arguments[1]?i.element.getTarget(null,arguments[1]):"_self";return e.push((0,b.getProxyUrl)(arguments[0])),e.push(t),arguments.length>2&&e.push(arguments[2]),arguments.length>3&&e.push(arguments[3]),f["default"].windowOpen.apply(n,e)},n.FontFace&&(n.FontFace=function(e,t,n){return t=y["default"].process(t,b.convertToProxyUrl),new f["default"].FontFace(e,t,n)},n.FontFace.prototype=f["default"].FontFace.prototype),n.Worker&&(n.Worker=function(e,t){return(0,A["default"])(this,n.Worker)&&f["default"].Worker.apply(this,arguments),0===arguments.length?new f["default"].Worker:("string"==typeof e&&(e=(0,b.getProxyUrl)(e,{resourceType:(0,b.stringifyResourceType)({isScript:!0})})),1===arguments.length?new f["default"].Worker(e):new f["default"].Worker(e,t))},n.Worker.prototype=f["default"].Worker.prototype),n.Blob&&(n.Blob=function(e,t){if(0===arguments.length)return new f["default"].Blob;var n=t&&t.type&&t.type.toString().toLowerCase();return n&&"text/javascript"!==n&&"application/javascript"!==n&&"application/x-javascript"!==n||(e=[(0,h.processScript)(e.join(""),!0)]),1===arguments.length?new f["default"].Blob(e):new f["default"].Blob(e,t)},n.Blob.prototype=f["default"].Blob.prototype),n.EventSource&&(n.EventSource=function(e,t){if(arguments.length){var n=(0,b.getProxyUrl)(e,{resourceType:(0,b.stringifyResourceType)({isEventSource:!0})});return 1===arguments.length?new f["default"].EventSource(n):new f["default"].EventSource(n,t)}return new f["default"].EventSource},n.EventSource.prototype=f["default"].EventSource.prototype,n.EventSource.CONNECTING=f["default"].EventSource.CONNECTING,n.EventSource.OPEN=f["default"].EventSource.OPEN,n.EventSource.CLOSED=f["default"].EventSource.CLOSED),n.MutationObserver&&(n.MutationObserver=function(e){var t=function(t){for(var n=[],r=0;r<t.length;r++){var o=t[r];p["default"].isShadowUIMutation(o)||n.push(o)}n.length&&e.call(this,n,this)};return new f["default"].MutationObserver(t)},n.MutationObserver.prototype=f["default"].MutationObserver.prototype),f["default"].registerServiceWorker&&(n.navigator.serviceWorker.register=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=r[0];if("string"==typeof i){if(t._isSecureOrigin(i))return M["default"].reject(new DOMException("Only secure origins are allowed.","SecurityError"));r[0]=(0,b.getProxyUrl)(i,{resourceType:(0,b.stringifyResourceType)({isScript:!0})})}return r[1]&&"string"==typeof r[1].scope&&(r[1].scope=(0,b.getProxyUrl)(r[1].scope,{resourceType:(0,b.stringifyResourceType)({isScript:!0})})),f["default"].registerServiceWorker.apply(n.navigator.serviceWorker,r)}),n.Range.prototype.createContextualFragment&&(n.Range.prototype.createContextualFragment=function(){"string"==typeof arguments[0]&&(arguments[0]=(0,E.processHtml)(arguments[0]));var e=f["default"].createContextualFragment.apply(this,arguments);return i.processNodes(e),e}),n.Image=function(){var e=null;return e=arguments.length?1===arguments.length?new f["default"].Image(arguments[0]):new f["default"].Image(arguments[0],arguments[1]):new f["default"].Image,e[s.FORCE_PROXY_SRC_FOR_IMAGE]=!0,i.processNodes(e),e},n.Image.prototype=f["default"].Image.prototype;var a=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.length-1;return"string"==typeof t[r]&&(t[r]=(0,h.processScript)(t[r],!1)),f["default"].Function.apply(this,t)};if(n.Function=a,n.Function.prototype=f["default"].Function.prototype,n.Function.prototype.constructor=a,n.Function.toString=function(){return this===a?O:f["default"].functionToString.call(this)},"function"==typeof n.history.pushState&&"function"==typeof n.history.replaceState){var l=function(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n[2];return n.length>2&&null!==o&&(S.isIE||void 0!==o)&&(n[2]=(0,b.getProxyUrl)(String(o))),e.apply(this,n)}};n.history.pushState=l(f["default"].historyPushState),n.history.replaceState=l(f["default"].historyReplaceState)}if(n.navigator.sendBeacon&&(n.navigator.sendBeacon=function(){return"string"==typeof arguments[0]&&(arguments[0]=(0,b.getProxyUrl)(arguments[0])),f["default"].sendBeacon.apply(this,arguments)}),n.navigator.registerProtocolHandler&&(n.navigator.registerProtocolHandler=function(){for(var e=1,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];if("string"==typeof n[e]){var o=v.getParsed().hostname,i="";if(S.isFirefox){var s=(0,b.parseUrl)(n[e]);i=s.hostname&&(0,b.isSubDomain)(o,s.hostname)}else i=v.sameOriginCheck(v.get(),n[e]);i&&(n[e]=(0,b.getProxyUrl)(n[e]))}return f["default"].registerProtocolHandler.apply(navigator,n)}),n.FormData&&(n.FormData.prototype.append=function(e,t){e!==T["default"].uploadInfoHiddenInputName&&(2===arguments.length&&(0,w.isBlob)(t)&&"name"in t?f["default"].formDataAppend.call(this,e,t,t.name):f["default"].formDataAppend.apply(this,arguments))}),n.WebSocket&&(n.WebSocket=function(e,t){if(0===arguments.length)return new f["default"].WebSocket;var n=(0,b.getProxyUrl)(e,{resourceType:(0,b.stringifyResourceType)({isWebSocket:!0})}),r=(0,b.parseUrl)(e),o=r.protocol+"//"+r.host,i=null;return i=1===arguments.length?new f["default"].WebSocket(n):2===arguments.length?new f["default"].WebSocket(n,t):new f["default"].WebSocket(n,t,arguments[2]),f["default"].webSocketUrlGetter||(i.__defineGetter__("url",function(){return e}),i.__defineSetter__("url",function(e){return e})),f["default"].messageEventOriginGetter||i.addEventListener("message",function(e){e.__defineGetter__("origin",function(){return o}),e.__defineSetter__("origin",function(e){return e})}),i},n.WebSocket.prototype=f["default"].WebSocket.prototype,n.WebSocket.CONNECTING=f["default"].WebSocket.CONNECTING,n.WebSocket.OPEN=f["default"].WebSocket.OPEN,n.WebSocket.CLOSING=f["default"].WebSocket.CLOSING,n.WebSocket.CLOSED=f["default"].WebSocket.CLOSED,f["default"].webSocketUrlGetter)){var u=f["default"].objectGetOwnPropertyDescriptor.call(n.Object,n.WebSocket.prototype,"url");u.get=function(){var e=f["default"].webSocketUrlGetter.call(this),t=(0,b.parseProxyUrl)(e);return t&&t.destUrl?t.destUrl.replace(k,"ws"):e},f["default"].objectDefineProperty.call(n.Object,n.WebSocket.prototype,"url",u)}if(f["default"].messageEventOriginGetter){var c=f["default"].objectGetOwnPropertyDescriptor.call(n.Object,n.MessageEvent.prototype,"origin");c.get=function(){var e=this.target,t=f["default"].messageEventOriginGetter.call(this);if((0,w.isWebSocket)(e)){var n=(0,b.parseUrl)(e.url);if(n)return n.protocol+"//"+n.host}return t},f["default"].objectDefineProperty.call(n.Object,n.MessageEvent.prototype,"origin",c)}n.DOMParser&&(n.DOMParser.prototype.parseFromString=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length>1&&"string"==typeof t[0]&&"text/html"===t[1]&&(t[0]=(0,E.processHtml)(t[0])),f["default"].DOMParserParseFromString.apply(this,t)}),n.XDomainRequest&&(n.XDomainRequest=n.XMLHttpRequest),t._wrapCSSGetPropertyValueIfNecessary(n.CSSStyleDeclaration,f["default"].CSSStyleDeclarationGetPropertyValue),t._wrapCSSGetPropertyValueIfNecessary(n.MSStyleCSSProperties,f["default"].MSStyleCSSPropertiesGetPropertyValue),t._wrapCSSGetPropertyValueIfNecessary(n.CSS2Property,f["default"].CSS2PropertyGetPropertyValue),t._wrapCSSSetPropertyIfNecessary(n.CSSStyleDeclaration,f["default"].CSSStyleDeclarationSetProperty),t._wrapCSSSetPropertyIfNecessary(n.MSStyleCSSProperties,f["default"].MSStyleCSSPropertiesSetProperty),t._wrapCSSSetPropertyIfNecessary(n.CSS2Property,f["default"].CSS2PropertySetProperty),t._wrapCSSRemovePropertyIfNecessary(n.CSSStyleDeclaration,f["default"].CSSStyleDeclarationRemoveProperty),t._wrapCSSRemovePropertyIfNecessary(n.MSStyleCSSProperties,f["default"].MSStyleCSSPropertiesRemoveProperty),t._wrapCSSRemovePropertyIfNecessary(n.CSS2Property,f["default"].CSS2PropertyRemoveProperty)},t}(u["default"]);e["default"]=D,t.exports=e["default"]}},"shadow-ui.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("../../processing/dom/internal-properties"),u=o(l),c=n("./base"),p=o(c),d=n("./node/index"),f=o(d),h=n("./native-methods"),m=o(h),y=n("../utils/dom"),g=r(y),v=n("../dom-processor"),E=n("../utils/position"),b=n("../../shadow-ui/class-name"),S=o(b),w=n("../utils/style"),_=n("../utils/event"),x=n("../utils/query-selector"),T=n("./node/live-node-list/factory"),C=o(T),A=/fixed|relative|absolute/,I=/\.((?:\\.|[-\w]|[^\x00-\xa0])+)/g,P="hammerhead|shadow-ui|container-flag",N="hammerhead|shadow-ui|container-collection-flag",M=function(e){function t(n,r,o){i(this,t);var a=s(this,e.call(this));return a.BODY_CONTENT_CHANGED_COMMAND="hammerhead|command|body-content-changed",a.ROOT_CLASS="root",a.ROOT_ID="root",a.HIDDEN_CLASS="hidden",a.BLIND_CLASS="blind",a.nodeMutation=n,a.messageSandbox=r,a.iframeSandbox=o,a.root=null,a.lastActiveElement=null,a.uiStyleSheetsHtmlBackup=null,a.wrapperCreators=a._createWrapperCreators(),a}return a(t,e),t._filterElement=function(e){return e&&g.isShadowUIElement(e)?null:e},t.prototype._filterList=function(e,t){for(var n=[],r=e.length,o=0;o<r;o++){var i=t(e[o]);i&&n.push(e[o])}return m["default"].objectDefineProperty.call(this.window.Object,n,"item",{value:function(e){return e>=n.length?null:n[e]}}),e.namedItem&&m["default"].objectDefineProperty.call(this.window.Object,n,"namedItem",{value:function(t){return e.namedItem(t)}}),n.length===r?e:n},t.prototype._filterNodeList=function(e){return this._filterList(e,function(e){return t._filterElement(e)})},t.prototype._filterStyleSheetList=function(e){return this._filterList(e,function(e){return t._filterElement(e.ownerNode)})},t._getFirstNonShadowElement=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(t._filterElement(r))return r}return null},t.prototype._createWrapperCreators=function(){var e=this;return{getElementsByClassName:function(t){return function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return e._filterNodeList(m["default"][t].apply(this,r))}},getElementsByTagName:function(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=m["default"][e].apply(this,n);return C["default"].createNodeListForGetElementsByTagNameFn({nodeList:o,tagName:n[0]})}},querySelector:function(e,n){return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];"string"==typeof o[0]&&(o[0]=f["default"].processSelector(o[0]));var s=m["default"][e].apply(this,o),a=t._filterElement(s);return!s||a?a:t._getFirstNonShadowElement(m["default"][n].apply(this,o))}},querySelectorAll:function(t){return function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return"string"==typeof r[0]&&(r[0]=f["default"].processSelector(r[0])),e._filterNodeList(m["default"][t].apply(this,r))}}}},t.prototype._markShadowUIContainerAndCollections=function(e){m["default"].objectDefineProperty.call(this.window.Object,e,P,{value:!0}),m["default"].objectDefineProperty.call(this.window.Object,e.children,N,{value:!0}),m["default"].objectDefineProperty.call(this.window.Object,e.childNodes,N,{value:!0})},t.prototype.markShadowUIContainers=function(e,t){e&&this._markShadowUIContainerAndCollections(e),t&&this._markShadowUIContainerAndCollections(t)},t.prototype._bringRootToWindowTopLeft=function(){for(var e=!1,t=this.root.parentNode;t;){var n=(0,w.get)(t,"position");A.test(n)&&(e=!0),t=t.parentNode}if(e){var r=(0,E.getOffsetPosition)(this.root);if(0!==r.left||0!==r.top){var o=parseFloat((0,w.get)(this.root,"left"))||0,i=parseFloat((0,w.get)(this.root,"top"))||0,s=o-r.left+"px",a=i-r.top+"px";(0,w.set)(this.root,"left",s),(0,w.set)(this.root,"top",a)}}},t.prototype._overrideDocumentMethods=function(e){var n=this,r=e.constructor.prototype;r.elementFromPoint=function(){n.addClass(n.getRoot(),n.HIDDEN_CLASS);for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=t._filterElement(m["default"].elementFromPoint.apply(this,r));return n.removeClass(n.getRoot(),n.HIDDEN_CLASS),i},e.caretRangeFromPoint&&(r.caretRangeFromPoint=function(){n.addClass(n.getRoot(),n.HIDDEN_CLASS);for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=m["default"].caretRangeFromPoint.apply(this,r);return i&&i.startContainer&&!t._filterElement(i.startContainer)&&(i=null),n.removeClass(n.getRoot(),n.HIDDEN_CLASS),i}),e.caretPositionFromPoint&&(r.caretPositionFromPoint=function(){n.addClass(n.getRoot(),n.HIDDEN_CLASS);for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=m["default"].caretPositionFromPoint.apply(this,r);return i&&i.offsetNode&&!t._filterElement(i.offsetNode)&&(i=null),n.removeClass(n.getRoot(),n.HIDDEN_CLASS),i}),r.getElementById=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t._filterElement(m["default"].getElementById.apply(this,n))},r.getElementsByName=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n._filterNodeList(m["default"].getElementsByName.apply(this,t))},r.getElementsByClassName=this.wrapperCreators.getElementsByClassName("getElementsByClassName"),r.getElementsByTagName=this.wrapperCreators.getElementsByTagName("getElementsByTagName"),r.querySelector=this.wrapperCreators.querySelector("querySelector","querySelectorAll"),r.querySelectorAll=this.wrapperCreators.querySelectorAll("querySelectorAll"),r.querySelectorAll.toString=function(){return m["default"].querySelectorAll.toString()},r.getElementsByClassName.toString=function(){return m["default"].getElementsByClassName.toString()}},t.prototype._overrideElementMethods=function(e){var t=e.HTMLBodyElement.prototype,n=e.HTMLHeadElement.prototype;t.getElementsByClassName=this.wrapperCreators.getElementsByClassName("elementGetElementsByClassName"),t.getElementsByTagName=this.wrapperCreators.getElementsByTagName("elementGetElementsByTagName"),t.querySelector=this.wrapperCreators.querySelector("elementQuerySelector","elementQuerySelectorAll"),t.querySelectorAll=this.wrapperCreators.querySelectorAll("elementQuerySelectorAll"),n.getElementsByClassName=t.getElementsByClassName,n.getElementsByTagName=t.getElementsByTagName,n.querySelector=t.querySelector,n.querySelectorAll=t.querySelectorAll},t.prototype._getUIStyleSheetsHtml=function(){for(var e=this.nativeMethods.querySelectorAll.call(this.document,"link."+S["default"].uiStylesheet),t="",n=0;n<e.length;n++){var r=e[n];t+=r.outerHTML}return t},t.prototype._restoreUIStyleSheets=function(e,n){if(e&&n){var r=this.nativeMethods.createElement.call(this.document,"div");r.innerHTML=n;for(var o=0;o<r.children.length;o++){var i=e.children[o]||null,s=m["default"].cloneNode.call(r.children[o]);t._markElementAsShadow(s),this.nativeMethods.insertBefore.call(e,s,i)}}},t.prototype._markScriptsAndStylesAsShadowInHead=function(e){if(e)for(var n=0,r=e.children;n<r.length;n++){var o=r[n];t.containsShadowUIClassPostfix(o)&&t._markElementAsShadow(o)}},t.prototype.getRoot=function(){var e=this;if(!this.root||!this.document.body.contains(this.root))if(this.root)m["default"].appendChild.call(this.document.body,this.root);else{this.root=m["default"].createElement.call(this.document,"div"),m["default"].setAttribute.call(this.root,"id",t.patchId(this.ROOT_ID)),m["default"].setAttribute.call(this.root,"contenteditable","false"),this.addClass(this.root,this.ROOT_CLASS),t._markElementAsShadow(this.root),m["default"].appendChild.call(this.document.body,this.root);for(var n=0;n<v.EVENTS.length;n++){var r=v.EVENTS[n];this.root.addEventListener(r,_.stopPropagation)}this._bringRootToWindowTopLeft(),m["default"].documentAddEventListener.call(this.document,"DOMContentLoaded",function(){e.onBodyElementMutation(),e._bringRootToWindowTopLeft()})}return this.root},t.prototype.attach=function(t){var n=this;e.prototype.attach.call(this,t,t.document),this.markShadowUIContainers(this.document.head,this.document.body),this._overrideDocumentMethods(t.document),this._overrideElementMethods(t),this._markScriptsAndStylesAsShadowInHead(t.document.head),this.iframeSandbox.on(this.iframeSandbox.RUN_TASK_SCRIPT_EVENT,function(e){var t=e.iframe.contentDocument.head,r=e.iframe.contentDocument.body;n._restoreUIStyleSheets(t,n._getUIStyleSheetsHtml()),n.markShadowUIContainers(t,r)}),this.nodeMutation.on(this.nodeMutation.BEFORE_DOCUMENT_CLEANED_EVENT,function(){n.uiStyleSheetsHtmlBackup=n._getUIStyleSheetsHtml()}),this.nodeMutation.on(this.nodeMutation.DOCUMENT_CLEANED_EVENT,function(e){n._restoreUIStyleSheets(e.document.head,n.uiStyleSheetsHtmlBackup),n.uiStyleSheetsHtmlBackup=null,n.markShadowUIContainers(n.document.head,n.document.body)}),this.nodeMutation.on(this.nodeMutation.DOCUMENT_CLOSED_EVENT,function(e){n._restoreUIStyleSheets(e.document.head,n.uiStyleSheetsHtmlBackup),n.uiStyleSheetsHtmlBackup=null,n.markShadowUIContainers(e.document.head,e.document.body)}),this.nodeMutation.on(this.nodeMutation.BODY_CONTENT_CHANGED_EVENT,function(e){var r=e[u["default"].processedContext];r!==t?n.messageSandbox.sendServiceMsg({cmd:n.BODY_CONTENT_CHANGED_COMMAND},r):n.onBodyElementMutation()}),this.messageSandbox.on(this.messageSandbox.SERVICE_MSG_RECEIVED_EVENT,function(e){e.message.cmd===n.BODY_CONTENT_CHANGED_COMMAND&&n.onBodyElementMutation()}),this.nodeMutation.on(this.nodeMutation.BODY_CREATED_EVENT,function(e){var t=e.body;return n.markShadowUIContainers(n.document.head,t)})},t.prototype.onBodyElementMutation=function(){if(this.root&&this.document.body){var e=g.closest(this.root,"html"),t=!this.root.nextElementSibling,n=this.root.parentNode===this.document.body;e&&t&&n||this.nativeMethods.appendChild.call(this.document.body,this.root),this.markShadowUIContainers(this.document.head,this.document.body)}},t.prototype.getFirstChild=function(e){var t=this._filterNodeList(e.childNodes);return t.length&&t[0]?t[0]:null},t.prototype.getFirstElementChild=function(e){for(var t=this._filterNodeList(e.childNodes),n=t.length,r=0;r<n;r++)if(g.isElementNode(t[r]))return t[r];return null},t.prototype.getLastChild=function(e){var t=this._filterNodeList(e.childNodes),n=t.length-1;return n>=0?t[n]:null},t.prototype.getLastElementChild=function(e){for(var t=this._filterNodeList(e.childNodes),n=t.length,r=n-1;r>=0;r--)if(g.isElementNode(t[r]))return t[r];return null},t.checkElementsPosition=function(e){if(e.length){var t=e[0].parentNode,n=[];if(t){for(var r=0;r<e.length;r++){var o=e[r];g.isShadowUIElement(o)&&n.push(o)}for(var i=0;i<n.length;i++){var s=n[i];m["default"].appendChild.call(t,s)}}}},t._hasFlag=function(e,t){try{return!!e[t]}catch(n){return!1}},t.isShadowContainer=function(e){return t._hasFlag(e,P)},t.isShadowContainerCollection=function(e){return t._hasFlag(e,N)},t.isShadowUIMutation=function(e){return!(!e.removedNodes||1!==e.removedNodes.length||!g.isShadowUIElement(e.removedNodes[0]))||!(!e.addedNodes||1!==e.addedNodes.length||!g.isShadowUIElement(e.addedNodes[0]))},t.removeSelfRemovingScripts=function(e){for(var t=m["default"].querySelectorAll.call(e,"."+S["default"].selfRemovingScript),n=0;n<t.length;n++){var r=t[n];m["default"].removeChild.call(r.parentNode,r)}},t.prototype.addClass=function(e,n){var r=t.patchClassNames(n);g.addClass(e,r)},t.prototype.removeClass=function(e,n){var r=t.patchClassNames(n);g.removeClass(e,r)},t.hasClass=function(e,n){var r=t.patchClassNames(n);return g.hasClass(e,r)},t.patchId=function(e){return e+S["default"].postfix},t.patchClassNames=function(e){for(var t=e.split(/\s+/),n=0;n<t.length;n++)t[n]+=S["default"].postfix;return t.join(" ")},t.prototype.select=function(e,t){var n=e.replace(I,function(e){return e+S["default"].postfix});return t?m["default"].elementQuerySelectorAll.call(t,n):m["default"].querySelectorAll.call(this.document,n)},t.prototype.setBlind=function(e){e?this.addClass(this.getRoot(),this.BLIND_CLASS):this.removeClass(this.getRoot(),this.BLIND_CLASS)},t.prototype.getLastActiveElement=function(){return this.lastActiveElement},t.prototype.setLastActiveElement=function(e){this.lastActiveElement=e},t.prototype.insertBeforeRoot=function(e){var t=this.getRoot().parentNode;return m["default"].insertBefore.call(t,e,t.lastChild)},t._markElementAsShadow=function(e){e[u["default"].shadowUIElement]=!0},t.markElementAndChildrenAsShadow=function(e){t._markElementAsShadow(e);for(var n=(0,x.getNativeQuerySelectorAll)(e).call(e,"*"),r=0;r<n.length;r++){var o=n[r];t._markElementAsShadow(o)}},t.containsShadowUIClassPostfix=function(e){return"string"==typeof e.className&&e.className.indexOf(S["default"].postfix)!==-1},t}(p["default"]);e["default"]=M,t.exports=e["default"]},storages:{"index.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("../base"),u=o(l),c=n("./wrapper"),p=o(c),d=n("../../settings"),f=o(d),h=n("../../utils/destination-location"),m=r(h),y=n("../native-methods"),g=r(y),v=n("../../utils/dom"),E=n("../../../utils/get-storage-key"),b=o(E),S=n("../../../processing/dom/internal-properties"),w=o(S),_=n("../../json"),x=r(_),T=function(e){function t(n,r,o){i(this,t);var a=s(this,e.call(this));return a.localStorage=null,a.sessionStorage=null,a.listeners=n,a.unloadSandbox=r,a.eventSimulator=o,a.storages={},a.isLocked=!1,a}return a(t,e),t.prototype._simulateStorageEventIfNecessary=function(e,t){this.isDeactivated()||t&&t.getContext()!==this.window&&(e.storageArea=t,this.eventSimulator.storage(this.window,e))},t.prototype._createStorageWrappers=function(){var e=this,t=f["default"].get().sessionId,n=m.getParsed().host,r=(0,b["default"])(t,n),o=(0,v.getTopSameDomainWindow)(this.window),i=o[w["default"].hammerhead].sandbox.storageSandbox.storages;i[r]?(this.localStorage=i[r].localStorage,this.sessionStorage=i[r].sessionStorage):(this.localStorage=new p["default"](this.window,this.window.localStorage,r),this.sessionStorage=new p["default"](this.window,this.window.sessionStorage,r),this.unloadSandbox.on(this.unloadSandbox.BEFORE_UNLOAD_EVENT,function(){e.isLocked||(e.localStorage.saveToNativeStorage(),e.sessionStorage.saveToNativeStorage())}),i[r]={localStorage:this.localStorage,sessionStorage:this.sessionStorage})},t.prototype._overrideStorageEvent=function(){var e=this.window;this.window.StorageEvent=function(t,n){if(0===arguments.length)throw new TypeError;var r=n.storageArea||null;r&&delete n.storageArea;var o=new g.StorageEvent(t,n);return r&&g.objectDefineProperty.call(e.Object,o,"storageArea",{get:function(){return r},set:function(){}}),o}},t.prototype.clear=function(){this.window.localStorage.removeItem(this.localStorage.nativeStorageKey),this.window.sessionStorage.removeItem(this.sessionStorage.nativeStorageKey)},t.prototype.lock=function(){this.isLocked=!0},t.prototype.backup=function(){return{localStorage:x.stringify(this.localStorage.getCurrentState()),sessionStorage:x.stringify(this.sessionStorage.getCurrentState())}},t.prototype.restore=function(e){var t=e.localStorage,n=e.sessionStorage;this.localStorage.restore(t),this.sessionStorage.restore(n)},t.prototype.attach=function(t){var n=this;e.prototype.attach.call(this,t),this._createStorageWrappers(),this.onLocalStorageChangeListener=this.localStorage.on(this.localStorage.STORAGE_CHANGED_EVENT,function(e){return n._simulateStorageEventIfNecessary(e,n.localStorage)}),this.onSessionStorageListener=this.sessionStorage.on(this.sessionStorage.STORAGE_CHANGED_EVENT,function(e){return n._simulateStorageEventIfNecessary(e,n.sessionStorage)}),this.listeners.initElementListening(t,["storage"]),this.listeners.addInternalEventListener(t,["storage"],function(e,t,n){t||n()}),this._overrideStorageEvent()},t.prototype.dispose=function(){this.localStorage.off(this.localStorage.STORAGE_CHANGED_EVENT,this.onLocalStorageChangeListener),this.sessionStorage.off(this.sessionStorage.STORAGE_CHANGED_EVENT,this.onSessionStorageListener);var e=(0,v.getTopSameDomainWindow)(this.window);this.window!==e||e.frameElement||(this.localStorage.dispose(),this.sessionStorage.dispose())},t}(u["default"]);e["default"]=T,t.exports=e["default"]},"wrapper.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){var e=[];for(var t in S.prototype)e.push(t);return e}e.__esModule=!0;var a=n("../../utils/event-emitter"),l=o(a),u=n("../../utils/browser"),c=n("../../utils/url"),p=n("../../utils/destination-location"),d=r(p),f=n("../../json"),h=r(f),m=n("../native-methods"),y=o(m),g="hammerhead|storages-sandbox-temp",v="hammerhead|api-key-prefix|",E=0,b=1,S=function w(e,t,n){var r=this,o=arguments;i(this,w),this.eventEmitter=new l["default"],this.on=function(e,t){return r.eventEmitter.on(e,t)},this.off=function(e,t){return r.eventEmitter.off(e,t)},this.emit=function(e,t){return r.eventEmitter.emit(e,t)},this.nativeStorage=t,this.nativeStorageKey=n,this.lastState=null,this.window=e,this.initialProperties=[],this.wrapperMethods=[],this.context=e,this.intervalId=null,this.STORAGE_CHANGED_EVENT="hammerhead|event|storage-changed",this.EMPTY_OLD_VALUE_ARG=u.isIE?"":null;var a=function(){var e=[];for(var t in r)r.hasOwnProperty(t)&&r.initialProperties.indexOf(t)===-1&&e.push(t);
return e};y["default"].objectDefineProperty.call(e.Object,this,"length",{get:function(){return a().length},set:function(){}});var p=function(e){e||(e=r.nativeStorage[r.nativeStorageKey]),e=h.parse(e||"[[],[]]");for(var t=0;t<e[E].length;t++)r[e[E][t]]=e[b][t]},f=function(e,t,n){var o=null;try{var i=(0,c.parseProxyUrl)(r.context.location.toString());o=i?i.destUrl:d.get()}catch(s){r.context=r.window,o=d.get()}r.emit(r.STORAGE_CHANGED_EVENT,{key:e,oldValue:t,newValue:n,url:o})},m=function(){for(var e=r.getCurrentState(),t=0;t<r.lastState[E].length;t++){var n=r.lastState[E][t],o=r.lastState[b][t],i=e[E].indexOf(n);i!==-1?(e[b][i]!==o&&f(e[E][i],o,e[b][i]),e[E].splice(i,1),e[b].splice(i,1)):f(n,o,null)}for(var s=0;s<e[E].length;s++)f(e[E][s],r.EMPTY_OLD_VALUE_ARG,e[b][s]);r.lastState=r.getCurrentState()},S=function(){for(var e=a(),t=!1,n=0;n<e.length;n++){var o=e[n];delete r[o],t=!0}return t},_=function(){p(),r.lastState=r.getCurrentState(),r.intervalId=y["default"].setInterval.call(r.window,function(){return m()},10)};this.setContext=function(e){r.context=e},this.getContext=function(){return r.context},this.saveToNativeStorage=function(){var e=h.stringify(r.getCurrentState());r.nativeStorage[r.nativeStorageKey]!==e&&(r.nativeStorage[r.nativeStorageKey]=e)},this.getCurrentState=function(){for(var e=a(),t=[[],[]],n=0;n<e.length;n++){var o=e[n];t[E].push(o),t[b].push(r[o])}return t},this.restore=function(e){S(),p(e),r.lastState=r.getCurrentState()},this.dispose=function(){y["default"].clearInterval.call(r.window,r.intervalId)};var x=function(e){return r.nativeStorage[g]=e,r.nativeStorage[g]},T=function(e){var t=r.wrapperMethods.indexOf(e)!==-1||r.initialProperties.indexOf(e)!==-1;return e=t?v+e:e,x(e)};this.clear=function(){S()&&(f(null,null,null),r.lastState=r.getCurrentState())},this.getItem=function(e){if(0===o.length)throw new TypeError;return e=T(e),r.hasOwnProperty(e)?r[e]:null},this.key=function(e){if(void 0===e)throw new TypeError;e%=4294967296;var t=a();return e>=0&&e<t.length?t[e]:null},this.removeItem=function(e){if(0===o.length)throw new TypeError;e=T(e),delete r[e],m()},this.setItem=function(e,t){if(o.length<2)throw new TypeError;e=T(e),t=x(t),r[e]=t,m()},this.initialProperties=Object.getOwnPropertyNames(this),this.wrapperMethods=s(),_()};e["default"]=S,S.prototype=Storage.prototype,t.exports=e["default"]}},"timers.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=n("./base"),l=r(a),u=n("./native-methods"),c=r(u),p=n("../../processing/script"),d=n("../utils/browser"),f=function(e){function t(){o(this,t);var n=i(this,e.call(this));return n.timeouts=[],n.deferredFunctions=[],n.setTimeout=c["default"].setTimeout,n}return s(t,e),t.prototype._wrapTimeoutFunctionsArguments=function(e){var t=this,n="string"==typeof e[0],r=n?null:e[0],o=n?(0,p.processScript)(e[0],!1):null;if(d.isIE&&d.version<12){var i=this,s=n?function(){var e=t.window.eval;return e(o)}:r;e[0]=function(){return i._callDeferredFunction(s,arguments)}}else n&&(e[0]=o);return e},t.prototype._callDeferredFunction=function(e,t){if(this.timeouts.length){for(var n=[],r=[],o=0;o<this.timeouts.length;o++)n.push(this.timeouts[o]),r.push(this.deferredFunctions[o]);this.timeouts=[],this.deferredFunctions=[];for(var i=0;i<n.length;i++)c["default"].clearInterval.call(this.window,n[i]),r[i]();return this._callDeferredFunction(e,t)}return e.apply(this.window,t)},t.prototype.attach=function(t){e.prototype.attach.call(this,t);var n=this;t.setTimeout=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return c["default"].setTimeout.apply(t,n._wrapTimeoutFunctionsArguments(r))},t.setInterval=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return c["default"].setInterval.apply(t,n._wrapTimeoutFunctionsArguments(r))},this.setTimeout=t.setTimeout},t.prototype.deferFunction=function(e){var t=this,n=function r(){e();for(var n=0;n<t.deferredFunctions.length;n++)if(t.deferredFunctions[n]===r){t.deferredFunctions.splice(n,1),t.timeouts.splice(n,1);break}};this.deferredFunctions.push(n),this.timeouts.push(c["default"].setTimeout.call(window,n,0))},t}(l["default"]);e["default"]=f,t.exports=e["default"]},upload:{"file-list-wrapper.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("../native-methods"),s=r(i),a=function(){function e(t){o(this,e),s["default"].objectDefineProperty.call(window.Object,this,"length",{get:function(){return t.length}});for(var n=0;n<t.length;n++)this[n]=e._createFileWrapper(t[n])}return e.prototype.item=function(e){return this[e]},e._base64ToBlob=function(e,t,n){t=t||"",n=n||512;for(var r=atob(e),o=[],i=0;i<r.length;i+=n){for(var s=r.slice(i,i+n),a=new Array(s.length),l=0;l<s.length;l++)a[l]=s.charCodeAt(l);o.push(new Uint8Array(a))}return new Blob(o,{type:t})},e._createFileWrapper=function(t){var n=null;return n=window.Blob?t.blob?new Blob([t.blob],{type:t.info.type}):e._base64ToBlob(t.data,t.info.type):{size:t.info.size,type:t.info.type},n.name=t.info.name,n.lastModifiedDate=new Date(t.info.lastModifiedDate),n.base64=t.data,n},e}();e["default"]=a,window.FileList&&(a.prototype=FileList.prototype),t.exports=e["default"]},"hidden-info.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=m["default"].createElement.call(document,"input");return t.type="hidden",t.name=f["default"].uploadInfoHiddenInputName,t.value="[]",m["default"].appendChild.call(e,t),t}function s(e){var t='[name="'+f["default"].uploadInfoHiddenInputName+'"]';return m["default"].elementQuerySelector.call(e,t)||i(e)}function a(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t.id||e[n].name===t.name)return n;return-1}function l(e,t,n){var r=u(e);if(r){var o=[];t=v.call(t);for(var i=0,s=t.length;i<s;i++){var l=t[i];o.push({name:l.name,type:l.type,data:l.base64})}var p=a(r,e),d={id:e.id,name:e.name,files:o,value:n};p===-1?r.push(d):r[p]=d,c(e,r)}}function u(e){return e.form?g.parse(s(e.form).value):null}function c(e,t){if(e.form){var n=s(e.form);n.value=g.stringify(t)}}function p(e){var t=u(e);if(t){var n=a(t,e);if(n!==-1)return t.splice(n,1),c(e,t),!0}return!1}e.__esModule=!0,e.addInputInfo=l,e.getFormInfo=u,e.setFormInfo=c,e.removeInputInfo=p;var d=n("../../../processing/dom/internal-attributes"),f=o(d),h=n("../native-methods"),m=o(h),y=n("../../json"),g=r(y),v=Array.prototype.slice},"index.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var a=n("../../../processing/dom/internal-properties"),l=r(a),u=n("../base"),c=r(u),p=n("./info-manager"),d=r(p),f=n("../../utils/dom"),h=n("../../utils/browser"),m=n("../../utils/event"),y=n("../backup"),g=function(e){function t(n,r,s){o(this,t);var a=i(this,e.call(this));return a.START_FILE_UPLOADING_EVENT="hammerhead|event|start-file-uploading",a.END_FILE_UPLOADING_EVENT="hammerhead|event|end-file-uploading",a.infoManager=new d["default"](s),a.listeners=n,a.eventSimulator=r,a}return s(t,e),t.prototype._riseChangeEvent=function(e){this.eventSimulator.change(e)},t._getCurrentInfoManager=function(e){var t=e[l["default"].processedContext];return(0,y.get)(t).upload.infoManager},t.prototype.attach=function(n){var r=this;e.prototype.attach.call(this,n),this.listeners.addInternalEventListener(n,["change"],function(e,n){var o=e.target,i=t._getCurrentInfoManager(o);if((0,f.isFileInput)(o)&&!n&&((0,m.stopPropagation)(e),(0,m.preventDefault)(e),o.value||i.getValue(o))){var s=d["default"].getFileNames(o.files,o.value);r.emit(r.START_FILE_UPLOADING_EVENT,s,o),i.loadFileListData(o,o.files).then(function(e){return i.setUploadInfo(o,e,o.value),d["default"].sendFilesInfoToServer(e,s)}).then(function(e){r._riseChangeEvent(o),r.emit(r.END_FILE_UPLOADING_EVENT,e)})}}),h.isIE&&this.listeners.addInternalEventListener(n,["click"],function(e,t){var n=e.target||e.srcElement;(0,f.isFileInput)(n)&&t&&(0,m.preventDefault)(e,!0)})},t.getFiles=function(e){return void 0!==e.files?t._getCurrentInfoManager(e).getFiles(e):void 0},t.getUploadElementValue=function(e){return t._getCurrentInfoManager(e).getValue(e)},t.prototype.setUploadElementValue=function(e,n){return""===n&&t._getCurrentInfoManager(e).clearUploadInfo(e)&&h.isIE&&h.version>10&&this._riseChangeEvent(e),n},t.prototype.doUpload=function(e,n){var r=this,o=t._getCurrentInfoManager(e);return n=n||[],d["default"].loadFilesInfoFromServer(n).then(function(e){return d["default"].prepareFileListWrapper(e)}).then(function(t){if(!t.errs.length){var i=d["default"].formatValue(n);o.setUploadInfo(e,t.fileList,i),r._riseChangeEvent(e)}return t.errs})},t}(c["default"]);e["default"]=g,t.exports=e["default"]},"info-manager.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n("../../../session/command"),a=o(s),l=n("./file-list-wrapper"),u=o(l),c=n("../../transport"),p=o(c),d=n("../../utils/browser"),f=r(d),h=n("./hidden-info"),m=r(h),y=n("pinkie"),g=o(y),v="C:\\fakepath\\",E=function(){function e(t){i(this,e),this.shadowUI=t,this.uploadInfo=[]}return e._getFileListData=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r.base64)}return t},e.formatValue=function(e){var t="";if(e="string"==typeof e?[e]:e,e&&e.length){if(!f.isWebKit)return e[0].split("/").pop();t=v+e[0].split("/").pop()}return t},e.getFileNames=function(e,t){var n=[];if(e)for(var r=0;r<e.length;r++){var o=e[r];n.push(o.name)}else t.lastIndexOf("\\")!==-1&&n.push(t.substr(t.lastIndexOf("\\")+1));return n},e.loadFilesInfoFromServer=function(e){return p["default"].asyncServiceMsg({cmd:a["default"].getUploadedFiles,filePaths:"string"==typeof e?[e]:e})},e.prepareFileListWrapper=function(e){for(var t=[],n=[],r=0;r<e.length;r++){var o=e[r];o.err?t.push(o):n.push(o)}return{errs:t,fileList:new u["default"](n)}},e.sendFilesInfoToServer=function(t,n){return p["default"].asyncServiceMsg({cmd:a["default"].uploadFiles,data:e._getFileListData(t),fileNames:n})},e.prototype.clearUploadInfo=function(e){var t=this.getUploadInfo(e);return t?(t.files=new u["default"]([]),t.value="",m.removeInputInfo(e)):null},e.prototype.getFiles=function(e){var t=this.getUploadInfo(e);return t?t.files:new u["default"]([])},e.prototype.getUploadInfo=function(e){for(var t=0,n=this.uploadInfo;t<n.length;t++){var r=n[t];if(r.input===e)return r}return null},e.prototype.getValue=function(e){var t=this.getUploadInfo(e);return t?t.value:""},e.prototype.loadFileListData=function(e,t){return t.length?new g["default"](function(e){var n=0,r=new FileReader,o=t[n],i=[];r.addEventListener("load",function(s){i.push({data:s.target.result.substr(s.target.result.indexOf(",")+1),blob:o.slice(0,o.size),info:{type:o.type,name:o.name,lastModifiedDate:o.lastModifiedDate}}),t[++n]?(o=t[n],r.readAsDataURL(o)):e(new u["default"](i))}),r.readAsDataURL(o)}):g["default"].resolve(new u["default"]([]))},e.prototype.setUploadInfo=function(e,t,n){var r=this.getUploadInfo(e);r||(r={input:e},this.uploadInfo.push(r)),r.files=t,r.value=n,m.addInputInfo(e,t,n)},e}();e["default"]=E,t.exports=e["default"]}},"windows-storage.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=(0,l.getTopSameDomainWindow)(window),t=e[p];return t||(t=[],c["default"].objectDefineProperty.call(window.Object,e,p,{value:t})),t}function i(e){for(var t=o(),n=t.length-1;n>=0;n--)try{if(t[n]===e)return}catch(r){t.splice(n,1)}t.push(e)}function s(e){var t=o(),n=t.indexOf(e);n!==-1&&t.splice(n,1)}function a(e){for(var t=o(),n=0;n<t.length;n++)try{if(t[n].name===e)return t[n]}catch(r){t.splice(n,1),n--}return null}e.__esModule=!0,e.add=i,e.remove=s,e.findByName=a;var l=n("../utils/dom"),u=n("./native-methods"),c=r(u),p="hammerhead|windows-storage"},"xhr.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var l=n("./base"),u=o(l),c=n("./native-methods"),p=o(c),d=n("../utils/url"),f=n("../../request-pipeline/xhr/headers"),h=o(f),m=n("../../request-pipeline/xhr/authorization"),y=o(m),g=n("../utils/destination-location"),v=n("../../utils/regexp-escape"),E=o(v),b=n("../json"),S=r(b),w="hammerhead|xhr|is-opened-xhr",_=new RegExp((0,E["default"])(h["default"].setCookie)+":[^\n]*\n","gi"),x=["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"],T=function(e){function t(n){i(this,t);var r=s(this,e.call(this));r.XHR_COMPLETED_EVENT="hammerhead|event|xhr-completed",r.XHR_ERROR_EVENT="hammerhead|event|xhr-error",r.BEFORE_XHR_SEND_EVENT="hammerhead|event|before-xhr-send",r.cookieSandbox=n;var o=new p["default"].XMLHttpRequest;return r.corsSupported="undefined"!=typeof o.withCredentials,r}return a(t,e),t.isOpenedXhr=function(e){return e[w]},t.createNativeXHR=function(){var e=new p["default"].XMLHttpRequest;return e.open=p["default"].xhrOpen,e.abort=p["default"].xhrAbort,e.send=p["default"].xhrSend,e.addEventListener=p["default"].xhrAddEventListener,e.removeEventListener=p["default"].xhrRemoveEventListener,e.setRequestHeader=p["default"].xhrSetRequestHeader,e.getResponseHeader=p["default"].xhrGetResponseHeader,e.getAllResponseHeaders=p["default"].xhrGetAllResponseHeaders,e.overrideMimeType=p["default"].xhrOverrideMimeType,e.dispatchEvent=p["default"].xhrDispatchEvent,e},t.openNativeXhr=function(e,t,n){e.open("POST",t,n),e.setRequestHeader("Cache-Control","no-cache, no-store, must-revalidate")},t.prototype.attach=function(t){e.prototype.attach.call(this,t);for(var n=this,r=t.XMLHttpRequest.prototype,o=p["default"].XMLHttpRequest.toString(),i=function c(){this.readyState===this.DONE&&(n.emit(n.XHR_COMPLETED_EVENT,{xhr:this}),p["default"].xhrRemoveEventListener.call(this,"readystatechange",c))},s=function f(){if(!(this.readyState<this.HEADERS_RECEIVED)){var e=p["default"].xhrGetResponseHeader.call(this,h["default"].setCookie);if(e){e=S.parse(e);for(var r=0,o=e;r<o.length;r++){var i=o[r];n.cookieSandbox.setCookie(t.document,i)}}p["default"].xhrRemoveEventListener.call(this,"readystatechange",f)}},a=function(){var e=new p["default"].XMLHttpRequest;return p["default"].xhrAddEventListener.call(e,"readystatechange",i),p["default"].xhrAddEventListener.call(e,"readystatechange",s),e},l=0;l<x.length;l++){var u=x[l];p["default"].objectDefineProperty.call(t.Object,a,u,{value:XMLHttpRequest[u],enumerable:!0})}t.XMLHttpRequest=a,a.prototype=r,a.toString=function(){return o},p["default"].objectDefineProperty.call(t.Object,r,"constructor",{value:a}),r.abort=function(){p["default"].xhrAbort.apply(this,arguments),n.emit(n.XHR_ERROR_EVENT,{err:new Error("XHR aborted"),xhr:this})},r.open=function(){this[w]=!0,n.corsSupported||(this.withCredentials=!1),"string"==typeof arguments[1]&&(arguments[1]=(0,d.getProxyUrl)(arguments[1])),p["default"].xhrOpen.apply(this,arguments)},r.send=function(){n.emit(n.BEFORE_XHR_SEND_EVENT,{xhr:this}),p["default"].xhrSetRequestHeader.call(this,h["default"].requestMarker,"true"),p["default"].xhrSetRequestHeader.call(this,h["default"].origin,(0,g.getOriginHeader)()),n.corsSupported&&p["default"].xhrSetRequestHeader.call(this,h["default"].corsSupported,"true"),this.withCredentials&&p["default"].xhrSetRequestHeader.call(this,h["default"].withCredentials,"true"),p["default"].xhrSend.apply(this,arguments),i.call(this),s.call(this)},r.getResponseHeader=function(e){return e===h["default"].setCookie?null:p["default"].xhrGetResponseHeader.call(this,e)},r.getAllResponseHeaders=function(){var e=p["default"].xhrGetAllResponseHeaders.call(this);return e?e.replace(_,""):e},r.setRequestHeader=function(e,t){return"string"==typeof e&&y["default"].headers.indexOf(e.toLowerCase())!==-1&&(t=y["default"].valuePrefix+t),p["default"].xhrSetRequestHeader.call(this,e,t)}},t}(u["default"]);e["default"]=T,t.exports=e["default"]}},"settings.js":function(e,t,n){e.__esModule=!0;var r={settings:{},set:function(e){this.settings=e},get:function(){return this.settings}};e["default"]=r,t.exports=e["default"]},"transport.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("./sandbox/native-methods"),s=r(i),a=n("./settings"),l=r(a),u=n("./sandbox/xhr"),c=r(u),p=n("./json"),d=n("./utils/browser"),f=n("pinkie"),h=r(f),m=50,y=function(){function e(){o(this,e),this.msgQueue={},this.activeServiceMessagesCounter=0}return e._storeMessage=function(t){var n=e._getStoredMessages();n.push(t),window.localStorage.setItem(l["default"].get().sessionId,(0,p.stringify)(n))},e._getStoredMessages=function(){var e=window.localStorage.getItem(l["default"].get().sessionId);return e?(0,p.parse)(e):[]},e._removeMessageFromStore=function(t){for(var n=e._getStoredMessages(),r=0;r<n.length;r++)if(n[r].cmd===t){n.splice(r,1);break}window.localStorage.setItem(l["default"].get().sessionId,(0,p.stringify)(n))},e.prototype._sendNextQueuedMsg=function(e){var t=this,n=this.msgQueue[e][0];this.asyncServiceMsg(n.msg).then(function(r){n.callback&&n.callback(r),t.msgQueue[e].shift(),t.msgQueue[e].length&&t._sendNextQueuedMsg(e)})},e.prototype._performRequest=function(t,n){var r=this;t.sessionId=l["default"].get().sessionId,isIframeWithoutSrc&&(t.referer=l["default"].get().referer);var o=function i(o){r.activeServiceMessagesCounter++;var s=!o,a=r,u=c["default"].createNativeXHR(),f=function(){a.activeServiceMessagesCounter--;var e=this.responseText&&(0,p.parse)(this.responseText);u=null,n(e)},h=function(){t.disableResending||(d.isWebKit?(e._storeMessage(t),f.call(this)):i(!0))};c["default"].openNativeXhr(u,l["default"].get().serviceMsgUrl,s),o?u.addEventListener("readystatechange",function(){4===this.readyState&&f.call(this)}):(u.addEventListener("load",f),u.addEventListener("abort",h),u.addEventListener("error",h),u.addEventListener("timeout",h)),u.send((0,p.stringify)(t))};e._removeMessageFromStore(t.cmd),o()},e.prototype.waitForServiceMessagesCompleted=function(e){var t=this;return new h["default"](function(n){if(!t.activeServiceMessagesCounter)return void n();var r=null,o=window.setTimeout(function(){s["default"].clearInterval.call(window,r),n()},e);r=window.setInterval(function(){t.activeServiceMessagesCounter||(s["default"].clearInterval.call(window,r),s["default"].clearTimeout.call(window,o),n())},m)})},e.prototype.asyncServiceMsg=function(e){var t=this;return new h["default"](function(n){t._performRequest(e,function(e){return n(e)})})},e.prototype.batchUpdate=function(){var t=e._getStoredMessages();if(t.length){var n=[];window.localStorage.removeItem(l["default"].get().sessionId);for(var r=0;r<t.length;r++){var o=t[r];n.push(this.queuedAsyncServiceMsg(o))}return h["default"].all(n)}return h["default"].resolve()},e.prototype.queuedAsyncServiceMsg=function(e){var t=this;return new h["default"](function(n){t.msgQueue[e.cmd]||(t.msgQueue[e.cmd]=[]),t.msgQueue[e.cmd].push({msg:e,callback:n}),1===t.msgQueue[e.cmd].length&&t._sendNextQueuedMsg(e.cmd)})},e}();e["default"]=new y,t.exports=e["default"]},utils:{"browser.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0,e.isElectron=e.isWebKit=e.isSafari=e.isChrome=e.isMSEdge=e.isFirefox=e.isIE9=e.isIE10=e.isIE11=e.isIE=e.webkitVersion=e.fullVersion=e.version=e.isTablet=e.isMobile=e.isIOS=e.isAndroid=e.isMacPlatform=e.compareVersions=void 0;var o=n("bowser"),i=r(o),s=navigator.userAgent.toLowerCase(),a=i["default"]._detect(s),l=s.match(/applewebkit\/(\d+(:?\.\d+)*)/),u=(e.compareVersions=i["default"].compareVersions,e.isMacPlatform=!!a.mac,e.isAndroid=!!a.android,e.isIOS=!!a.ios,e.isMobile=!!a.mobile,e.isTablet=!!a.tablet,e.version=parseInt(a.version,10)),c=(e.fullVersion=a.version,e.webkitVersion=l&&l[1]||"",e.isIE=!(!a.msie&&!a.msedge));e.isIE11=c&&11===u,e.isIE10=c&&10===u,e.isIE9=c&&9===u,e.isFirefox=!!a.firefox,e.isMSEdge=!!a.msedge,e.isChrome=!!a.chrome,e.isSafari=!!a.safari,e.isWebKit=!(!a.webkit&&!a.blink),e.isElectron=/electron/g.test(s)},"constructor-is-called-without-new-keyword.js":function(e,t,n){e.__esModule=!0,e["default"]=function(e,t){return e instanceof t==!1},t.exports=e["default"]},"cookie.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){e=(0,u["default"])(e);var t=p.exec(e);t&&(e=e.slice(0,t.index));var n=e.indexOf(";"),r=n>-1?e.substr(0,n):e,o=c.exec(r);if(!o)return null;var i={key:o[1]?(0,u["default"])(o[2]):"",value:(0,u["default"])(o[3])};if(n===-1)return i;var s=(0,u["default"])(e.slice(n).replace(/^\s*;\s*/,""));if(0===s.length)return i;for(var a=s.split(/\s*;\s*/);a.length;){var l=a.shift(),d=l.indexOf("="),f=null,h=null;switch(d===-1?f=l:(f=l.substr(0,d),h=(0,u["default"])(l.substr(d+1))),f=(0,u["default"])(f.toLowerCase())){case"expires":case"max-age":case"path":i[f]=h;break;case"secure":case"httponly":i[f]=!0;break;case"domain":i.domain=(0,u["default"])(h.replace(/^\./,""))}}return i}function i(e){var t=e.value||"";""!==e.key&&(t=e.key+"="+t),t+=";";for(var n in e)e.hasOwnProperty(n)&&"key"!==n&&"value"!==n&&(t+=n,void 0!==e[n]&&e[n]!==!0&&(t+="="+e[n]),t+=";");return t}function s(e,t){for(var n=e.cookie.split(";"),r=0;r<n.length;r++){var o=(0,u["default"])(n[r]);if(0===o.indexOf(t+"=")||o===t)return o}return null}function a(e,t){t.expires="Thu, 01 Jan 1970 00:00:01 GMT",t.value="",e.cookie=i(t)}e.__esModule=!0,e.parse=o,e.format=i,e.get=s,e.del=a;var l=n("../../utils/string-trim"),u=r(l),c=/^((?:=)?([^=;]*)\s*=\s*)?([^\n\r\0]*)/,p=/;+$/},"create-event.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n={},r=l["default"].objectCreate.call(window.Object,n);for(var o in e){var i=null;i="function"==typeof e[o]?(0,s["default"])(e[o],e):t.hasOwnProperty(o)?t[o]:e[o],e.hasOwnProperty(o)?r[o]=i:n[o]=i}return r}e.__esModule=!0,e["default"]=o;var i=n("./fn-bind"),s=r(i),a=n("../sandbox/native-methods"),l=r(a);t.exports=e["default"]},"create-property-desc.js":function(e,t,n){function r(e){return e.configurable=!0,e.enumerable=!0,e}e.__esModule=!0,e["default"]=r,t.exports=e["default"]},"destination-location.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(){if(w)return w;var e=g.getFrameElement(window);return e&&g.isIframeWithoutSrc(e)?S["default"].get().referer:window.location.toString()}function s(e){w=e}function a(e,t,n){return t&&(t=l(t)),m.sameOriginCheck(e,t,n)}function l(e,t){return e=m.prepareUrl(e),e&&0===e.indexOf("//")&&(e=d().protocol+e),E.resolve(e,t||document)}function u(){var e=i();return m.parseProxyUrl(e).destUrl}function c(e){var t=u();return t=t.replace(/(#.*)$/,""),t+e}function p(){var e=m.parseProxyUrl(i());return e.partAfterHost.replace(e.destResourceInfo.partAfterHost,"")}function d(){var e=E.getResolverElement(document),t=u(),n=m.parseUrl(t);e.href=u();var r=0===e.pathname.indexOf("/")?e.pathname:"/"+e.pathname;return{protocol:e.protocol,port:n.port?e.port:"",hostname:e.hostname,host:n.port?e.host:e.host.replace(/:\d+$/,""),pathname:r,hash:e.hash,search:e.search}}function f(){var e=d();return"file:"===e.protocol?u():m.getDomain(e)}e.__esModule=!0,e.getLocation=i,e.forceLocation=s,e.sameOriginCheck=a,e.resolveUrl=l,e.get=u,e.withHash=c,e.getCookiePathPrefix=p,e.getParsed=d,e.getOriginHeader=f;var h=n("../../utils/url"),m=o(h),y=n("./dom"),g=o(y),v=n("./url-resolver"),E=o(v),b=n("../settings"),S=r(b),w=null},"dom.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(){return'input, select, textarea, button, body, iframe, [contenteditable="true"], [contenteditable=""], [tabIndex]'}function s(e){return e.offsetWidth<=0&&e.offsetHeight<=0}function a(e){var t=N(e);return t&&(ut.test(t)||ct.test(t))}function l(e,t){for(;e;){if(Ce(e,t))return e;e=e.parentNode}return null}function u(e,t){if(t){for(var n=t.split(/\s+/),r=" "+e.className+" ",o=0;o<n.length;o++){var i=n[o];r.indexOf(" "+i+" ")===-1&&(r+=i+" ")}e.className=(0,Ye["default"])(r)}}function c(e,t){if(e.className&&t){var n=(t||"").split(/\s+/);t=(" "+e.className+" ").replace(/[\n\t\r]/g," ");for(var r=0;r<n.length;r++)t=t.replace(" "+n[r]+" "," ");e.className=(0,Ye["default"])(t)}}function p(e,t){var n=(" "+e.className+" ").replace(/[\n\t\r]/g," ");return t=" "+t+" ",n.indexOf(t)!==-1}function d(e){return Je.instanceAndPrototypeToStringAreEqual?e&&"object"==typeof e?We["default"].objectToString.call(Object.getPrototypeOf(e)):"":We["default"].objectToString.call(e)}function f(e){for(var t=e||document,n=P(t.activeElement)?t.activeElement:t.body;n&&n.shadowRoot;){var r=n.shadowRoot.activeElement;if(!r)break;n=r}return n}function h(e,t){var n=w(e);return n.indexOf(t)}function m(e){var t=e[Fe["default"].processedContext];return g(t)}function y(e){var t=null;try{t=e.contentDocument.location.href}catch(n){t=null}var r=We["default"].getAttribute.call(e,"src"+De["default"].storedAttrPostfix)||We["default"].getAttribute.call(e,"src")||e.src,o=t&&Ge.isSupportedProtocol(t)&&Ge.parseProxyUrl(t),i=r&&Ge.isSupportedProtocol(r)&&Ge.parseProxyUrl(r);return{documentLocation:o?o.destUrl:t,srcLocation:i?i.destUrl:r}}function g(e){try{return e.frameElement}catch(t){return null}}function v(e){var t=Ae(e,"map"),n=We["default"].getAttribute.call(t,"name"),r='[usemap="#'+n+'"]';return We["default"].querySelector.call(T(e),r)}function E(e){var t=e.parent,n=null;if(e===e.top)return e;if(t===e.top||I(e,t))return t;try{n=t.frameElement}catch(r){n=null}return null!==n&&L(n)?E(t):t}function b(){if(!et){var e=We["default"].createElement.call(document,"div");e.style.height="100px",e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",e.style.width="100px",We["default"].appendChild.call(document.body,e);var t=e.offsetWidth-e.clientWidth;et=t,e.parentNode.removeChild(e)}return et}function S(e){return Ae(e.parentNode,"select")}function w(e){var t=We["default"].elementQuerySelectorAll.call(e,"optgroup, option");if(t=Ze.call(t),$e.isFirefox){for(var n=[],r=0,o=t;r<o.length;r++){var i=o[r];("optgroup"!==N(i)||i.label)&&n.push(i)}t=n}return t}function _(e){var t=e,n=e.parent;if(t===e.top)return t;for(;n;){if(!I(e,n)){var r=g(n);r&&L(r)||(t=n)}n=n!==e.top?n.parent:null}return t}function x(e,t,n){var r=(0,Qe.getNativeQuerySelectorAll)(e).call(e,t);if(n)for(var o=0;o<r.length;o++){var i=r[o];n(i)}return r}function T(e){return e.documentElement?e:e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument:e.parentNode?T(e.parentNode):document}function C(e){var t=!1,n=null;return n=ge(e)?e.parentElement||e.parentNode:e,!!n&&(t=n.isContentEditable&&!a(n),Z(n)&&(t||"on"===T(e).designMode))}function A(e,t){var n=y(e);if(!t&&null===n.documentLocation)return!0;var r=t?n.srcLocation:n.documentLocation;return!(!r||!Ge.isSupportedProtocol(r))&&!(0,Ke.sameOriginCheck)(location.toString(),r)}function I(e,t){try{if(e===t)return!1;var n=e.location.toString(),r=t.location.toString();return!(!Ge.isSupportedProtocol(n)||!Ge.isSupportedProtocol(r))&&!(0,Ke.sameOriginCheck)(n,r)}catch(o){return!0}}function P(e){return e instanceof We["default"].elementClass||e&&st.test(d(e))&&ye(e)&&e.tagName}function N(e){return e&&"string"==typeof e.tagName?e.tagName.toLowerCase():""}function M(e,t){var n=t||document;return n.documentElement.contains(e)}function O(e,t){var n=t||T(e);return window.document!==n}function j(e){return e===De["default"].focusPseudoClass||e===De["default"].hoverPseudoClass||e.indexOf(De["default"].storedAttrPostfix)!==-1}function k(e){return"[object HTMLIFrameElement]"===d(e)}function L(e){var t=y(e),n=t.srcLocation,r=t.documentLocation;if(null===r)return!1;var o=Ge.isSupportedProtocol(r);if(!(o||e.attributes.src&&e.attributes.src.value))return!0;var i=E(e.contentWindow),s=Ge.parseProxyUrl(i.location.toString()),a=s?s.destUrl:i.location.toString();if(o){var l=Ge.isSupportedProtocol(n)?Ge.parseUrl(n):null;return(!l||!l.partAfterHost||r!==a)&&r===a}return n===a||(!n||!Ge.isSupportedProtocol(n))&&!o}function R(e){return"[object HTMLImageElement]"===d(e)}function D(e){return"[object HTMLInputElement]"===d(e)}function U(e){return"[object HTMLButtonElement]"===d(e)}function F(e){return"[object HTMLHtmlElement]"===d(e)}function B(e){return"[object HTMLBodyElement]"===d(e)}function H(e){return"[object HTMLHeadElement]"===d(e)}function V(e){return"[object HTMLBaseElement]"===d(e)}function W(e){return"[object HTMLScriptElement]"===d(e)}function q(e){return"[object HTMLStyleElement]"===d(e)}function G(e){return"[object HTMLLabelElement]"===d(e)}function X(e){return"[object HTMLTextAreaElement]"===d(e)}function K(e){return"[object HTMLOptionElement]"===d(e)}function $(e){return"[object HTMLSelectElement]"===d(e)}function z(e){return"[object HTMLFormElement]"===d(e)}function Y(e){return D(e)&&"file"===e.type.toLowerCase()}function Q(e){return B(e)&&e.children.length}function J(e){return tt.indexOf(d(e))!==-1}function Z(e){return!(ve(e)||Ee(e)||pt.test(e.nodeName))}function ee(e){var t=We["default"].getAttribute.call(e,"tabIndex");return t=parseInt(t,10),isNaN(t)?null:t}function te(e){if(!e)return!1;var t=ee(e),n=Ce(e,":disabled"),r="hidden"===(0,Xe.get)(e,"visibility"),o="none"===(0,Xe.get)(e,"display"),a=$e.isWebKit?s(e)&&!K(e):s(e);return!(n||r||o||a)&&((!K(e)||!$e.isIE)&&(we(e)?null!==t||Ce(e,"a[href]"):!(!xe(e)||!$e.isIE)||(Ce(e,i())||null!==t)))}function ne(e){return!!e[Fe["default"].shadowUIElement]}function re(e){if(e instanceof We["default"].windowClass)return!0;try{return e&&e.toString&&nt===d(e)}catch(t){try{return!!e.top}catch(n){
return!1}}}function oe(e){if(e instanceof We["default"].documentClass)return!0;try{return e&&rt.test(d(e))}catch(t){return!1}}function ie(e){return e&&(e instanceof XMLHttpRequest||"[object XMLHttpRequest]"===d(e))}function se(e){return e&&"[object Blob]"===d(e)}function ae(e){if(e instanceof We["default"].locationClass)return!0;try{return e&&"object"==typeof e&&void 0!==e.href&&void 0!==e.assign}catch(t){return e.replace&&e.assign}}function le(e){return e instanceof We["default"].svgElementClass||e&&it.test(d(e))}function ue(e){return!!Ae(e,"svg")}function ce(e){return!!(We["default"].Headers&&e instanceof We["default"].Headers)||e&&"[object Headers]"===d(e)}function pe(e){return!!(We["default"].Request&&e instanceof We["default"].Request)||e&&"[object Request]"===d(e)}function de(e){return e.readOnly||"readonly"===e.getAttribute("readonly")}function fe(e){var t=e.getAttribute("type");return D(e)&&t?dt.test(t):dt.test(e.type)}function he(e){return fe(e)||X(e)}function me(e){return he(e)&&!de(e)}function ye(e){return e&&e.nodeType===lt}function ge(e){return"[object Text]"===d(e)}function ve(e){return ot.test(d(e))}function Ee(e){return"[object Comment]"===d(e)}function be(e){return"[object DocumentFragment]"===d(e)}function Se(e){return"[object ShadowRoot]"===d(e)}function we(e){return"[object HTMLAnchorElement]"===d(e)}function _e(e){return"[object HTMLTableElement]"===d(e)}function xe(e){return d(e)===at}function Te(e){return"[object WebSocket]"===d(e)}function Ce(e,t){if(!e)return!1;var n=e.matches||e.webkitMatchesSelector||e.msMatchesSelector;return!!n&&n.call(e,t)}function Ae(e,t){return e&&e.closest?e.closest(t):l(e,t)}function Ie(e,t){if(e)if(e&&e.classList)for(var n=t.split(/\s+/),r=0;r<n.length;r++){var o=n[r];e.classList.add(o)}else u(e,t)}function Pe(e,t){if(e)if(e.classList)for(var n=t.split(/\s+/),r=0;r<n.length;r++){var o=n[r];e.classList.remove(o)}else c(e,t)}function Ne(e,t){return!!e&&(e.classList?e.classList.contains(t):p(e,t))}function Me(){var e=We["default"].querySelector.call(document,"."+He["default"].charset);return e&&e.getAttribute("charset")}function Oe(e,t){for(var n=e.parentNode||e.host,r=[];n;)(!t&&ye(n)||t&&Ce(n,t))&&r.push(n),n=n.parentNode||n.host;return r}function je(e){return Y(e)?[e]:(0,Qe.getNativeQuerySelectorAll)(e).call(e,"input[type=file]")}function ke(e){return k(e)?[e]:(0,Qe.getNativeQuerySelectorAll)(e).call(e,"iframe,frame")}function Le(e){return W(e)?[e]:(0,Qe.getNativeQuerySelectorAll)(e).call(e,"script")}e.__esModule=!0,e.instanceToString=d,e.getActiveElement=f,e.getChildVisibleIndex=h,e.getIframeByElement=m,e.getIframeLocation=y,e.getFrameElement=g,e.getMapContainer=v,e.getParentWindowWithSrc=E,e.getScrollbarSize=b,e.getSelectParent=S,e.getSelectVisibleChildren=w,e.getTopSameDomainWindow=_,e.find=x,e.findDocument=T,e.isContentEditableElement=C,e.isCrossDomainIframe=A,e.isCrossDomainWindows=I,e.isDomElement=P,e.getTagName=N,e.isElementInDocument=M,e.isElementInIframe=O,e.isHammerheadAttr=j,e.isIframeElement=k,e.isIframeWithoutSrc=L,e.isImgElement=R,e.isInputElement=D,e.isButtonElement=U,e.isHtmlElement=F,e.isBodyElement=B,e.isHeadElement=H,e.isBaseElement=V,e.isScriptElement=W,e.isStyleElement=q,e.isLabelElement=G,e.isTextAreaElement=X,e.isOptionElement=K,e.isSelectElement=$,e.isFormElement=z,e.isFileInput=Y,e.isBodyElementWithChildren=Q,e.isMapElement=J,e.isRenderedNode=Z,e.getTabIndex=ee,e.isElementFocusable=te,e.isShadowUIElement=ne,e.isWindow=re,e.isDocument=oe,e.isXMLHttpRequest=ie,e.isBlob=se,e.isLocation=ae,e.isSVGElement=le,e.isSVGElementOrChild=ue,e.isFetchHeaders=ce,e.isFetchRequest=pe,e.isElementReadOnly=de,e.isTextEditableInput=fe,e.isTextEditableElement=he,e.isTextEditableElementAndEditingAllowed=me,e.isElementNode=ye,e.isTextNode=ge,e.isProcessingInstructionNode=ve,e.isCommentNode=Ee,e.isDocumentFragmentNode=be,e.isShadowRoot=Se,e.isAnchorElement=we,e.isTableElement=_e,e.isTableDataCellElement=xe,e.isWebSocket=Te,e.matches=Ce,e.closest=Ae,e.addClass=Ie,e.removeClass=Pe,e.hasClass=Ne,e.parseDocumentCharset=Me,e.getParents=Oe,e.getFileInputs=je,e.getIframes=ke,e.getScripts=Le;var Re=n("../../processing/dom/internal-attributes"),De=o(Re),Ue=n("../../processing/dom/internal-properties"),Fe=o(Ue),Be=n("../../shadow-ui/class-name"),He=o(Be),Ve=n("../sandbox/native-methods"),We=o(Ve),qe=n("./url"),Ge=r(qe),Xe=n("./style"),Ke=n("./destination-location"),$e=n("./browser"),ze=n("../../utils/string-trim"),Ye=o(ze),Qe=n("./query-selector"),Je=n("../utils/feature-detection"),Ze=Array.prototype.slice,et=null,tt=["[object HTMLMapElement]","[object HTMLAreaElement]"],nt=d(window),rt=/^\[object .*?Document]$/i,ot=/^\[object .*?ProcessingInstruction]$/i,it=/^\[object SVG\w+?Element]$/i,st=/^\[object HTML.*?Element]$/i,at=d(We["default"].createElement.call(document,"td")),lt=Node.ELEMENT_NODE,ut=/^(select|option|applet|area|audio|canvas|datalist|keygen|map|meter|object|progress|source|track|video|img)$/,ct=/^(input|textarea|button)$/,pt=/^(script|style)$/i,dt=/^(email|number|password|search|tel|text|url)$/},"event-emitter.js":function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=Array.prototype.slice,i=function(){function e(){r(this,e),this.eventsListeners=[]}return e.prototype.emit=function(e){var t=this.eventsListeners[e];if(t)for(var n=0;n<t.length;n++)try{t[n]&&t[n].apply(this,o.apply(arguments,[1]))}catch(r){if(!(r.message&&r.message.indexOf("freed script")>-1))throw r;t[n]=null}},e.prototype.off=function(e,t){var n=this.eventsListeners[e];if(n){for(var r=[],o=0;o<n.length;o++){var i=n[o];i!==t&&r.push(i)}this.eventsListeners[e]=r}},e.prototype.on=function(e,t){return this.eventsListeners[e]||(this.eventsListeners[e]=[]),this.eventsListeners[e].push(t),t},e}();e["default"]=i,t.exports=e["default"]},"event.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1,t||i(e)}function i(e){e.stopImmediatePropagation?e.stopImmediatePropagation():e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0}function s(e){return"object"==typeof e&&e&&"function"==typeof e.handleEvent}e.__esModule=!0,e.hasPointerEvents=e.DOM_EVENTS=e.KEYBOARD_MODIFIERS_PARAMETER=e.WHICH_PARAMETER=e.BUTTONS_PARAMETER=e.BUTTON=void 0,e.preventDefault=o,e.stopPropagation=i,e.isObjectEventListener=s;var a=n("../sandbox/native-methods"),l=r(a);e.BUTTON={left:0,middle:1,right:2},e.BUTTONS_PARAMETER={noButton:0,leftButton:1,rightButton:2},e.WHICH_PARAMETER={noButton:0,leftButton:1,middleButton:2,rightButton:3},e.KEYBOARD_MODIFIERS_PARAMETER={altKey:"Alt",ctrlKey:"Control",shiftKey:"Shift",metaKey:"Meta"},e.DOM_EVENTS=["click","mousedown","mouseup","dblclick","contextmenu","mousemove","mouseover","mouseout","touchstart","touchmove","touchend","keydown","keypress","input","keyup","change","focus","blur","MSPointerDown","MSPointerMove","MSPointerOver","MSPointerOut","MSPointerUp","pointerdown","pointermove","pointerover","pointerout","pointerup","focusin","focusout","mouseenter","mouseleave","pointerenter","pointerleave"],e.hasPointerEvents=!(!l["default"].WindowPointerEvent&&!l["default"].WindowMSPointerEvent)},"extend.js":function(e,t,n){function r(){var e=arguments[0]||{},t=null,n=null;"object"!=typeof e&&"[object Function]"!==e.toString()&&(e={});for(var r=1;r<arguments.length;r++)if(t=arguments[r],null!==t)for(var o in t)n=t[o],e!==n&&void 0!==n&&(e[o]=n);return e}e.__esModule=!0,e["default"]=r,t.exports=e["default"]},"fast-apply.js":function(e,t,n){function r(e,t,n){var r=e[t];switch(n.length){case 1:return r.call(e,n[0]);case 2:return r.call(e,n[0],n[1]);case 3:return r.call(e,n[0],n[1],n[2]);case 4:return r.call(e,n[0],n[1],n[2],n[3]);case 5:return r.call(e,n[0],n[1],n[2],n[3],n[4]);default:return r.apply(e,n)}}e.__esModule=!0,e["default"]=r,t.exports=e["default"]},"feature-detection.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0,e.hasUnhandledRejectionEvent=e.hasDataTransfer=e.isTouchDevice=e.hasTouchPoints=e.hasTouchEvents=e.instanceAndPrototypeToStringAreEqual=e.emptyActionAttrFallbacksToTheLocation=void 0;var i=n("../sandbox/native-methods"),s=o(i),a=n("./browser"),l=r(a),u=(e.emptyActionAttrFallbacksToTheLocation=s["default"].createElement.call(document,"form").action===window.location.toString(),e.instanceAndPrototypeToStringAreEqual=s["default"].objectToString.call(window)===s["default"].objectToString.call(Window.prototype),e.hasTouchEvents="ontouchstart"in window);e.hasTouchPoints=l.isIE&&(navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),e.isTouchDevice=(l.isMobile||l.isTablet)&&u,e.hasDataTransfer=!!window.DataTransfer,e.hasUnhandledRejectionEvent="onunhandledrejection"in window},"fn-bind.js":function(e,t,n){function r(e,t){return function(){return e.apply(t,arguments)}}e.__esModule=!0,e["default"]=r,t.exports=e["default"]},"html.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(){try{ee.location&&ee.location.toString()}catch(e){ee=document.implementation.createHTMLDocument("title"),te=ee.createDocumentFragment()}return ee}function s(e){return e.replace(W,q).replace(B,H).replace(U,F)}function a(e){return e.replace(G,"<!doctype$1>").replace(V,"<$2$1$4$3").replace(D,"$1")}function l(e){return/^\s*(<\s*(!doctype|html|head|body)[^>]*>)/i.test(e)}function u(e,t){var n=i().createElement("div");e=s(e),te.innerHTML="",E["default"].appendChild.call(te,n),n.innerHTML=e;var r=t(n)?n.innerHTML:e;return n.parentNode.removeChild(n),r=a(r),P.isIE&&!P.isMSEdge&&e!==r&&(r=f(e,r)),r}function c(e){return u(e,function(e){var t=!1;return(0,A.find)(e,z,function(e){for(var n=0;n<$.length;n++){var r=$[n],o=r.attr,i=r.storedAttr;e.hasAttribute(o)?E["default"].setAttribute.call(e,o,E["default"].getAttribute.call(e,i)):"autocomplete"===o&&E["default"].removeAttribute.call(e,o),E["default"].removeAttribute.call(e,i)}t=!0}),(0,A.find)(e,Y,function(e){e.parentNode&&(E["default"].removeChild.call(e.parentNode,e),t=!0)}),(0,A.find)(e,"script",function(e){var n=e.textContent,r=(0,x.remove)(n);n!==r&&(e.textContent=r,t=!0)}),(0,A.find)(e,"style",function(e){var n=e.textContent,r=C["default"].cleanUp(n,I.parseProxyUrl);n!==r&&(e.textContent=r,t=!0)}),(0,A.find)(e,Q,function(e){E["default"].removeAttribute.call(e,m["default"].hoverPseudoClass),E["default"].removeAttribute.call(e,m["default"].focusPseudoClass),t=!0}),(0,A.find)(e,J,function(e){e.innerHTML.indexOf(Z)!==-1&&(e.innerHTML=e.innerHTML.replace(Z,""),t=!0)}),t})}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.parentTag,r=t.prepareDom,o=t.processedContext;return u(e,function(e){var t=[],i=[],s=M.getBaseUrl(document);r&&r(e),1===e.children.length&&e.children[0].children&&!e.children[0].children.length?i=[e.children[0]]:e.children.length&&(i=E["default"].elementQuerySelectorAll.call(e,"*"));var l=E["default"].elementQuerySelector.call(e,"base");l&&M.updateBase(E["default"].getAttribute.call(l,"href"),document);for(var u=0,c=i;u<c.length;u++){var p=c[u];(0,A.isScriptElement)(p)&&(p.textContent=a(p.textContent)),p[j["default"].processedContext]=o,_["default"].processElement(p,I.convertToProxyUrl);var d=(0,A.getTagName)(p);d!==k+"head"&&d!==k+"body"||t.push(p)}if(!n)for(var f=0;f<t.length;f++){var h=t[f];h.innerHTML=Z+h.innerHTML}return M.updateBase(s,document),!0})}function d(){te=null,ee=null}function f(e,t){var n=e.match(X),r=0;return n?t.replace(X,function(e){var t=n[r],o=t?t.match(K):null;return t&&r++,t?e.replace(K,function(){var e=o?o.join(""):"";return o&&(o=null),e}):e}):t}e.__esModule=!0,e.INIT_SCRIPT_FOR_IFRAME_TEMPLATE=void 0,e.isPageHtml=l,e.cleanUpHtml=c,e.processHtml=p,e.dispose=d;var h=n("../../processing/dom/internal-attributes"),m=o(h),y=n("../../shadow-ui/class-name"),g=o(y),v=n("../sandbox/native-methods"),E=o(v),b=n("../../processing/dom"),S=o(b),w=n("../dom-processor"),_=o(w),x=n("../../processing/script/header"),T=n("../../processing/style"),C=o(T),A=n("./dom"),I=n("./url"),P=n("./browser"),N=n("./url-resolver"),M=r(N),O=n("../../processing/dom/internal-properties"),j=o(O),k="hh_fake_tag_name_",L="hh_fake_doctype",R="hh_fake_attr",D=new RegExp("(<\\/?)"+k,"ig"),U=/(<\/?)(html|head|body|table|tbody|tfoot|thead|tr|td|th|caption|colgroup)((?:\s[^>]*)?>)/gi,F="$1"+k+"$2$3",B=/<(\/?(?:col|noscript))(\s[^>]*?)?(\s?\/)?>/gi,H="<br "+R+'="$1|$3"$2>',V=new RegExp("<br([^>]*?) "+R+'="([^|]+)\\|([^"]*)"([^>]*)',"ig"),W=/<!doctype([^>]*)>/gi,q="<"+L+">$1</"+L+">",G=new RegExp("<"+L+">([\\S\\s]*?)</"+L+">","ig"),X=/<svg\s?[^>]*>/gi,K=/\s(?:NS[0-9]+:[^"']+('|")[\S\s]*?\1|[^:]+:NS[0-9]+=(?:""|''))/g,$=S["default"].getAttrsForCleaning(),z=function(){for(var e=[],t=0;t<$.length;t++){var n=$[t].storedAttr;e.push(n)}return"["+e.join("],[")+"]"}(),Y='[class*="'+g["default"].postfix+'"]',Q="["+m["default"].hoverPseudoClass+"],["+m["default"].focusPseudoClass+"]",J=k+"head, "+k+"body",Z=e.INIT_SCRIPT_FOR_IFRAME_TEMPLATE=('\n    <script class="'+g["default"].selfRemovingScript+'" type="text/javascript">\n        (function () {\n            var parentHammerhead = null;\n\n            try {\n                parentHammerhead = window.parent["'+j["default"].hammerhead+'"];\n            } catch(e) {}\n\n            if (parentHammerhead) parentHammerhead.sandbox.onIframeDocumentRecreated(window.frameElement);\n\n            var script = document.currentScript || document.scripts[document.scripts.length - 1];\n\n            script.parentNode.removeChild(script);\n        })();\n    </script>').replace(/\n\s*/g,""),ee=document.implementation.createHTMLDocument("title"),te=ee.createDocumentFragment()},"is-jquery-object.js":function(e,t,n){function r(e){return e&&!!e.jquery}e.__esModule=!0,e["default"]=r,t.exports=e["default"]},"next-tick.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0,e["default"]=function(){return new i["default"](function(e){return a["default"].setTimeout.call(window,e,0)})};var o=n("pinkie"),i=r(o),s=n("../sandbox/native-methods"),a=r(s);t.exports=e["default"]},"position.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n=f["default"].getAttribute.call(e,"shape"),r=f["default"].getAttribute.call(e,"coords"),o=0;if("default"===n)return u(t);if(!n||!r)return null;if(r=r.split(","),!r.length)return null;for(o=0;o<r.length;o++)if(r[o]=parseInt(r[o],10),"number"!=typeof r[o])return null;var i=null;switch(n){case"rect":4===r.length&&(i={height:r[3]-r[1],left:r[0],top:r[1],width:r[2]-r[0]});break;case"circle":3===r.length&&(i={height:2*r[2],left:r[0]-r[2],top:r[1]-r[2],width:2*r[2]});break;case"poly":if(r.length>=6&&r.length%2===0){for(i={},i.left=i.right=r[0],i.top=i.bottom=r[1],o=2;o<r.length;o+=2)i.left=r[o]<i.left?r[o]:i.left,i.right=r[o]>i.right?r[o]:i.right;for(o=3;o<r.length;o+=2)i.top=r[o]<i.top?r[o]:i.top,i.bottom=r[o]>i.bottom?r[o]:i.bottom;i.height=i.bottom-i.top,i.width=i.right-i.left}}if(i){var s=c(t);i.left+=s.left,i.top+=s.top}return i}function s(e){var t=m.getMapContainer(e);if(t){if(/^map$/i.test(e.tagName))return u(t);if(/^area$/i.test(e.tagName)){var n=i(e,t);if(n)return n}}return{height:0,left:0,top:0,width:0}}function a(e){var t=m.getSelectParent(e);if(t){var n=u(t),r=g.getBordersWidth(t),o=g.getInnerWidth(t)===t.clientWidth?0:m.getScrollbarSize(),i=g.getOptionHeight(t),s=m.getChildVisibleIndex(t,e),a=Math.max(s-g.getScrollTop(t)/i,0);return{height:i,left:n.left+r.left,top:n.top+r.top+g.getElementPadding(t).top+a*i,width:n.width-(r.left+r.right)-o}}return u(e)}function l(e){var t=m.matches(e,"tspan")||m.matches(e,"tref")||"textpath"===m.getTagName(e),n=e.getBoundingClientRect(),r={height:t?e.offsetHeight:n.height,left:n.left+(document.body.scrollLeft||document.documentElement.scrollLeft),top:n.top+(document.body.scrollTop||document.documentElement.scrollTop),width:t?e.offsetWidth:n.width};if(t){var o=g.getOffsetParent(e),i=g.getOffset(e),s=g.getOffset(o),a=m.matches(o,"body");return{height:r.height||n.height,left:a?e.offsetLeft||i.left:s.left+e.offsetLeft,top:a?e.offsetTop||i.top:s.top+e.offsetTop,width:r.width||n.width}}if(v.isFirefox||v.isIE)return r;var l=f["default"].getAttribute.call(e,"stroke-width")||g.get(e,"stroke-width");return l=l?+l.replace(/px|em|ex|pt|pc|cm|mm|in/,""):1,l&&+l%2!==0&&(l=+l+1),!(m.matches(e,"line")||m.matches(e,"polyline")||m.matches(e,"polygon")||m.matches(e,"path"))||r.width&&r.height?(m.matches(e,"polygon")&&(r.height+=2*l,r.left-=l,r.top-=l,r.width+=2*l),r.height+=l,r.left-=l/2,r.top-=l/2,r.width+=l):!r.width&&r.height?(r.left-=l/2,r.width=l):r.width&&!r.height&&(r.height=l,r.top-=l/2),r}function u(e){var t={};if(m.isMapElement(e))t=s(e);else if(g.isVisibleChild(e))t=a(e);else{var n=c(e),r=m.isSVGElementOrChild(e)?l(e):e.getBoundingClientRect();t={height:r.height,left:n.left,top:n.top,width:r.width}}return t.height=Math.round(t.height),t.left=Math.round(t.left),t.top=Math.round(t.top),t.width=Math.round(t.width),t}function c(e){if(m.isMapElement(e)){var t=s(e);return{left:t.left,top:t.top}}var n=m.findDocument(e),r=m.isElementInIframe(e,n),o=r?m.getIframeByElement(n):null,i=n===e?g.getOffset(n.documentElement):g.getOffset(e),a=null,u=n.body?g.getBordersWidth(n.body):{left:0,top:0};if(!r||!o){var d=m.isSVGElementOrChild(e);return a=d?l(e):null,{left:Math.round(d?a.left+u.left:i.left+u.left),top:Math.round(d?a.top+u.top:i.top+u.top)}}var f=g.getBordersWidth(o);u.left+=f.left,u.top+=f.top;var h=c(o),y=g.getElementPadding(o),v=null;return m.isSVGElementOrChild(e)?(a=l(e),v={x:a.left-(document.body.scrollLeft||document.documentElement.scrollLeft)+u.left,y:a.top-(document.body.scrollTop||document.documentElement.scrollTop)+u.top}):v=p({x:i.left+u.left,y:i.top+u.top},n),{left:Math.round(h.left+v.x+y.left),top:Math.round(h.top+v.y+y.top)}}function p(e,t){var n=t||document,r=g.getScrollLeft(n),o=g.getScrollTop(n),i=g.getScrollLeft(n.body),s=g.getScrollTop(n.body),a=0===r&&0!==i?i:r,l=0===o&&0!==s?s:o;return{x:e.x-a,y:e.y-l}}e.__esModule=!0,e.getElementRectangle=u,e.getOffsetPosition=c,e.offsetToClientCoords=p;var d=n("../sandbox/native-methods"),f=o(d),h=n("./dom"),m=r(h),y=n("./style"),g=r(y),v=n("./browser")},"query-selector.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return(0,l.isDocument)(e)?a["default"].querySelector:(0,l.isDocumentFragmentNode)(e)||(0,l.isShadowRoot)(e)?a["default"].documentFragmentQuerySelector:a["default"].elementQuerySelector}function i(e){return(0,l.isDocument)(e)?a["default"].querySelectorAll:(0,l.isDocumentFragmentNode)(e)||(0,l.isShadowRoot)(e)?a["default"].documentFragmentQuerySelectorAll:a["default"].elementQuerySelectorAll}e.__esModule=!0,e.getNativeQuerySelector=o,e.getNativeQuerySelectorAll=i;var s=n("../sandbox/native-methods"),a=r(s),l=n("./dom")},"style.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){e=e||"";var t=parseInt(e.replace("px",""),10);return isNaN(t)?0:t}function s(e){return e instanceof D["default"].styleClass||F.indexOf(M.instanceToString(e))!==-1}function a(e){return e instanceof D["default"].styleSheetClass||"[object CSSStyleSheet]"===M.instanceToString(e)}function l(e,t,n,r){e=e.documentElement||e;var o=p(e,n,r);return o&&o[t]}function u(e,t,n){e=e.documentElement||e,e.style[t]=n}function c(e){return{bottom:i(l(e,"borderBottomWidth")),left:i(l(e,"borderLeftWidth")),right:i(l(e,"borderRightWidth")),top:i(l(e,"borderTopWidth"))}}function p(e,t,n){t=t||document,n=n||window;var r=t.defaultView||n;return r.getComputedStyle(e,null)}function d(e){return{bottom:i(l(e,"marginBottom")),left:i(l(e,"marginLeft")),right:i(l(e,"marginRight")),top:i(l(e,"marginTop"))}}function f(e){return{bottom:i(l(e,"paddingBottom")),left:i(l(e,"paddingLeft")),right:i(l(e,"paddingRight")),top:i(l(e,"paddingTop"))}}function h(e){var t=M.isHtmlElement(e),n=window;if(t&&M.isElementInIframe(e)){var r=M.getIframeByElement(e);r&&(n=r.contentWindow)}var o=t?n:e;return{left:w(o),top:_(o)}}function m(e){if(!e)return null;if(M.isWindow(e))return e.document.documentElement.clientWidth;if(M.isDocument(e)){var t=e.documentElement,n="clientWidth",r="scrollWidth",o="offsetWidth";return t[n]>=t[r]?t[n]:Math.max(e.body[r],t[r],e.body[o],t[o])}var s=e.offsetWidth;return s-=i(l(e,"paddingLeft")),s-=i(l(e,"paddingRight")),s-=i(l(e,"borderLeftWidth")),s-=i(l(e,"borderRightWidth"))}function y(e){if(!e)return null;if(M.isWindow(e))return e.document.documentElement.clientHeight;if(M.isDocument(e)){var t=e.documentElement,n="clientHeight",r="scrollHeight",o="offsetHeight";return t[n]>=t[r]?t[n]:Math.max(e.body[r],t[r],e.body[o],t[o])}var s=e.offsetHeight;return s-=i(l(e,"paddingTop")),s-=i(l(e,"paddingBottom")),s-=i(l(e,"borderTopWidth")),s-=i(l(e,"borderBottomWidth"))}function g(e){if(!e)return null;if(M.isWindow(e))return e.document.documentElement.clientWidth;if(M.isDocument(e))return e.documentElement.clientWidth;var t=e.offsetWidth;return t-=i(l(e,"borderLeftWidth")),t-=i(l(e,"borderRightWidth"))}function v(e){if(!e)return null;if(M.isWindow(e))return e.document.documentElement.clientHeight;if(M.isDocument(e))return e.documentElement.clientHeight;var t=e.offsetHeight;return t-=i(l(e,"borderTopWidth")),t-=i(l(e,"borderBottomWidth"))}function E(e){var t=b(e),n=f(e),r=e.scrollHeight-(n.top+n.bottom),o=M.getSelectVisibleChildren(e).length;return 1===t?y(e):j.isIE&&t>o?Math.round(r/o):Math.round(r/Math.max(o,t))}function b(e){if(j.isSafari&&L.hasTouchEvents||j.isAndroid)return 1;var t=D["default"].getAttribute.call(e,"size"),n=D["default"].getAttribute.call(e,"multiple"),r=t?parseInt(t,10):1;return n&&(!t||r<1)&&(r=U),r}function S(e){var t=M.getSelectParent(e),n=M.getTagName(e);return M.isSelectElement(t)&&b(t)>1&&("option"===n||"optgroup"===n)&&(!j.isFirefox||e.label)}function w(e){return e?M.isWindow(e)?e.pageXOffset:M.isDocument(e)?e.defaultView.pageXOffset:e.scrollLeft:null}function _(e){return e?M.isWindow(e)?e.pageYOffset:M.isDocument(e)?e.defaultView.pageYOffset:e.scrollTop:null}function x(e,t){if(e)if(M.isWindow(e)||M.isDocument(e)){var n=M.findDocument(e).defaultView,r=_(e);n.scrollTo(t,r)}else e.scrollLeft=t}function T(e,t){if(e)if(M.isWindow(e)||M.isDocument(e)){var n=M.findDocument(e).defaultView,r=w(e);n.scrollTo(r,t)}else e.scrollTop=t}function C(e){if(e){for(var t=e.offsetParent||document.body;t&&!/^(?:body|html)$/i.test(t.nodeName)&&"static"===l(t,"position");)t=t.offsetParent;return t}}function A(e){if(!e||M.isWindow(e)||M.isDocument(e))return null;var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.documentElement;if(!r.contains(e)||e===r)return{top:t.top,left:t.left};var o=n.defaultView,i=r.clientTop||n.body.clientTop||0,s=r.clientLeft||n.body.clientLeft||0,a=o.pageYOffset||r.scrollTop||n.body.scrollTop,l=o.pageXOffset||r.scrollLeft||n.body.scrollLeft;return t=e.getBoundingClientRect(),{top:t.top+a-i,left:t.left+l-s}}function I(e,t){if(!M.isElementInDocument(e,t))return!1;for(;e;){if("none"===l(e,"display",t)||"hidden"===l(e,"visibility",t))return!1;e=e.parentNode}return!0}function P(e){var t=M.getIframeByElement(e);return t&&!I(t,M.findDocument(t))}e.__esModule=!0,e.isStyle=s,e.isStyleSheet=a,e.get=l,e.set=u,e.getBordersWidth=c,e.getComputedStyle=p,e.getElementMargin=d,e.getElementPadding=f,e.getElementScroll=h,e.getWidth=m,e.getHeight=y,e.getInnerWidth=g,e.getInnerHeight=v,e.getOptionHeight=E,e.getSelectElementSize=b,e.isVisibleChild=S,e.getScrollLeft=w,e.getScrollTop=_,e.setScrollLeft=x,e.setScrollTop=T,e.getOffsetParent=C,e.getOffset=A,e.isElementVisible=I,e.isElementInInvisibleIframe=P;var N=n("./dom"),M=o(N),O=n("./browser"),j=o(O),k=n("./feature-detection"),L=o(k),R=n("../sandbox/native-methods"),D=r(R),U=4,F=["[object CSSStyleDeclaration]","[object CSS2Properties]","[object MSStyleCSSProperties]"]},"types.js":function(e,t,n){function r(e){return null===e?"null":"undefined"}function o(e){return!e&&(null===e||"undefined"==typeof e)}function i(e){var t=typeof e;return"object"!==t&&"function"!==t}e.__esModule=!0,e.inaccessibleTypeToStr=r,e.isNullOrUndefined=o,e.isPrimitiveType=i},"url-resolver.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var i=n("../sandbox/native-methods"),s=o(i),a=n("../utils/destination-location"),l=r(a),u=n("../../utils/url"),c="hammerhead|document-url-resolver";e["default"]={_createResolver:function(e){var t=e.implementation.createHTMLDocument("title"),n=s["default"].createElement.call(t,"a"),r=s["default"].createElement.call(t,"base");return s["default"].appendChild.call(t.body,n),s["default"].appendChild.call(t.head,r),t},_getResolver:function(e){return e[c]||s["default"].objectDefineProperty.call(window.Object,e,c,{value:this._createResolver(e),writable:!0}),e[c]},init:function(e){this.updateBase(l.get(),e)},getResolverElement:function(e){return this._getResolver(e).body.firstChild},resolve:function(e,t){var n=this.getResolverElement(t);if(null===e)s["default"].removeAttribute.call(n,"href");else{n.href=e;var r=e&&isIframeWithoutSrc&&window.parent&&window.parent.document&&(!n.href||0===n.href.indexOf("/"));if(r)return this.resolve(e,window.parent.document)}return(0,u.ensureTrailingSlash)(e,n.href)},updateBase:function(e,t){var n=this._getResolver(t),r=s["default"].elementGetElementsByTagName.call(n.head,"base")[0];e=e||l.get();var o=(0,u.parseUrl)(e),i="file:"!==o.protocol&&!o.host,a=/^\/\//.test(e)&&!!o.host;if(i||a){var c=l.get();this.updateBase(c,t),e=this.resolve(e,t)}s["default"].setAttribute.call(r,"href",e)},getBaseUrl:function(e){var t=s["default"].elementGetElementsByTagName.call(this._getResolver(e).head,"base")[0];return s["default"].getAttribute.call(t,"href")},changeUrlPart:function(e,t,n,r){var o=this.getResolverElement(r);return o.href=e,o[t]=n,o.href},dispose:function(e){e[c]=null}},t.exports=e["default"]},"url.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n=t&&t.resourceType,r=T.parseResourceType(n);if(!r.isWebSocket&&!g(e)&&!v(e))return e;if(e=A.resolveUrl(e),r.isWebSocket&&!m(e)||!T.isValidUrl(e))return e;var o=r.isWebSocket?"ws:":void 0,s=t&&t.proxyHostname||location.hostname,l=t&&t.proxyPort||location.port.toString(),u=t&&t.sessionId||M["default"].get().sessionId,c=t&&t.charset,p=t&&t.reqOrigin,d=a(l),f=T.parseProxyUrl(e),h=!!f&&f.proxy.hostname===s&&(f.proxy.port===l||f.proxy.port===d);if(h){if(n&&f.resourceType===n)return e;var y=T.formatUrl(f.destResourceInfo);return i(y,{proxyProtocol:o,proxyHostname:s,proxyPort:l,sessionId:u,resourceType:n,charset:c,reqOrigin:p})}var E=T.parseUrl(e);if(c=c||r.isScript&&document[_["default"].documentCharset],"http:"===E.protocol&&E.hostname===s&&E.port===l){var b=A.getParsed();E.protocol=b.protocol,E.host=b.host,E.hostname=b.hostname,E.port=b.port||"",e=T.formatUrl(E)}return r.isWebSocket&&(E.protocol=E.protocol.replace("ws","http"),e=T.formatUrl(E),p=p||encodeURIComponent(A.getOriginHeader())),T.getProxyUrl(e,{proxyProtocol:o,proxyHostname:s,proxyPort:l,sessionId:u,resourceType:n,charset:c,reqOrigin:p})}function s(e){return i(e,{proxyPort:M["default"].get().crossDomainProxyPort,resourceType:T.getResourceTypeString({isIframe:!0})})}function a(e){return M["default"].get().crossDomainProxyPort===e?location.port.toString():M["default"].get().crossDomainProxyPort}function l(){return location.protocol+"//"+location.hostname+":"+M["default"].get().crossDomainProxyPort+"/"}function u(e){return T.resolveUrlAsDest(e,i)}function c(e){return T.formatUrl(e)}function p(e){return T.parseProxyUrl(e)}function d(e){return T.parseUrl(e)}function f(e,t,n){return i(e,{resourceType:t,charset:n})}function h(e,t,n,r){var o=T.parseProxyUrl(e);if(o){var s=o.sessionId,a=o.proxy,l=P.changeUrlPart(o.destUrl,t,n,document);return i(l,{proxyHostname:a.hostname,proxyPort:a.port,sessionId:s,resourceType:r})}return e}function m(e){var t=u(e);return j.test(t)}function y(e,t){return T.isSubDomain(e,t)}function g(e){return T.isSupportedProtocol(e)}function v(e){return T.isSpecialPage(e)}function E(e){return T.parseResourceType(e)}function b(e){return T.getResourceTypeString(e)}function S(e,t){return i(e).replace(O,"")===i(t).replace(O,"")}e.__esModule=!0,e.REQUEST_DESCRIPTOR_VALUES_SEPARATOR=void 0,e.getProxyUrl=i,e.getCrossDomainIframeProxyUrl=s,e.getCrossDomainProxyPort=a,e.getCrossDomainProxyUrl=l,e.resolveUrlAsDest=u,e.formatUrl=c,e.parseProxyUrl=p,e.parseUrl=d,e.convertToProxyUrl=f,e.changeDestUrlPart=h,e.isValidWebSocketUrl=m,e.isSubDomain=y,e.isSupportedProtocol=g,e.isSpecialPage=v,e.parseResourceType=E,e.stringifyResourceType=b,e.isChangedOnlyHash=S;var w=n("../../processing/dom/internal-properties"),_=o(w),x=n("../../utils/url"),T=r(x),C=n("./destination-location"),A=r(C),I=n("./url-resolver"),P=r(I),N=n("../settings"),M=o(N),O=/#[\S\s]*$/,j=/^wss?:/i;e.REQUEST_DESCRIPTOR_VALUES_SEPARATOR=T.REQUEST_DESCRIPTOR_VALUES_SEPARATOR}}},processing:{dom:{"base-dom-adapter.js":function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function e(){r(this,e),this.EVENTS=["onblur","onchange","onclick","oncontextmenu","oncopy","oncut","ondblclick","onerror","onfocus","onfocusin","onfocusout","onhashchange","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpaste","onreset","onresize","onscroll","onselect","onsubmit","ontextinput","onunload","onwheel","onpointerdown","onpoi nterup","onpointercancel","onpointermove","onpointerover","onpointerout","onpointerenter","onpointerleave","ongotpointercapture","onlostpointercapture","onmspointerdown","onmspointerup","onmspointercancel","onmspointermove","onmspointerover","onmspointerout","onmspointerenter","onmspointerleave","onmsgotpointercapture","onmslostpointercapture"]}return e.prototype.removeAttr=function(){throw new Error("Not implemented")},e.prototype.getAttr=function(){throw new Error("Not implemented")},e.prototype.hasAttr=function(){throw new Error("Not implemented")},e.prototype.isSVGElement=function(){throw new Error("Not implemented")},e.prototype.hasEventHandler=function(){throw new Error("Not implemented")},e.prototype.getTagName=function(){throw new Error("Not implemented")},e.prototype.setAttr=function(){throw new Error("Not implemented")},e.prototype.setScriptContent=function(){throw new Error("Not implemented")},e.prototype.getScriptContent=function(){throw new Error("Not implemented")},e.prototype.getStyleContent=function(){throw new Error("Not implemented")},e.prototype.setStyleContent=function(){throw new Error("Not implemented")},e.prototype.needToProcessContent=function(){throw new Error("Not implemented")},e.prototype.needToProcessUrl=function(){throw new Error("Not implemented")},e.prototype.attachEventEmitter=function(){throw new Error("Not implemented")},e.prototype.hasIframeParent=function(){throw new Error("Not implemented")},e.prototype.getCrossDomainPort=function(){throw new Error("Not implemented")},e.prototype.getProxyUrl=function(){
throw new Error("Not implemented")},e.prototype.isTopParentIframe=function(){throw new Error("Not implemented")},e.prototype.sameOriginCheck=function(){throw new Error("Not implemented")},e.prototype.getClassName=function(){throw new Error("Not implemented")},e}();e["default"]=o,t.exports=e["default"]},"index.js":function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n("../../processing/dom/internal-attributes"),a=o(s),l=n("../../shadow-ui/class-name"),u=o(l),c=n("../script"),p=n("../../processing/style"),d=o(p),f=n("../../utils/url"),h=r(f),m=n("./namespaces"),y=/^(\s)*\/\/<!\[CDATA\[([\s\S]*)\/\/\]\]>(\s)*$/,g=/(\/\/[^\n]*|\n\s*)-->[^\n]*([\n\s]*)?$/,v=/^(\s)*<!--[^\n]*\n/,E=/-->\s*$/,b=/^\s*javascript\s*:/i,S=/^\s*(application\/(x-)?(ecma|java)script|text\/(javascript(1\.[0-5])?|((x-)?ecma|x-java|js|live)script))\s*$/,w={href:["a","link","image","area","base"],src:["img","embed","script","source","video","audio","input","frame","iframe"],action:["form"],formaction:["button","input"],manifest:["html"],data:["object"]},_=Object.keys(w),x=["animate","animateColor","animateMotion","animateTransform","mpath","set","linearGradient","radialGradient","stop","a","altglyph","color-profile","cursor","feimage","filter","<font-face-uri","glyphref","image","mpath","pattern","script","textpath","use","tref"],T=["a","form","area","base","button"],C=function(){for(var e=[],t=0;t<T.length;t++){var n=T[t];"base"!==n&&e.push(n)}return e}(),A="hammerhead|element-processed",I="hammerhead|autocomplete-attribute-absence-marker",P=function(){function e(t){i(this,e),this.adapter=t,this.adapter.attachEventEmitter(this),this.URL_ATTRS=_,this.SVG_XLINK_HREF_TAGS=x,this.AUTOCOMPLETE_ATTRIBUTE_ABSENCE_MARKER=I,this.EVENTS=this.adapter.EVENTS,this.elementProcessorPatterns=this._createProcessorPatterns(this.adapter)}return e.isTagWithTargetAttr=function(e){return T.indexOf(e)!==-1},e.isIframeFlagTag=function(e){return e&&C.indexOf(e)!==-1},e.isAddedAutocompleteAttr=function(e,t){return"autocomplete"===e&&t===I},e.processJsAttrValue=function(e,t){var n=t.isJsProtocol,r=t.isEventAttr;return n&&(e=e.replace(b,"")),e=(0,c.processScript)(e,!1,n&&!r),n&&(e="javascript:"+e),e},e.getStoredAttrName=function(e){return e+a["default"].storedAttrPostfix},e.isJsProtocol=function(e){return b.test(e)},e.getAttrsForCleaning=function(){for(var t=[],n=0;n<_.length;n++){var r=_[n];t.push({attr:r,storedAttr:e.getStoredAttrName(r)})}return t.push({attr:"autocomplete",storedAttr:e.getStoredAttrName("autocomplete")}),t},e._isHtmlImportLink=function(e,t){return e&&t&&"link"===e&&"import"===t},e.prototype._getRelAttribute=function(e){return String(this.adapter.getAttr(e,"rel")).toLocaleLowerCase()},e.prototype._createProcessorPatterns=function(e){var t=this,n={HAS_HREF_ATTR:function(e){return t.isUrlAttr(e,"href")},HAS_SRC_ATTR:function(e){return t.isUrlAttr(e,"src")},HAS_ACTION_ATTR:function(e){return t.isUrlAttr(e,"action")},HAS_FORMACTION_ATTR:function(e){return t.isUrlAttr(e,"formaction")},HAS_MANIFEST_ATTR:function(e){return t.isUrlAttr(e,"manifest")},HAS_DATA_ATTR:function(e){return t.isUrlAttr(e,"data")},HTTP_EQUIV_META:function(t){var n=e.getTagName(t);return"meta"===n&&e.hasAttr(t,"http-equiv")},ALL:function(){return!0},IS_SCRIPT:function(t){return"script"===e.getTagName(t)},IS_LINK:function(t){return"link"===e.getTagName(t)},IS_INPUT:function(t){return"input"===e.getTagName(t)},IS_STYLE:function(t){return"style"===e.getTagName(t)},HAS_EVENT_HANDLER:function(t){return e.hasEventHandler(t)},IS_SANDBOXED_IFRAME:function(t){var n=e.getTagName(t);return("iframe"===n||"frame"===n)&&e.hasAttr(t,"sandbox")},IS_SVG_ELEMENT_WITH_XLINK_HREF_ATTR:function(t){return e.isSVGElement(t)&&e.hasAttr(t,"xlink:href")&&x.indexOf(e.getTagName(t))!==-1},IS_SVG_ELEMENT_WITH_XML_BASE_ATTR:function(t){return e.isSVGElement(t)&&e.hasAttr(t,"xml:base")}};return[{selector:n.HAS_HREF_ATTR,urlAttr:"href",elementProcessors:[this._processTargetBlank,this._processUrlAttrs,this._processUrlJsAttr]},{selector:n.HAS_SRC_ATTR,urlAttr:"src",elementProcessors:[this._processTargetBlank,this._processUrlAttrs,this._processUrlJsAttr]},{selector:n.HAS_ACTION_ATTR,urlAttr:"action",elementProcessors:[this._processTargetBlank,this._processUrlAttrs,this._processUrlJsAttr]},{selector:n.HAS_FORMACTION_ATTR,urlAttr:"formaction",elementProcessors:[this._processTargetBlank,this._processUrlAttrs,this._processUrlJsAttr]},{selector:n.HAS_MANIFEST_ATTR,urlAttr:"manifest",elementProcessors:[this._processUrlAttrs,this._processUrlJsAttr]},{selector:n.HAS_DATA_ATTR,urlAttr:"data",elementProcessors:[this._processUrlAttrs,this._processUrlJsAttr]},{selector:n.HTTP_EQUIV_META,urlAttr:"content",elementProcessors:[this._processMetaElement]},{selector:n.IS_SCRIPT,elementProcessors:[this._processScriptElement,this._processIntegrityAttr]},{selector:n.ALL,elementProcessors:[this._processStyleAttr]},{selector:n.IS_LINK,elementProcessors:[this._processIntegrityAttr]},{selector:n.IS_STYLE,elementProcessors:[this._processStylesheetElement]},{selector:n.IS_INPUT,elementProcessors:[this._processAutoComplete]},{selector:n.HAS_EVENT_HANDLER,elementProcessors:[this._processEvtAttr]},{selector:n.IS_SANDBOXED_IFRAME,elementProcessors:[this._processSandboxedIframe]},{selector:n.IS_SVG_ELEMENT_WITH_XLINK_HREF_ATTR,urlAttr:"xlink:href",elementProcessors:[this._processSVGXLinkHrefAttr,this._processUrlAttrs]},{selector:n.IS_SVG_ELEMENT_WITH_XML_BASE_ATTR,urlAttr:"xml:base",elementProcessors:[this._processUrlAttrs]}]},e.prototype.processElement=function(e,t){if(!e[A])for(var n=0;n<this.elementProcessorPatterns.length;n++){var r=this.elementProcessorPatterns[n];if(r.selector(e)&&!this._isShadowElement(e)){for(var o=0;o<r.elementProcessors.length;o++)r.elementProcessors[o].call(this,e,t,r);e[A]=!0}}},e.prototype.getElementResourceType=function(e){var t=this.adapter.getTagName(e);return h.getResourceTypeString({isIframe:"iframe"===t||"frame"===t||this._isOpenLinkInIframe(e),isForm:"form"===t||"input"===t||"button"===t,isScript:"script"===t,isHtmlImport:"link"===t&&"import"===this._getRelAttribute(e)})},e.prototype.isUrlAttr=function(e,t,n){var r=this.adapter.getTagName(e);return t=t?t.toLowerCase():t,!(!w[t]||w[t].indexOf(r)===-1)||this.adapter.isSVGElement(e)&&("xml:base"===t||"base"===t&&n===m.XML_NAMESPACE)},e.prototype.getUrlAttr=function(e){for(var t=this.adapter.getTagName(e),n=0;n<_.length;n++){var r=_[n];if(w[r].indexOf(t)!==-1)return r}return null},e.prototype._isOpenLinkInIframe=function(t){var n=this.adapter.getTagName(t),r=this.adapter.getAttr(t,"target"),o=this._getRelAttribute(t);if("_top"!==r){var i=e.isIframeFlagTag(n)||e._isHtmlImportLink(n,o),s=!!r&&"_"!==r[0];if("_parent"===r)return i&&!this.adapter.isTopParentIframe(t);if(i&&(this.adapter.hasIframeParent(t)||s))return!0}return!1},e.prototype._isShadowElement=function(e){var t=this.adapter.getClassName(e);return"string"==typeof t&&t.indexOf(u["default"].postfix)>-1},e.prototype._processAutoComplete=function(t){var n=e.getStoredAttrName("autocomplete"),r=this.adapter.hasAttr(t,n),o=this.adapter.getAttr(t,r?n:"autocomplete");r||this.adapter.setAttr(t,n,o||""===o?o:I),this.adapter.setAttr(t,"autocomplete","off")},e.prototype._processIntegrityAttr=function(e){this.adapter.removeAttr(e,"integrity")},e.prototype._processJsAttr=function(t,n,r){var o=r.isJsProtocol,i=r.isEventAttr,s=e.getStoredAttrName(n),a=this.adapter.hasAttr(t,s),l=this.adapter.getAttr(t,a?s:n),u=e.processJsAttrValue(l,{isJsProtocol:o,isEventAttr:i});l!==u&&(this.adapter.setAttr(t,s,l),this.adapter.setAttr(t,n,u))},e.prototype._processEvtAttr=function(t){for(var n=this.adapter.EVENTS,r=0;r<n.length;r++){var o=this.adapter.getAttr(t,n[r]);o&&this._processJsAttr(t,n[r],{isJsProtocol:e.isJsProtocol(o),isEventAttr:!0})}},e.prototype._processMetaElement=function(e,t,n){var r=this.adapter.getAttr(e,"http-equiv").toLowerCase();if("refresh"===r){var o=this.adapter.getAttr(e,n.urlAttr);o=o.replace(/(url=)(.*)$/i,function(e,n,r){return n+t(r)}),this.adapter.setAttr(e,n.urlAttr,o)}else"content-security-policy"===r&&(this.adapter.removeAttr(e,"http-equiv"),this.adapter.removeAttr(e,"content"))},e.prototype._processSandboxedIframe=function(t){var n=this.adapter.getAttr(t,"sandbox"),r=n.indexOf("allow-same-origin")!==-1,o=n.indexOf("allow-scripts")!==-1,i=e.getStoredAttrName("sandbox");this.adapter.setAttr(t,i,n),r&&o||(n+=r?"":" allow-same-origin",n+=o?"":" allow-scripts"),this.adapter.setAttr(t,"sandbox",n)},e.prototype._processScriptElement=function(e){var t=this.adapter.getScriptContent(e);if(t&&this.adapter.needToProcessContent(e)){var n=(0,c.isScriptProcessed)(t);if(!n){var r=this.adapter.getAttr(e,"type"),o=!r||S.test(r);if(o){var i=t,s="",a=i.match(v),l="",u=null,p=y.test(i);a&&(s=a[0],u=i.match(g),u?l=u[0]:E.test(s)||(l="//-->"),i=i.replace(s,"").replace(l,"")),p&&(i=i.replace(y,"$2")),i=s+(0,c.processScript)(i,!0)+l,p&&(i="\n//<![CDATA[\n"+i+"//]]>"),this.adapter.setScriptContent(e,i)}}}},e.prototype._processStyleAttr=function(e,t){var n=this.adapter.getAttr(e,"style");n&&this.adapter.setAttr(e,"style",d["default"].process(n,t))},e.prototype._processStylesheetElement=function(e,t){var n=this.adapter.getStyleContent(e);n&&t&&this.adapter.needToProcessContent(e)&&(n=d["default"].process(n,t,!0),this.adapter.setStyleContent(e,n))},e.prototype._processTargetBlank=function(t){var n=e.getStoredAttrName("target"),r=this.adapter.hasAttr(t,n);if(!r){var o=this.adapter.getAttr(t,"target");o=o&&o.replace(/\s/g,""),"_blank"!==o&&"blank"!==o||(this.adapter.setAttr(t,"target","_top"),this.adapter.setAttr(t,n,o))}},e.prototype._processUrlAttrs=function(t,n,r){if(n&&r.urlAttr){var o=e.getStoredAttrName(r.urlAttr),i=this.adapter.getAttr(t,r.urlAttr),s=h.isSpecialPage(i),a=this.adapter.hasAttr(t,o);if((i||""===i)&&!a&&(h.isSupportedProtocol(i)||s)){var l=this.adapter.getTagName(t),u="iframe"===l||"frame"===l,c="script"===l,p="a"===l,d=this.adapter.getAttr(t,"target");if(!this.adapter.needToProcessUrl(l,d))return;var f=this.getElementResourceType(t),m=h.parseUrl(i),y="file:"!==m.protocol&&!m.host,g="",v=c&&this.adapter.getAttr(t,"charset");if(u&&!s&&!y){var E=n("/"),b=h.parseProxyUrl(E),S=b.destUrl;if(m.protocol||(i=b.destResourceInfo.protocol+i),!this.adapter.sameOriginCheck(S,i)){var w=h.parseUrl(E).hostname,_=this.adapter.getCrossDomainPort(),x=h.getResourceTypeString({isIframe:!0});g=i?this.adapter.getProxyUrl(i,{proxyHostname:w,proxyPort:_,sessionId:b.sessionId,resourceType:x}):""}}s&&!p&&(g=i),g=""===g&&i?n(i,f,v):g,this.adapter.setAttr(t,o,i),"img"!==l||""===g||s?this.adapter.setAttr(t,r.urlAttr,g):this.adapter.setAttr(t,r.urlAttr,h.resolveUrlAsDest(i,n))}}},e.prototype._processUrlJsAttr=function(t,n,r){e.isJsProtocol(this.adapter.getAttr(t,r.urlAttr))&&this._processJsAttr(t,r.urlAttr,{isJsProtocol:!0,isEventAttr:!1})},e.prototype._processSVGXLinkHrefAttr=function(t,n,r){var o=this.adapter.getAttr(t,r.urlAttr);if(h.HASH_RE.test(o)){var i=e.getStoredAttrName(r.urlAttr);this.adapter.setAttr(t,i,o)}},e}();e["default"]=P,t.exports=e["default"]},"internal-attributes.js":function(e,t,n){e.__esModule=!0,e["default"]={storedAttrPostfix:"-hammerhead-stored-value",hoverPseudoClass:"data-hammerhead-hovered",focusPseudoClass:"data-hammerhead-focused",uploadInfoHiddenInputName:"hammerhead|upload-info-hidden-input-name"},t.exports=e["default"]},"internal-properties.js":function(e,t,n){e.__esModule=!0,e["default"]={processDomMethodName:"hammerhead|process-dom-method",processedContext:"hammerhead|processed-context",whichPropertyWrapper:"hammerhead|which-property-wrapper",documentCharset:"hammerhead|document-charset",iframeNativeMethods:"hammerhead|iframe-native-methods",hammerhead:"%hammerhead%",selection:"hammerhead|selection",shadowUIElement:"hammerhead|shadow-ui-element"},t.exports=e["default"]},"namespaces.js":function(e,t,n){e.__esModule=!0;var r=(e.SVG_NAMESPACE="http://www.w3.org/2000/svg",e.XML_NAMESPACE="http://www.w3.org/XML/1998/namespace"),o=e.XMLNS_NAMESPACE="http://www.w3.org/2000/xmlns/",i=e.XLINK_NAMESPACE="http://www.w3.org/1999/xlink";e.NAMESPACE_PREFIX_MAP={xml:r,xlink:i,xmlns:o}}},script:{"header.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e.replace(g,"").replace(v,"")}function i(e,t){var n=y.replace(m,t?'"use strict";':"");return n+e+"\n"+f}e.__esModule=!0,e.SCRIPT_PROCESSING_END_HEADER_COMMENT=e.SCRIPT_PROCESSING_END_COMMENT=e.SCRIPT_PROCESSING_START_COMMENT=void 0,e.remove=o,e.add=i;var s=n("../../utils/regexp-escape"),a=r(s),l=n("../../processing/dom/internal-properties"),u=r(l),c=n("./instruction"),p=r(c),d=e.SCRIPT_PROCESSING_START_COMMENT="/*hammerhead|script|start*/",f=e.SCRIPT_PROCESSING_END_COMMENT="/*hammerhead|script|end*/",h=e.SCRIPT_PROCESSING_END_HEADER_COMMENT="/*hammerhead|script|processing-header-end*/",m="{strict-placeholder}",y=[d,m,'if(typeof window!=="undefined"&&window){','window["'+u["default"].processDomMethodName+'"] && window["'+u["default"].processDomMethodName+'"]();',"}","else{","var "+p["default"].getLocation+"=function(l){return l},",p["default"].setLocation+"=function(l,v){return l = v},",p["default"].setProperty+"=function(o,p,v){return o[p] = v},",p["default"].getProperty+"=function(o,p){return o[p]},",p["default"].callMethod+"=function(o,p,a){return o[p].apply(o,a)},",p["default"].getEval+"=function(e){return e},",p["default"].processScript+"=function(s){return s},",p["default"].processHtml+"=function(h){return h},",p["default"].getStorage+"=function(s){return s},",p["default"].getPostMessage+"=function(w,p){return arguments.length===1?w.postMessage:p};","}",h,"\n"].join(""),g=new RegExp((0,a["default"])(d)+"[\\S\\s]+?"+(0,a["default"])(h)+"\n?","gi"),v=new RegExp("\n?"+(0,a["default"])(f)+"\\s*","gi")},"index.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){do e=e.replace(I,"\n");while(I.test(e));return e}function i(e){var t=(0,A["default"])(e),n=t?e.substring(t.length):e;return n=(0,S.remove)(n),n=s(n),{bom:t,preprocessed:n}}function s(e){return O.test(e)?e.replace(O,""):e}function a(e,t,n,r){return t&&(e=(0,S.add)(e,r)),n?n+e:e}function l(e,t){return N.test(t)?e:e.replace(N,"")}function u(e,t){e=t?"("+e+")":e;try{return(0,w.parse)(e,k)}catch(n){return null}}function c(e,t){var n=(0,_.generate)(e,{format:{quotes:"double",escapeless:!0,compact:!0}});return t?l(n,t):n}function p(e){var t=P.test(e),n=u(e,t);return!n&&t&&(n=u(e,!1),t=!1),{ast:n,isObject:t}}function d(e){return 1===e.body.length&&e.body[0].type===_.Syntax.ExpressionStatement&&e.body[0].expression.type===_.Syntax.ArrayExpression}function f(e){if(e.body.length){var t=e.body[0];if(t.type===_.Syntax.ExpressionStatement&&t.expression.type===_.Syntax.Literal)return"use strict"===t.expression.value}return!1}function h(e,t,n){var r=n?-1:0,o=[],i=0;if(!t.length)return e;t.sort(function(e,t){return e.start-t.start});for(var s=0;s<t.length;s++){var a=t[s],l=a.start+r,u=a.end+r,p=a.parent[a.key];p=a.index!==-1?p[a.index]:p,o.push(e.substring(i,l)),o.push(" "),o.push(c(p,e.substring(l,u))),i+=u-i}return o.push(e.substring(i)),o.join("")}function m(e){return j.test(e)}function y(e,t,n){var r=i(e),s=r.bom,l=r.preprocessed,u=o(l),c=p(u),m=c.ast,y=c.isObject;if(!m)return e;t=t&&!y&&!d(m),m.wrapLastExprWithProcessHtml=n;var g=(0,v["default"])(m),E=g.length?h(u,g,y):l;return E=a(E,t,s,f(m)),y&&(E=E.replace(M,"$1")),E}e.__esModule=!0,e.isScriptProcessed=m,e.processScript=y;var g=n("./transform"),v=r(g),E=n("./instruction"),b=r(E),S=n("./header"),w=n("./tools/acorn"),_=n("./tools/esotope"),x=n("../../utils/regexp-escape"),T=r(x),C=n("../../utils/get-bom"),A=r(C),I=/(^|\n)\s*<!--[^\n]*(\n|$)/g,P=/^\s*\{.*\}\s*$/,N=/;\s*$/,M=/^\s*\((.*)\);\s*$/,O=/(?:\/\/[@#][ \t]+sourceMappingURL=([^\s'"]+?)[ \t]*$)/gm,j=new RegExp([(0,T["default"])(b["default"].getLocation),(0,T["default"])(b["default"].setLocation),(0,T["default"])(b["default"].getProperty),(0,T["default"])(b["default"].setProperty),(0,T["default"])(b["default"].callMethod),(0,T["default"])(b["default"].processScript),(0,T["default"])(b["default"].processHtml),(0,T["default"])(b["default"].getStorage),(0,T["default"])(b["default"].getPostMessage)].join("|")),k={allowReturnOutsideFunction:!0,ecmaVersion:8}},"instruction.js":function(e,t,n){e.__esModule=!0,e["default"]={getLocation:"__get$Loc",setLocation:"__set$Loc",getProperty:"__get$",setProperty:"__set$",callMethod:"__call$",processScript:"__proc$Script",processHtml:"__proc$Html",getEval:"__get$Eval",getStorage:"__get$Storage",getPostMessage:"__get$PostMessage"},t.exports=e["default"]},"instrumented.js":function(e,t,n){function r(e){return c(a,e)}function o(e){return c(l,e)}e.__esModule=!0,e.shouldInstrumentMethod=r,e.shouldInstrumentProperty=o;var i=e.METHODS=["postMessage","replace","assign"],s=e.PROPERTIES=["action","activeElement","attributes","autocomplete","background","backgroundImage","background-image","borderImage","border-image","borderImageSource","border-image-source","childElementCount","cookie","cssText","cursor","data","documentURI","domain","files","firstChild","firstElementChild","formAction","host","hostname","href","innerHTML","innerText","lastChild","lastElementChild","length","listStyle","list-style","listStyleImage","list-style-image","localStorage","location","manifest","nextElementSibling","nextSibling","onbeforeunload","onpagehide","onerror","onunhandledrejection","onload","onmessage","origin","outerHTML","pathname","port","protocol","referrer","responseURL","sandbox","scripts","search","sessionStorage","src","status","style","styleSheets","target","text","textContent","URL","value","which","baseURI"],a=new RegExp("^("+i.join("|")+")$"),l=new RegExp("^("+s.join("|")+")$"),u=RegExp.prototype.test,c=function(e,t){return e.test?e.test(t):u.call(e,t)}},"internal-literal.js":function(e,t,n){e.__esModule=!0,e["default"]={tempVar:"__set$temp"},t.exports=e["default"]},"node-builder.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return{type:S.Syntax.Literal,value:e,raw:'"'+e+'"'}}function i(){return{type:S.Syntax.Identifier,name:_["default"].tempVar}}function s(e,t){return{type:S.Syntax.ExpressionStatement,expression:{type:S.Syntax.AssignmentExpression,operator:"=",left:e,right:t}}}function a(e){return{type:S.Syntax.VariableDeclaration,declarations:[{type:S.Syntax.VariableDeclarator,id:e,init:null}],kind:"var"}}function l(e,t){var n={type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].processScript},arguments:[e]};return t&&n.arguments.push({type:S.Syntax.Literal,value:!0,raw:"true"}),n}function u(e){return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].getStorage},arguments:[{type:S.Syntax.Identifier,name:e}]}}function c(){return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].getLocation},arguments:[{type:S.Syntax.Identifier,name:"location"}]}}function p(e,t){var n={type:S.Syntax.CallExpression,callee:{type:S.Syntax.MemberExpression,computed:!1,object:{type:S.Syntax.FunctionExpression,id:null,params:[],defaults:[],body:{type:S.Syntax.BlockStatement,body:[{type:S.Syntax.ReturnStatement,argument:{type:S.Syntax.LogicalExpression,operator:"||",left:{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].setLocation},arguments:[{type:S.Syntax.Identifier,name:"location"},e]},right:{type:S.Syntax.AssignmentExpression,operator:"=",left:{type:S.Syntax.Identifier,name:"location"},right:e}}}]},rest:null,generator:!1,expression:!1},property:{type:S.Syntax.Identifier,name:"call"}},arguments:[{type:S.Syntax.ThisExpression}]};return t&&(n={type:S.Syntax.SequenceExpression,expressions:[{type:"Literal",value:0,raw:"0"},n]}),n}function d(e,t,n){return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].setProperty},arguments:[t,o(e),n]}}function f(e,t,n){return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].callMethod},arguments:[e,t,{type:S.Syntax.ArrayExpression,elements:n}]}}function h(e,t){return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].getProperty},arguments:[t,o(e)]}}function m(e,t){return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].getProperty},arguments:[t,e]}}function y(e,t,n){return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].setProperty},arguments:[t,e,n]}}function g(e){return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].getEval},arguments:[e]}}function v(e){var t=e.object;return{type:S.Syntax.CallExpression,callee:{type:S.Syntax.Identifier,name:T["default"].getPostMessage},arguments:t?[t]:[{type:S.Syntax.Literal,value:null},e]}}function E(e,t){return{type:S.Syntax.AssignmentExpression,operator:"=",left:e,right:{type:S.Syntax.BinaryExpression,operator:"+",left:e,right:t}}}function b(e){return{type:S.Syntax.ExpressionStatement,expression:{type:S.Syntax.CallExpression,callee:{type:S.Syntax.MemberExpression,object:{type:S.Syntax.Identifier,name:"parent"},property:{type:S.Syntax.Identifier,name:T["default"].processHtml}},arguments:[{type:S.Syntax.Identifier,name:"window"},e.expression]}}}e.__esModule=!0,e.createStringLiteral=o,e.createTempVarIdentifier=i,e.createAssignmentExprStmt=s,e.createVarDeclaration=a,e.createProcessScriptMethCall=l,e.createGetStorageMethCall=u,e.createLocationGetWrapper=c,e.createLocationSetWrapper=p,e.createPropertySetWrapper=d,e.createMethCallWrapper=f,e.createPropertyGetWrapper=h,e.createComputedPropertyGetWrapper=m,e.createComputedPropertySetWrapper=y,e.createGetEvalMethCall=g,e.createGetPostMessageMethCall=v,e.createExpandedConcatOperation=E,e.createHtmlProcessorWrapper=b;var S=n("./tools/esotope"),w=n("./internal-literal"),_=r(w),x=n("./instruction"),T=r(x)},tools:{acorn:{"expression.js":function(e,t,n){var r=n("./tokentype"),o=n("./state"),i=n("./parseutil"),s=n("./whitespace"),a=o.Parser.prototype;a.checkPropClash=function(e,t){if(!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var n=e.key,r=void 0;switch(n.type){case"Identifier":r=n.name;break;case"Literal":r=String(n.value);break;default:return}var o=e.kind;if(this.options.ecmaVersion>=6)return void("__proto__"===r&&"init"===o&&(t.proto&&this.raiseRecoverable(n.start,"Redefinition of __proto__ property"),t.proto=!0));r="$"+r;var i=t[r];if(i){var s=void 0;s="init"===o?this.strict&&i.init||i.get||i.set:i.init||i[o],s&&this.raiseRecoverable(n.start,"Redefinition of property")}else i=t[r]={init:!1,get:!1,set:!1};i[o]=!0}},a.parseExpression=function(e,t){var n=this.start,o=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===r.types.comma){var s=this.startNodeAt(n,o);for(s.expressions=[i];this.eat(r.types.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i},a.parseMaybeAssign=function(e,t,n){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var o=!1,s=-1,a=-1;t?(s=t.parenthesizedAssign,a=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new i.DestructuringErrors,o=!0);var l=this.start,u=this.startLoc;this.type!=r.types.parenL&&this.type!=r.types.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(e,t);if(n&&(c=n.call(this,c,l,u)),this.type.isAssign){this.checkPatternErrors(t,!0),o||i.DestructuringErrors.call(t);var p=this.startNodeAt(l,u);return p.operator=this.value,p.left=this.type===r.types.eq?this.toAssignable(c):c,t.shorthandAssign=-1,this.checkLVal(c),this.next(),p.right=this.parseMaybeAssign(e),this.finishNode(p,"AssignmentExpression")}return o&&this.checkExpressionErrors(t,!0),s>-1&&(t.parenthesizedAssign=s),a>-1&&(t.trailingComma=a),c},a.parseMaybeConditional=function(e,t){var n=this.start,o=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(r.types.question)){var s=this.startNodeAt(n,o);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(r.types.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i},a.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,o=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?o:o.start==n&&"ArrowFunctionExpression"===o.type?o:this.parseExprOp(o,n,r,-1,e)},a.parseExprOp=function(e,t,n,o,i){var s=this.type.binop;if(null!=s&&(!i||this.type!==r.types._in)&&s>o){var a=this.type===r.types.logicalOR||this.type===r.types.logicalAND,l=this.value;this.next();var u=this.start,c=this.startLoc,p=this.parseExprOp(this.parseMaybeUnary(null,!1),u,c,s,i),d=this.buildBinary(t,n,e,p,l,a);return this.parseExprOp(d,t,n,o,i)}return e},a.buildBinary=function(e,t,n,r,o,i){var s=this.startNodeAt(e,t);return s.left=n,s.operator=o,s.right=r,this.finishNode(s,i?"LogicalExpression":"BinaryExpression")},a.parseMaybeUnary=function(e,t){var n=this.start,o=this.startLoc,i=void 0;if(this.inAsync&&this.isContextual("await"))i=this.parseAwait(e),t=!0;else if(this.type.prefix){var s=this.startNode(),a=this.type===r.types.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):t=!0,i=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(i=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return i;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(n,o);l.operator=this.value,l.prefix=!1,l.argument=i,this.checkLVal(i),this.next(),i=this.finishNode(l,"UpdateExpression")}}return!t&&this.eat(r.types.starstar)?this.buildBinary(n,o,i,this.parseMaybeUnary(null,!1),"**",!1):i},a.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e),o="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||o)return r;var i=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===i.type&&(e.parenthesizedAssign>=i.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=i.start&&(e.parenthesizedBind=-1)),i},a.parseSubscripts=function(e,t,n,o){for(var s,a=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd==e.end&&!this.canInsertSemicolon();;)if((s=this.eat(r.types.bracketL))||this.eat(r.types.dot)){var l=this.startNodeAt(t,n);l.object=e,l.property=s?this.parseExpression():this.parseIdent(!0),l.computed=!!s,s&&this.expect(r.types.bracketR),e=this.finishNode(l,"MemberExpression")}else if(!o&&this.eat(r.types.parenL)){var u=new i.DestructuringErrors,c=this.yieldPos,p=this.awaitPos;this.yieldPos=0,this.awaitPos=0;var d=this.parseExprList(r.types.parenR,this.options.ecmaVersion>=8,!1,u);if(a&&!this.canInsertSemicolon()&&this.eat(r.types.arrow))return this.checkPatternErrors(u,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=c,this.awaitPos=p,this.parseArrowExpression(this.startNodeAt(t,n),d,!0);this.checkExpressionErrors(u,!0),this.yieldPos=c||this.yieldPos,this.awaitPos=p||this.awaitPos;var f=this.startNodeAt(t,n);f.callee=e,f.arguments=d,e=this.finishNode(f,"CallExpression")}else{if(this.type!==r.types.backQuote)return e;var h=this.startNodeAt(t,n);h.tag=e,h.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(h,"TaggedTemplateExpression")}},a.parseExprAtom=function(e){var t=void 0,n=this.potentialArrowAt==this.start;switch(this.type){case r.types._super:this.inFunction||this.raise(this.start,"'super' outside of function or class");case r.types._this:var o=this.type===r.types._this?"ThisExpression":"Super";return t=this.startNode(),this.next(),this.finishNode(t,o);case r.types.name:var i=this.start,s=this.startLoc,a=this.parseIdent(this.type!==r.types.name);if(this.options.ecmaVersion>=8&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(r.types._function))return this.parseFunction(this.startNodeAt(i,s),!1,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(r.types.arrow))return this.parseArrowExpression(this.startNodeAt(i,s),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===r.types.name)return a=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(r.types.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,s),[a],!0)}return a;case r.types.regexp:var l=this.value;return t=this.parseLiteral(l.value),t.regex={pattern:l.pattern,flags:l.flags},t;case r.types.num:case r.types.string:return this.parseLiteral(this.value);case r.types._null:case r.types._true:case r.types._false:return t=this.startNode(),t.value=this.type===r.types._null?null:this.type===r.types._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case r.types.parenL:var u=this.start,c=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=u),e.parenthesizedBind<0&&(e.parenthesizedBind=u)),c;case r.types.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(r.types.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case r.types.braceL:return this.parseObj(!1,e);case r.types._function:return t=this.startNode(),this.next(),this.parseFunction(t,!1);case r.types._class:return this.parseClass(this.startNode(),!1);case r.types._new:return this.parseNew();case r.types.backQuote:return this.parseTemplate();default:this.unexpected()}},a.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},a.parseParenExpression=function(){this.expect(r.types.parenL);var e=this.parseExpression();return this.expect(r.types.parenR),e},a.parseParenAndDistinguishExpression=function(e){var t=this.start,n=this.startLoc,o=void 0,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,l=this.startLoc,u=[],c=!0,p=!1,d=new i.DestructuringErrors,f=this.yieldPos,h=this.awaitPos,m=void 0,y=void 0;for(this.yieldPos=0,this.awaitPos=0;this.type!==r.types.parenR;){if(c?c=!1:this.expect(r.types.comma),s&&this.afterTrailingComma(r.types.parenR,!0)){p=!0;break}if(this.type===r.types.ellipsis){m=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===r.types.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}this.type!==r.types.parenL||y||(y=this.start),u.push(this.parseMaybeAssign(!1,d,this.parseParenItem))}var g=this.start,v=this.startLoc;if(this.expect(r.types.parenR),e&&!this.canInsertSemicolon()&&this.eat(r.types.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),y&&this.unexpected(y),this.yieldPos=f,this.awaitPos=h,this.parseParenArrowList(t,n,u);u.length&&!p||this.unexpected(this.lastTokStart),m&&this.unexpected(m),this.checkExpressionErrors(d,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(o=this.startNodeAt(a,l),o.expressions=u,this.finishNodeAt(o,"SequenceExpression",g,v)):o=u[0]}else o=this.parseParenExpression();if(this.options.preserveParens){var E=this.startNodeAt(t,n);return E.expression=o,this.finishNode(E,"ParenthesizedExpression")}return o},a.parseParenItem=function(e){return e},a.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var l=[];a.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(r.types.dot))return e.meta=t,e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(e.start,"new.target can only be used in functions"),
this.finishNode(e,"MetaProperty");var n=this.start,o=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),n,o,!0),this.eat(r.types.parenL)?e.arguments=this.parseExprList(r.types.parenR,this.options.ecmaVersion>=8,!1):e.arguments=l,this.finishNode(e,"NewExpression")},a.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===r.types.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===r.types.backQuote,this.finishNode(n,"TemplateElement")},a.parseTemplate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isTagged,n=void 0!==t&&t,o=this.startNode();this.next(),o.expressions=[];var i=this.parseTemplateElement({isTagged:n});for(o.quasis=[i];!i.tail;)this.expect(r.types.dollarBraceL),o.expressions.push(this.parseExpression()),this.expect(r.types.braceR),o.quasis.push(i=this.parseTemplateElement({isTagged:n}));return this.next(),this.finishNode(o,"TemplateLiteral")},a.isAsyncProp=function(e){return!(e.computed||"Identifier"!==e.key.type||"async"!==e.key.name||this.type!==r.types.name&&this.type!==r.types.num&&this.type!==r.types.string&&this.type!==r.types.bracketL||s.lineBreak.test(this.input.slice(this.lastTokEnd,this.start)))},a.parseObj=function(e,t){var n=this.startNode(),o=!0,i={};for(n.properties=[],this.next();!this.eat(r.types.braceR);){if(o)o=!1;else if(this.expect(r.types.comma),this.afterTrailingComma(r.types.braceR))break;var s=this.startNode(),a=void 0,l=void 0,u=void 0,c=void 0;this.options.ecmaVersion>=6&&(s.method=!1,s.shorthand=!1,(e||t)&&(u=this.start,c=this.startLoc),e||(a=this.eat(r.types.star))),this.parsePropertyName(s),!e&&this.options.ecmaVersion>=8&&!a&&this.isAsyncProp(s)?(l=!0,this.parsePropertyName(s,t)):l=!1,this.parsePropertyValue(s,e,a,l,u,c,t),this.checkPropClash(s,i),n.properties.push(this.finishNode(s,"Property"))}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},a.parsePropertyValue=function(e,t,n,o,i,s,a){if((n||o)&&this.type===r.types.colon&&this.unexpected(),this.eat(r.types.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===r.types.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,o);else if(this.options.ecmaVersion>=5&&!e.computed&&"Identifier"===e.key.type&&("get"===e.key.name||"set"===e.key.name)&&this.type!=r.types.comma&&this.type!=r.types.braceR){(n||o||t)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l="get"===e.kind?0:1;if(e.value.params.length!==l){var u=e.value.start;"get"===e.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?(this.checkUnreserved(e.key),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,e.key):this.type===r.types.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected()},a.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(r.types.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(r.types.bracketR),e.key;e.computed=!1}return e.key=this.type===r.types.num||this.type===r.types.string?this.parseExprAtom():this.parseIdent(!0)},a.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=!1,e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},a.parseMethod=function(e,t){var n=this.startNode(),o=this.inGenerator,i=this.inAsync,s=this.yieldPos,a=this.awaitPos,l=this.inFunction;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=e),this.options.ecmaVersion>=8&&(n.async=!!t),this.inGenerator=n.generator,this.inAsync=n.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),this.expect(r.types.parenL),n.params=this.parseBindingList(r.types.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1),this.inGenerator=o,this.inAsync=i,this.yieldPos=s,this.awaitPos=a,this.inFunction=l,this.finishNode(n,"FunctionExpression")},a.parseArrowExpression=function(e,t,n){var r=this.inGenerator,o=this.inAsync,i=this.yieldPos,s=this.awaitPos,a=this.inFunction;return this.enterFunctionScope(),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.inGenerator=!1,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0),this.inGenerator=r,this.inAsync=o,this.yieldPos=i,this.awaitPos=s,this.inFunction=a,this.finishNode(e,"ArrowFunctionExpression")},a.parseFunctionBody=function(e,t){var n=t&&this.type!==r.types.braceL,o=this.strict,i=!1;if(n)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var s=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);o&&!s||(i=this.strictDirective(this.end),i&&s&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var a=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(e,!o&&!i&&!t&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.labels=a}this.exitFunctionScope(),this.strict&&e.id&&this.checkLVal(e.id,"none"),this.strict=o},a.isSimpleParamList=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("Identifier"!==n.type)return!1}return!0},a.checkParams=function(e,t){for(var n={},r=0,o=e.params;r<o.length;r++){var i=o[r];this.checkLVal(i,"var",t?null:n)}},a.parseExprList=function(e,t,n,o){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(r.types.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===r.types.comma?a=null:this.type===r.types.ellipsis?(a=this.parseSpread(o),o&&this.type===r.types.comma&&o.trailingComma<0&&(o.trailingComma=this.start)):a=this.parseMaybeAssign(!1,o),i.push(a)}return i},a.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Can not use 'await' as identifier inside an async function"),this.isKeyword(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!=-1)){var o=this.strict?this.reservedWordsStrict:this.reservedWords;o.test(r)&&this.raiseRecoverable(t,"The keyword '"+r+"' is reserved")}},a.parseIdent=function(e,t){var n=this.startNode();return e&&"never"==this.options.allowReserved&&(e=!1),this.type===r.types.name?n.name=this.value:this.type.keyword?n.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(n,"Identifier"),e||this.checkUnreserved(n),n},a.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type==r.types.semi||this.canInsertSemicolon()||this.type!=r.types.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(r.types.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")},a.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")}},"identifier.js":function(e,t,n){function r(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}}function o(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&u.test(String.fromCharCode(e)):t!==!1&&r(e,p)))}function i(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&c.test(String.fromCharCode(e)):t!==!1&&(r(e,p)||r(e,d)))))}e.__esModule=!0,e.isIdentifierStart=o,e.isIdentifierChar=i;var s=(e.reservedWords={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),a=(e.keywords={5:s,6:s+" const class extends export import super"},"-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"),l="-------------------------------------------------------------------------------------------------------------------------------------------------",u=new RegExp("["+a+"]"),c=new RegExp("["+a+l+"]");a=l=null;var p=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,17,26,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,26,45,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,785,52,76,44,33,24,27,35,42,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,25,391,63,32,0,449,56,264,8,2,36,18,0,50,29,881,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,881,68,12,0,67,12,65,0,32,6124,20,754,9486,1,3071,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,10591,541],d=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,1306,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,52,0,13,2,49,13,10,2,4,9,83,11,7,0,161,11,6,9,7,3,57,0,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,87,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,423,9,838,7,2,7,17,9,57,21,2,13,19882,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239]},"index.js":function(e,t,n){function r(e,t){return new a.Parser(t,e).parse()}function o(e,t,n){var r=new a.Parser(n,e,t);return r.nextToken(),r.parseExpression()}function i(e,t){return new a.Parser(t,e)}function s(t,n,r){e.parse_dammit=y=t,e.LooseParser=g=n,e.pluginsLoose=v=r}e.__esModule=!0,e.pluginsLoose=e.LooseParser=e.parse_dammit=e.version=e.nonASCIIwhitespace=e.lineBreakG=e.lineBreak=e.isNewLine=e.Token=e.isIdentifierStart=e.isIdentifierChar=e.tokContexts=e.TokContext=e.keywordTypes=e.tokTypes=e.TokenType=e.Node=e.getLineInfo=e.SourceLocation=e.Position=e.defaultOptions=e.plugins=e.Parser=void 0;var a=n("./state");Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return a.Parser}}),Object.defineProperty(e,"plugins",{enumerable:!0,get:function(){return a.plugins}});var l=n("./options");Object.defineProperty(e,"defaultOptions",{enumerable:!0,get:function(){return l.defaultOptions}});var u=n("./locutil");Object.defineProperty(e,"Position",{enumerable:!0,get:function(){return u.Position}}),Object.defineProperty(e,"SourceLocation",{enumerable:!0,get:function(){return u.SourceLocation}}),Object.defineProperty(e,"getLineInfo",{enumerable:!0,get:function(){return u.getLineInfo}});var c=n("./node");Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}});var p=n("./tokentype");Object.defineProperty(e,"TokenType",{enumerable:!0,get:function(){return p.TokenType}}),Object.defineProperty(e,"tokTypes",{enumerable:!0,get:function(){return p.types}}),Object.defineProperty(e,"keywordTypes",{enumerable:!0,get:function(){return p.keywords}});var d=n("./tokencontext");Object.defineProperty(e,"TokContext",{enumerable:!0,get:function(){return d.TokContext}}),Object.defineProperty(e,"tokContexts",{enumerable:!0,get:function(){return d.types}});var f=n("./identifier");Object.defineProperty(e,"isIdentifierChar",{enumerable:!0,get:function(){return f.isIdentifierChar}}),Object.defineProperty(e,"isIdentifierStart",{enumerable:!0,get:function(){return f.isIdentifierStart}});var h=n("./tokenize");Object.defineProperty(e,"Token",{enumerable:!0,get:function(){return h.Token}});var m=n("./whitespace");Object.defineProperty(e,"isNewLine",{enumerable:!0,get:function(){return m.isNewLine}}),Object.defineProperty(e,"lineBreak",{enumerable:!0,get:function(){return m.lineBreak}}),Object.defineProperty(e,"lineBreakG",{enumerable:!0,get:function(){return m.lineBreakG}}),Object.defineProperty(e,"nonASCIIwhitespace",{enumerable:!0,get:function(){return m.nonASCIIwhitespace}}),e.parse=r,e.parseExpressionAt=o,e.tokenizer=i,e.addLooseExports=s,n("./parseutil"),n("./statement"),n("./lval"),n("./expression"),n("./location"),n("./scope");var y=(e.version="5.1.1",e.parse_dammit=void 0),g=e.LooseParser=void 0,v=e.pluginsLoose=void 0},"location.js":function(e,t,n){var r=n("./state"),o=n("./locutil"),i=r.Parser.prototype;i.raise=function(e,t){var n=(0,o.getLineInfo)(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},i.raiseRecoverable=i.raise,i.curPosition=function(){if(this.options.locations)return new o.Position(this.curLine,this.pos-this.lineStart)}},"locutil.js":function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=1,r=0;;){i.lineBreakG.lastIndex=r;var o=i.lineBreakG.exec(e);if(!(o&&o.index<t))return new s(n,t-r);++n,r=o.index+o[0].length}}e.__esModule=!0,e.SourceLocation=e.Position=void 0,e.getLineInfo=o;var i=n("./whitespace"),s=e.Position=function(){function e(t,n){r(this,e),this.line=t,this.column=n}return e.prototype.offset=function(t){return new e(this.line,this.column+t)},e}();e.SourceLocation=function a(e,t,n){r(this,a),this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)}},"lval.js":function(e,t,n){var r=n("./tokentype"),o=n("./state"),i=n("./util"),s=o.Parser.prototype;s.toAssignable=function(e,t){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":break;case"ObjectExpression":e.type="ObjectPattern";for(var n=0,r=e.properties;n<r.length;n++){var o=r[n];"init"!==o.kind&&this.raise(o.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(o.value,t)}break;case"ArrayExpression":e.type="ArrayPattern",this.toAssignableList(e.elements,t);break;case"AssignmentExpression":if("="!==e.operator){this.raise(e.left.end,"Only '=' operator can be used for specifying default value.");break}e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}return e},s.toAssignableList=function(e,t){var n=e.length;if(n){var r=e[n-1];if(r&&"RestElement"==r.type)--n;else if(r&&"SpreadElement"==r.type){r.type="RestElement";var o=r.argument;this.toAssignable(o,t),--n}6===this.options.ecmaVersion&&t&&r&&"RestElement"===r.type&&"Identifier"!==r.argument.type&&this.unexpected(r.argument.start)}for(var i=0;i<n;i++){var s=e[i];s&&this.toAssignable(s,t)}return e},s.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},s.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==r.types.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},s.parseBindingAtom=function(){if(this.options.ecmaVersion<6)return this.parseIdent();switch(this.type){case r.types.name:return this.parseIdent();case r.types.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(r.types.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case r.types.braceL:return this.parseObj(!0);default:this.unexpected()}},s.parseBindingList=function(e,t,n){for(var o=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(r.types.comma),t&&this.type===r.types.comma)o.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===r.types.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),o.push(s),this.type===r.types.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),o.push(a)}return o},s.parseBindingListItem=function(e){return e},s.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(r.types.eq))return n;var o=this.startNodeAt(e,t);return o.left=n,o.right=this.parseMaybeAssign(),this.finishNode(o,"AssignmentPattern")},s.checkLVal=function(e,t,n){switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&((0,i.has)(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t&&"none"!==t&&(("var"===t&&!this.canDeclareVarName(e.name)||"var"!==t&&!this.canDeclareLexicalName(e.name))&&this.raiseRecoverable(e.start,"Identifier '"+e.name+"' has already been declared"),"var"===t?this.declareVarName(e.name):this.declareLexicalName(e.name));break;case"MemberExpression":t&&this.raiseRecoverable(e.start,(t?"Binding":"Assigning to")+" member expression");break;case"ObjectPattern":for(var r=0,o=e.properties;r<o.length;r++){var s=o[r];this.checkLVal(s.value,t,n)}break;case"ArrayPattern":for(var a=0,l=e.elements;a<l.length;a++){var u=l[a];u&&this.checkLVal(u,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}}},"node.js":function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}e.__esModule=!0,e.Node=void 0;var i=n("./state"),s=n("./locutil"),a=e.Node=function u(e,t,n){r(this,u),this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new s.SourceLocation(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},l=i.Parser.prototype;l.startNode=function(){return new a(this,this.start,this.startLoc)},l.startNodeAt=function(e,t){return new a(this,e,t)},l.finishNode=function(e,t){return o.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},l.finishNodeAt=function(e,t,n,r){return o.call(this,e,t,n,r)}},"options.js":function(e,t,n){function r(e){var t={};for(var n in a)t[n]=e&&(0,i.has)(e,n)?e[n]:a[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),(0,i.isArray)(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return(0,i.isArray)(t.onComment)&&(t.onComment=o(t,t.onComment)),t}function o(e,t){return function(n,r,o,i,a,l){var u={type:n?"Block":"Line",value:r,start:o,end:i};e.locations&&(u.loc=new s.SourceLocation(this,a,l)),e.ranges&&(u.range=[o,i]),t.push(u)}}e.__esModule=!0,e.defaultOptions=void 0,e.getOptions=r;var i=n("./util"),s=n("./locutil"),a=e.defaultOptions={ecmaVersion:7,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}}},"parseutil.js":function(e,t,n){function r(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=-1}e.__esModule=!0,e.DestructuringErrors=r;var o=n("./tokentype"),i=n("./state"),s=n("./whitespace"),a=i.Parser.prototype,l=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;a.strictDirective=function(e){for(;;){s.skipWhiteSpace.lastIndex=e,e+=s.skipWhiteSpace.exec(this.input)[0].length;var t=l.exec(this.input.slice(e));if(!t)return!1;if("use strict"==(t[1]||t[2]))return!1;e+=t[0].length}},a.eat=function(e){return this.type===e&&(this.next(),!0)},a.isContextual=function(e){return this.type===o.types.name&&this.value===e},a.eatContextual=function(e){return this.value===e&&this.eat(o.types.name)},a.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},a.canInsertSemicolon=function(){return this.type===o.types.eof||this.type===o.types.braceR||s.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},a.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},a.semicolon=function(){this.eat(o.types.semi)||this.insertSemicolon()||this.unexpected()},a.afterTrailingComma=function(e,t){if(this.type==e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},a.expect=function(e){this.eat(e)||this.unexpected()},a.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},a.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},a.checkExpressionErrors=function(e,t){var n=e?e.shorthandAssign:-1;return t?void(n>-1&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns")):n>=0},a.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},a.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type}},"scope.js":function(e,t,n){var r=n("./state"),o=n("./util"),i=r.Parser.prototype,s=Object.assign||function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0;i<n.length;i++){var s=n[i];for(var a in s)(0,o.has)(s,a)&&(e[a]=s[a])}return e};i.enterFunctionScope=function(){this.scopeStack.push({"var":{},lexical:{},childVar:{},parentLexical:{}})},i.exitFunctionScope=function(){this.scopeStack.pop()},i.enterLexicalScope=function(){var e=this.scopeStack[this.scopeStack.length-1],t={"var":{},lexical:{},childVar:{},parentLexical:{}};this.scopeStack.push(t),s(t.parentLexical,e.lexical,e.parentLexical)},i.exitLexicalScope=function(){var e=this.scopeStack.pop(),t=this.scopeStack[this.scopeStack.length-1];s(t.childVar,e["var"],e.childVar)},i.canDeclareVarName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!(0,o.has)(t.lexical,e)&&!(0,o.has)(t.parentLexical,e)},i.canDeclareLexicalName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!(0,o.has)(t.lexical,e)&&!(0,o.has)(t["var"],e)&&!(0,o.has)(t.childVar,e)},i.declareVarName=function(e){this.scopeStack[this.scopeStack.length-1]["var"][e]=!0},i.declareLexicalName=function(e){this.scopeStack[this.scopeStack.length-1].lexical[e]=!0}},"state.js":function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}e.__esModule=!0,e.Parser=e.plugins=void 0;var i=n("./identifier"),s=n("./tokentype"),a=n("./whitespace"),l=n("./options"),u=e.plugins={};e.Parser=function(){function e(t,n,u){r(this,e),this.options=t=(0,l.getOptions)(t),this.sourceFile=t.sourceFile,this.keywords=o(i.keywords[t.ecmaVersion>=6?6:5]);var c="";if(!t.allowReserved){for(var p=t.ecmaVersion;!(c=i.reservedWords[p]);p--);"module"==t.sourceType&&(c+=" await")}this.reservedWords=o(c);var d=(c?c+" ":"")+i.reservedWords.strict;this.reservedWordsStrict=o(d),this.reservedWordsStrictBind=o(d+" "+i.reservedWords.strictBind),this.input=String(n),this.containsEsc=!1,this.loadPlugins(t.plugins),u?(this.pos=u,this.lineStart=this.input.lastIndexOf("\n",u-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(a.lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=s.types.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.inFunction=this.inGenerator=this.inAsync=!1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterFunctionScope()}return e.prototype.isKeyword=function(e){return this.keywords.test(e)},e.prototype.isReservedWord=function(e){return this.reservedWords.test(e)},e.prototype.extend=function(e,t){this[e]=t(this[e])},e.prototype.loadPlugins=function(e){for(var t in e){var n=u[t];if(!n)throw new Error("Plugin '"+t+"' not found");n(this,e[t])}},e.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},e}()},"statement.js":function(e,t,n){var r=n("./tokentype"),o=n("./state"),i=n("./whitespace"),s=n("./identifier"),a=n("./util"),l=n("./parseutil"),u=o.Parser.prototype;u.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==r.types.eof;){var n=this.parseStatement(!0,!0,t);e.body.push(n)}return this.next(),this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var c={kind:"loop"},p={kind:"switch"};u.isLet=function(){if(this.type!==r.types.name||this.options.ecmaVersion<6||"let"!=this.value)return!1;i.skipWhiteSpace.lastIndex=this.pos;var e=i.skipWhiteSpace.exec(this.input),t=this.pos+e[0].length,n=this.input.charCodeAt(t);if(91===n||123==n)return!0;if((0,s.isIdentifierStart)(n,!0)){for(var o=t+1;(0,s.isIdentifierChar)(this.input.charCodeAt(o),!0);)++o;var a=this.input.slice(t,o);if(!this.isKeyword(a))return!0}return!1},u.isAsyncFunction=function(){if(this.type!==r.types.name||this.options.ecmaVersion<8||"async"!=this.value)return!1;i.skipWhiteSpace.lastIndex=this.pos;var e=i.skipWhiteSpace.exec(this.input),t=this.pos+e[0].length;return!(i.lineBreak.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!=this.input.length&&(0,s.isIdentifierChar)(this.input.charAt(t+8)))},u.parseStatement=function(e,t,n){var o=this.type,i=this.startNode(),s=void 0;switch(this.isLet()&&(o=r.types._var,s="let"),o){case r.types._break:case r.types._continue:return this.parseBreakContinueStatement(i,o.keyword);case r.types._debugger:return this.parseDebuggerStatement(i);case r.types._do:return this.parseDoStatement(i);case r.types._for:return this.parseForStatement(i);case r.types._function:return!e&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1);case r.types._class:return e||this.unexpected(),this.parseClass(i,!0);case r.types._if:return this.parseIfStatement(i);case r.types._return:return this.parseReturnStatement(i);case r.types._switch:return this.parseSwitchStatement(i);case r.types._throw:return this.parseThrowStatement(i);case r.types._try:return this.parseTryStatement(i);case r.types._const:case r.types._var:return s=s||this.value,e||"var"==s||this.unexpected(),this.parseVarStatement(i,s);case r.types._while:return this.parseWhileStatement(i);case r.types._with:return this.parseWithStatement(i);case r.types.braceL:return this.parseBlock();case r.types.semi:return this.parseEmptyStatement(i);case r.types._export:case r.types._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),o===r.types._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction()&&e)return this.next(),this.parseFunctionStatement(i,!0);var a=this.value,l=this.parseExpression();return o===r.types.name&&"Identifier"===l.type&&this.eat(r.types.colon)?this.parseLabeledStatement(i,a,l):this.parseExpressionStatement(i,l)}},u.parseBreakContinueStatement=function(e,t){var n="break"==t;this.next(),this.eat(r.types.semi)||this.insertSemicolon()?e.label=null:this.type!==r.types.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var o=0;o<this.labels.length;++o){var i=this.labels[o];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return o===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},u.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},u.parseDoStatement=function(e){return this.next(),this.labels.push(c),e.body=this.parseStatement(!1),this.labels.pop(),this.expect(r.types._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(r.types.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},u.parseForStatement=function(e){if(this.next(),this.labels.push(c),this.enterLexicalScope(),this.expect(r.types.parenL),this.type===r.types.semi)return this.parseFor(e,null);var t=this.isLet();if(this.type===r.types._var||this.type===r.types._const||t){var n=this.startNode(),o=t?"let":this.value;return this.next(),this.parseVar(n,!0,o),this.finishNode(n,"VariableDeclaration"),!(this.type===r.types._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==n.declarations.length||"var"!==o&&n.declarations[0].init?this.parseFor(e,n):this.parseForIn(e,n)}var i=new l.DestructuringErrors,s=this.parseExpression(!0,i);return this.type===r.types._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.toAssignable(s),
this.checkLVal(s),this.checkPatternErrors(i,!0),this.parseForIn(e,s)):(this.checkExpressionErrors(i,!0),this.parseFor(e,s))},u.parseFunctionStatement=function(e,t){return this.next(),this.parseFunction(e,!0,!1,t)},u.isFunction=function(){return this.type===r.types._function||this.isAsyncFunction()},u.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement(!this.strict&&this.isFunction()),e.alternate=this.eat(r.types._else)?this.parseStatement(!this.strict&&this.isFunction()):null,this.finishNode(e,"IfStatement")},u.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(r.types.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},u.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(r.types.braceL),this.labels.push(p),this.enterLexicalScope();for(var t=void 0,n=!1;this.type!=r.types.braceR;)if(this.type===r.types._case||this.type===r.types._default){var o=this.type===r.types._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),o?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(r.types.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(!0));return this.exitLexicalScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},u.parseThrowStatement=function(e){return this.next(),i.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var d=[];u.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===r.types._catch){var t=this.startNode();this.next(),this.expect(r.types.parenL),t.param=this.parseBindingAtom(),this.enterLexicalScope(),this.checkLVal(t.param,"let"),this.expect(r.types.parenR),t.body=this.parseBlock(!1),this.exitLexicalScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(r.types._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},u.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},u.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(c),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"WhileStatement")},u.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement(!1),this.finishNode(e,"WithStatement")},u.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},u.parseLabeledStatement=function(e,t,n){for(var o=0,i=this.labels;o<i.length;o++){var s=i[o];s.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===r.types._switch?"switch":null,l=this.labels.length-1;l>=0;l--){var u=this.labels[l];if(u.statementStart!=e.start)break;u.statementStart=this.start,u.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(!0),("ClassDeclaration"==e.body.type||"VariableDeclaration"==e.body.type&&"var"!=e.body.kind||"FunctionDeclaration"==e.body.type&&(this.strict||e.body.generator))&&this.raiseRecoverable(e.body.start,"Invalid labeled declaration"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},u.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},u.parseBlock=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.startNode();for(t.body=[],this.expect(r.types.braceL),e&&this.enterLexicalScope();!this.eat(r.types.braceR);){var n=this.parseStatement(!0);t.body.push(n)}return e&&this.exitLexicalScope(),this.finishNode(t,"BlockStatement")},u.parseFor=function(e,t){return e.init=t,this.expect(r.types.semi),e.test=this.type===r.types.semi?null:this.parseExpression(),this.expect(r.types.semi),e.update=this.type===r.types.parenR?null:this.parseExpression(),this.expect(r.types.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"ForStatement")},u.parseForIn=function(e,t){var n=this.type===r.types._in?"ForInStatement":"ForOfStatement";return this.next(),e.left=t,e.right=this.parseExpression(),this.expect(r.types.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,n)},u.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var o=this.startNode();if(this.parseVarId(o,n),this.eat(r.types.eq)?o.init=this.parseMaybeAssign(t):"const"!==n||this.type===r.types._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"==o.id.type||t&&(this.type===r.types._in||this.isContextual("of"))?o.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(o,"VariableDeclarator")),!this.eat(r.types.comma))break}return e},u.parseVarId=function(e,t){e.id=this.parseBindingAtom(t),this.checkLVal(e.id,t,!1)},u.parseFunction=function(e,t,n,o){this.initFunction(e),this.options.ecmaVersion>=6&&!o&&(e.generator=this.eat(r.types.star)),this.options.ecmaVersion>=8&&(e.async=!!o),t&&(e.id="nullableID"===t&&this.type!=r.types.name?null:this.parseIdent(),e.id&&this.checkLVal(e.id,"var"));var i=this.inGenerator,s=this.inAsync,a=this.yieldPos,l=this.awaitPos,u=this.inFunction;return this.inGenerator=e.generator,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),t||(e.id=this.type==r.types.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n),this.inGenerator=i,this.inAsync=s,this.yieldPos=a,this.awaitPos=l,this.inFunction=u,this.finishNode(e,t?"FunctionDeclaration":"FunctionExpression")},u.parseFunctionParams=function(e){this.expect(r.types.parenL),e.params=this.parseBindingList(r.types.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},u.parseClass=function(e,t){this.next(),this.parseClassId(e,t),this.parseClassSuper(e);var n=this.startNode(),o=!1;for(n.body=[],this.expect(r.types.braceL);!this.eat(r.types.braceR);)if(!this.eat(r.types.semi)){var i=this.startNode(),s=this.eat(r.types.star),a=!1,l=this.type===r.types.name&&"static"===this.value;this.parsePropertyName(i),i["static"]=l&&this.type!==r.types.parenL,i["static"]&&(s&&this.unexpected(),s=this.eat(r.types.star),this.parsePropertyName(i)),this.options.ecmaVersion>=8&&!s&&!i.computed&&"Identifier"===i.key.type&&"async"===i.key.name&&this.type!==r.types.parenL&&!this.canInsertSemicolon()&&(a=!0,this.parsePropertyName(i)),i.kind="method";var u=!1;if(!i.computed){var c=i.key;s||a||"Identifier"!==c.type||this.type===r.types.parenL||"get"!==c.name&&"set"!==c.name||(u=!0,i.kind=c.name,c=this.parsePropertyName(i)),!i["static"]&&("Identifier"===c.type&&"constructor"===c.name||"Literal"===c.type&&"constructor"===c.value)&&(o&&this.raise(c.start,"Duplicate constructor in the same class"),u&&this.raise(c.start,"Constructor can't have get/set modifier"),s&&this.raise(c.start,"Constructor can't be a generator"),a&&this.raise(c.start,"Constructor can't be an async method"),i.kind="constructor",o=!0)}if(this.parseClassMethod(n,i,s,a),u){var p="get"===i.kind?0:1;if(i.value.params.length!==p){var d=i.value.start;"get"===i.kind?this.raiseRecoverable(d,"getter should have no params"):this.raiseRecoverable(d,"setter should have exactly one param")}else"set"===i.kind&&"RestElement"===i.value.params[0].type&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params")}}return e.body=this.finishNode(n,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},u.parseClassMethod=function(e,t,n,r){t.value=this.parseMethod(n,r),e.body.push(this.finishNode(t,"MethodDefinition"))},u.parseClassId=function(e,t){e.id=this.type===r.types.name?this.parseIdent():t===!0?this.unexpected():null},u.parseClassSuper=function(e){e.superClass=this.eat(r.types._extends)?this.parseExprSubscripts():null},u.parseExport=function(e,t){if(this.next(),this.eat(r.types.star))return this.expectContextual("from"),e.source=this.type===r.types.string?this.parseExprAtom():this.unexpected(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(r.types._default)){this.checkExport(t,"default",this.lastTokStart);var n=void 0;if(this.type===r.types._function||(n=this.isAsyncFunction())){var o=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(o,"nullableID",!1,n)}else if(this.type===r.types._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(!0),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))e.source=this.type===r.types.string?this.parseExprAtom():this.unexpected();else{for(var s=0,a=e.specifiers;s<a.length;s++){var l=a[s];this.checkUnreserved(l.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},u.checkExport=function(e,t,n){e&&((0,a.has)(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},u.checkPatternExport=function(e,t){var n=t.type;if("Identifier"==n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"==n)for(var r=0,o=t.properties;r<o.length;r++){var i=o[r];this.checkPatternExport(e,i.value)}else if("ArrayPattern"==n)for(var s=0,a=t.elements;s<a.length;s++){var l=a[s];l&&this.checkPatternExport(e,l)}else"AssignmentPattern"==n?this.checkPatternExport(e,t.left):"ParenthesizedExpression"==n&&this.checkPatternExport(e,t.expression)},u.checkVariableExport=function(e,t){if(e)for(var n=0;n<t.length;n++){var r=t[n];this.checkPatternExport(e,r.id)}},u.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},u.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(r.types.braceL);!this.eat(r.types.braceR);){if(n)n=!1;else if(this.expect(r.types.comma),this.afterTrailingComma(r.types.braceR))break;var o=this.startNode();o.local=this.parseIdent(!0),o.exported=this.eatContextual("as")?this.parseIdent(!0):o.local,this.checkExport(e,o.exported.name,o.exported.start),t.push(this.finishNode(o,"ExportSpecifier"))}return t},u.parseImport=function(e){return this.next(),this.type===r.types.string?(e.specifiers=d,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===r.types.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},u.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===r.types.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,"let"),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(r.types.comma))return e}if(this.type===r.types.star){var o=this.startNode();return this.next(),this.expectContextual("as"),o.local=this.parseIdent(),this.checkLVal(o.local,"let"),e.push(this.finishNode(o,"ImportNamespaceSpecifier")),e}for(this.expect(r.types.braceL);!this.eat(r.types.braceR);){if(t)t=!1;else if(this.expect(r.types.comma),this.afterTrailingComma(r.types.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,"let"),e.push(this.finishNode(i,"ImportSpecifier"))}return e}},"tokencontext.js":function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.types=e.TokContext=void 0;var o=n("./state"),i=n("./tokentype"),s=n("./whitespace"),a=e.TokContext=function c(e,t,n,o,i){r(this,c),this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=o,this.generator=!!i},l=e.types={b_stat:new a("{",(!1)),b_expr:new a("{",(!0)),b_tmpl:new a("${",(!1)),p_stat:new a("(",(!1)),p_expr:new a("(",(!0)),q_tmpl:new a("`",(!0),(!0),function(e){return e.tryReadTemplateToken()}),f_stat:new a("function",(!1)),f_expr:new a("function",(!0)),f_expr_gen:new a("function",(!0),(!1),null,(!0)),f_gen:new a("function",(!1),(!1),null,(!0))},u=o.Parser.prototype;u.initialContext=function(){return[l.b_stat]},u.braceIsBlock=function(e){var t=this.curContext();return t===l.f_expr||t===l.f_stat||(e!==i.types.colon||t!==l.b_stat&&t!==l.b_expr?e===i.types._return||e==i.types.name&&this.exprAllowed?s.lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):e===i.types._else||e===i.types.semi||e===i.types.eof||e===i.types.parenR||e==i.types.arrow||(e==i.types.braceL?t===l.b_stat:e!=i.types._var&&e!=i.types.name&&!this.exprAllowed):!t.isExpr)},u.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},u.updateContext=function(e){var t=void 0,n=this.type;n.keyword&&e==i.types.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},i.types.parenR.updateContext=i.types.braceR.updateContext=function(){if(1==this.context.length)return void(this.exprAllowed=!0);var e=this.context.pop();e===l.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr},i.types.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?l.b_stat:l.b_expr),this.exprAllowed=!0},i.types.dollarBraceL.updateContext=function(){this.context.push(l.b_tmpl),this.exprAllowed=!0},i.types.parenL.updateContext=function(e){var t=e===i.types._if||e===i.types._for||e===i.types._with||e===i.types._while;this.context.push(t?l.p_stat:l.p_expr),this.exprAllowed=!0},i.types.incDec.updateContext=function(){},i.types._function.updateContext=i.types._class.updateContext=function(e){e.beforeExpr&&e!==i.types.semi&&e!==i.types._else&&(e!==i.types.colon&&e!==i.types.braceL||this.curContext()!==l.b_stat)?this.context.push(l.f_expr):this.context.push(l.f_stat),this.exprAllowed=!1},i.types.backQuote.updateContext=function(){this.curContext()===l.q_tmpl?this.context.pop():this.context.push(l.q_tmpl),this.exprAllowed=!1},i.types.star.updateContext=function(e){if(e==i.types._function){var t=this.context.length-1;this.context[t]===l.f_expr?this.context[t]=l.f_expr_gen:this.context[t]=l.f_gen}this.exprAllowed=!0},i.types.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&("of"==this.value&&!this.exprAllowed||"yield"==this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t}},"tokenize.js":function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n,r){try{return new RegExp(e,t)}catch(o){if(void 0!==n)throw o instanceof SyntaxError&&r.raise(n,"Error parsing regular expression: "+o.message),o}}function i(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(1023&e)+56320))}e.__esModule=!0,e.Token=void 0;var s=n("./identifier"),a=n("./tokentype"),l=n("./state"),u=n("./locutil"),c=n("./whitespace"),p=e.Token=function y(e){r(this,y),this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new u.SourceLocation(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},d=l.Parser.prototype,f="object"==typeof Packages&&"[object JavaPackage]"==Object.prototype.toString.call(Packages);d.next=function(){this.options.onToken&&this.options.onToken(new p(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},d.getToken=function(){return this.next(),new p(this)},"undefined"!=typeof Symbol&&(d[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===a.types.eof,value:t}}}}),d.curContext=function(){return this.context[this.context.length-1]},d.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(a.types.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},d.readToken=function(e){return(0,s.isIdentifierStart)(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},d.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=57344)return e;var t=this.input.charCodeAt(this.pos+1);return(e<<10)+t-56613888},d.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations){c.lineBreakG.lastIndex=t;for(var r=void 0;(r=c.lineBreakG.exec(this.input))&&r.index<this.pos;)++this.curLine,this.lineStart=r.index+r[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())},d.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!(0,c.isNewLine)(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},d.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&c.nonASCIIwhitespace.test(String.fromCharCode(e))))break e;++this.pos}}},d.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},d.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(a.types.ellipsis)):(++this.pos,this.finishToken(a.types.dot))},d.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(a.types.assign,2):this.finishOp(a.types.slash,1)},d.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?a.types.star:a.types.modulo;return this.options.ecmaVersion>=7&&42===t&&(++n,r=a.types.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(a.types.assign,n+1):this.finishOp(r,n)},d.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?a.types.logicalOR:a.types.logicalAND,2):61===t?this.finishOp(a.types.assign,2):this.finishOp(124===e?a.types.bitwiseOR:a.types.bitwiseAND,1)},d.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(a.types.assign,2):this.finishOp(a.types.bitwiseXOR,1)},d.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!=t||this.inModule||62!=this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!c.lineBreak.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(a.types.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(a.types.assign,2):this.finishOp(a.types.plusMin,1)},d.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(a.types.assign,n+1):this.finishOp(a.types.bitShift,n)):33!=t||60!=e||this.inModule||45!=this.input.charCodeAt(this.pos+2)||45!=this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(a.types.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},d.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(a.types.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(a.types.arrow)):this.finishOp(61===e?a.types.eq:a.types.prefix,1)},d.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(a.types.parenL);case 41:return++this.pos,this.finishToken(a.types.parenR);case 59:return++this.pos,this.finishToken(a.types.semi);case 44:return++this.pos,this.finishToken(a.types.comma);case 91:return++this.pos,this.finishToken(a.types.bracketL);case 93:return++this.pos,this.finishToken(a.types.bracketR);case 123:return++this.pos,this.finishToken(a.types.braceL);case 125:return++this.pos,this.finishToken(a.types.braceR);case 58:return++this.pos,this.finishToken(a.types.colon);case 63:return++this.pos,this.finishToken(a.types.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(a.types.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(a.types.prefix,1)}this.raise(this.pos,"Unexpected character '"+i(e)+"'")},d.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};var h=!!o("","u");d.readRegexp=function(){for(var e=this,t=void 0,n=void 0,r=this.pos;;){this.pos>=this.input.length&&this.raise(r,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(c.lineBreak.test(i)&&this.raise(r,"Unterminated regular expression"),t)t=!1;else{if("["===i)n=!0;else if("]"===i&&n)n=!1;else if("/"===i&&!n)break;t="\\"===i}++this.pos}var s=this.input.slice(r,this.pos);++this.pos;var l=this.readWord1(),u=s,p="";if(l){var d=/^[gim]*$/;this.options.ecmaVersion>=6&&(d=/^[gimuy]*$/),d.test(l)||this.raise(r,"Invalid regular expression flag"),l.indexOf("u")>=0&&(h?p="u":(u=u.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(t,n,o){return n=Number("0x"+n),n>1114111&&e.raise(r+o+3,"Code point out of bounds"),"x"}),u=u.replace(/\\u([a-fA-F0-9]{4})|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"),p=p.replace("u","")))}var m=null;return f||(o(u,p,r,this),m=o(s,l)),this.finishToken(a.types.regexp,{pattern:s,flags:l,value:m})},d.readInt=function(e,t){for(var n=this.pos,r=0,o=0,i=null==t?1/0:t;o<i;++o){var s=this.input.charCodeAt(this.pos),a=void 0;if(a=s>=97?s-97+10:s>=65?s-65+10:s>=48&&s<=57?s-48:1/0,a>=e)break;++this.pos,r=r*e+a}return this.pos===n||null!=t&&this.pos-n!==t?null:r},d.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),(0,s.isIdentifierStart)(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(a.types.num,t)},d.readNumber=function(e){var t=this.pos,n=!1,r=48===this.input.charCodeAt(this.pos);e||null!==this.readInt(10)||this.raise(t,"Invalid number"),r&&this.pos==t+1&&(r=!1);var o=this.input.charCodeAt(this.pos);46!==o||r||(++this.pos,this.readInt(10),n=!0,o=this.input.charCodeAt(this.pos)),69!==o&&101!==o||r||(o=this.input.charCodeAt(++this.pos),43!==o&&45!==o||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number"),n=!0),(0,s.isIdentifierStart)(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=this.input.slice(t,this.pos),l=void 0;return n?l=parseFloat(i):r&&1!==i.length?this.strict?this.raise(t,"Invalid number"):l=/[89]/.test(i)?parseInt(i,10):parseInt(i,8):l=parseInt(i,10),this.finishToken(a.types.num,l)},d.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t=void 0;if(123===e){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t},d.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):((0,c.isNewLine)(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(a.types.string,t)};var m={};d.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==m)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},d.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw m;this.raise(e,t)},d.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==a.types.template&&this.type!==a.types.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(a.types.template,e)):36===n?(this.pos+=2,this.finishToken(a.types.dollarBraceL)):(++this.pos,this.finishToken(a.types.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if((0,c.isNewLine)(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},d.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(a.types.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},d.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return i(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),"0"!==n&&(this.strict||e)&&this.invalidStringToken(this.pos-2,"Octal literal in strict mode"),this.pos+=n.length-1,String.fromCharCode(r)}return String.fromCharCode(t)}},d.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},d.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var o=this.fullCharCodeAtPos();if((0,s.isIdentifierChar)(o,r))this.pos+=o<=65535?1:2;else{if(92!==o)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var i=this.pos;117!=this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?s.isIdentifierStart:s.isIdentifierChar)(a,r)||this.invalidStringToken(i,"Invalid Unicode escape"),e+=this.input.substr(this.pos-6,6),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},d.readWord=function(){var e=this.readWord1(),t=a.types.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=a.keywords[e]),this.finishToken(t,e)}},"tokentype.js":function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return new s(e,{beforeExpr:!0,binop:t})}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.keyword=e,u[e]=new s(e,t)}e.__esModule=!0;var s=e.TokenType=function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,c),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null},a={beforeExpr:!0},l={startsExpr:!0},u=e.keywords={};e.types={num:new s("num",l),regexp:new s("regexp",l),string:new s("string",l),name:new s("name",l),eof:new s("eof"),bracketL:new s("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new s("]"),braceL:new s("{",{beforeExpr:!0,startsExpr:!0}),braceR:new s("}"),parenL:new s("(",{beforeExpr:!0,startsExpr:!0}),parenR:new s(")"),comma:new s(",",a),semi:new s(";",a),colon:new s(":",a),dot:new s("."),question:new s("?",a),arrow:new s("=>",a),template:new s("template"),invalidTemplate:new s("invalidTemplate"),ellipsis:new s("...",a),backQuote:new s("`",l),dollarBraceL:new s("${",{beforeExpr:!0,startsExpr:!0}),eq:new s("=",{beforeExpr:!0,isAssign:!0}),assign:new s("_=",{beforeExpr:!0,isAssign:!0}),incDec:new s("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new s("prefix",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:o("||",1),logicalAND:o("&&",2),bitwiseOR:o("|",3),bitwiseXOR:o("^",4),bitwiseAND:o("&",5),equality:o("==/!=",6),relational:o("</>",7),bitShift:o("<</>>",8),plusMin:new s("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:o("%",10),star:o("*",10),slash:o("/",10),starstar:new s("**",{beforeExpr:!0}),_break:i("break"),_case:i("case",a),_catch:i("catch"),_continue:i("continue"),_debugger:i("debugger"),_default:i("default",a),_do:i("do",{isLoop:!0,beforeExpr:!0}),_else:i("else",a),_finally:i("finally"),_for:i("for",{isLoop:!0}),_function:i("function",l),_if:i("if"),_return:i("return",a),_switch:i("switch"),_throw:i("throw",a),_try:i("try"),_var:i("var"),_const:i("const"),_while:i("while",{isLoop:!0}),_with:i("with"),_new:i("new",{beforeExpr:!0,startsExpr:!0}),_this:i("this",l),_super:i("super",l),_class:i("class",l),_extends:i("extends",a),_export:i("export"),_import:i("import"),_null:i("null",l),_true:i("true",l),_false:i("false",l),_in:i("in",{beforeExpr:!0,binop:7}),_instanceof:i("instanceof",{beforeExpr:!0,binop:7}),_typeof:i("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:i("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:i("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})}},"util.js":function(e,t,n){function r(e,t){
return i.call(e,t)}e.__esModule=!0,e.has=r;var o=Object.prototype,i=o.hasOwnProperty,s=o.toString;e.isArray=Array.isArray||function(e){return"[object Array]"===s.call(e)}},"whitespace.js":function(e,t,n){function r(e){return 10===e||13===e||8232===e||8233===e}e.__esModule=!0,e.isNewLine=r;var o=e.lineBreak=/\r\n?|\n|\u2028|\u2029/;e.lineBreakG=new RegExp(o.source,"g"),e.nonASCIIwhitespace=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,e.skipWhiteSpace=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g}},"esotope.js":function(e,t,n){"use strict";function r(){return{indent:null,base:null,parse:null,format:{indent:{style:"    ",base:0},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1},directive:!1,raw:!0,verbatim:null}}function o(e){if(e<128)return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57||36===e||95===e||92===e;var t=String.fromCharCode(e);return J.test(t)}function i(e){return 10===e||13===e||8232===e||8233===e}function s(e){return 32===e||9===e||i(e)||11===e||12===e||160===e||e>=5760&&Q.indexOf(e)>=0}function a(e){return e>=48&&e<=57}function l(e,t){var n="";for(t|=0;t>0;t>>>=1,e+=e)1&t&&(n+=e);return n}function u(e,t){function n(e){return"object"==typeof e&&e instanceof Object&&!(e instanceof RegExp)}var r,o;for(r in t)t.hasOwnProperty(r)&&(o=t[r],n(o)?n(e[r])?u(e[r],o):e[r]=u({},o):e[r]=o);return e}function c(e){var t,n,r,o,i;if(e===1/0)return D?"null":U?"1e400":"1e+400";if(t=""+e,!U||t.length<3)return t;for(n=t.indexOf("."),D||48!==t.charCodeAt(0)||1!==n||(n=0,t=t.slice(1)),r=t,t=t.replace("e+","e"),o=0,(i=r.indexOf("e"))>0&&(o=+r.slice(i+1),r=r.slice(0,i)),n>=0&&(o-=r.length-n-1,r=+(r.slice(0,n)+r.slice(n+1))+""),i=0;48===r.charCodeAt(r.length+i-1);)--i;return 0!==i&&(o-=i,r=r.slice(0,i)),0!==o&&(r+="e"+o),(r.length<t.length||F&&e>1e12&&Math.floor(e)===e&&(r="0x"+e.toString(16)).length<t.length)&&+r===e&&(t=r),t}function p(e,t){return 8232===(e&-2)?(t?"u":"\\u")+(8232===e?"2028":"2029"):10===e||13===e?(t?"":"\\")+(10===e?"n":"r"):String.fromCharCode(e)}function d(e){var t,n,r,o,i,s,a,l;if(n=e.toString(),e.source){if(t=n.match(/\/([^\/]*)$/),!t)return n;for(r=t[1],n="",a=!1,l=!1,o=0,i=e.source.length;o<i;++o)s=e.source.charCodeAt(o),l?(n+=p(s,l),l=!1):(a?93===s&&(a=!1):47===s?n+="\\":91===s&&(a=!0),n+=p(s,l),l=92===s);return"/"+n+"/"+r}return n}function f(e,t){var n,r="\\";switch(e){case 8:r+="b";break;case 12:r+="f";break;case 9:r+="t";break;default:n=e.toString(16).toUpperCase(),r+=D||e>255?"u"+"0000".slice(n.length)+n:0!==e||a(t)?11===e?"x0B":"x"+"00".slice(n.length)+n:"0"}return r}function h(e){var t="\\";switch(e){case 92:t+="\\";break;case 10:t+="n";break;case 13:t+="r";break;case 8232:t+="u2028";break;case 8233:t+="u2029"}return t}function m(e){var t,n,r,o;for(o="double"===B?'"':"'",t=0,n=e.length;t<n;++t){if(r=e.charCodeAt(t),39===r){o='"';break}if(34===r){o="'";break}92===r&&++t}return o+e+o}function y(e){var t,n,r,o,s,a="",l=0,u=0;for(t=0,n=e.length;t<n;++t){if(r=e.charCodeAt(t),39===r)++l;else if(34===r)++u;else if(47===r&&D)a+="\\";else{if(i(r)||92===r){a+=h(r);continue}if(D&&r<32||!(D||H||r>=32&&r<=126)){a+=f(r,e.charCodeAt(t+1));continue}}a+=String.fromCharCode(r)}if(o=!("double"===B||"auto"===B&&u<l),s=o?"'":'"',!(o?l:u))return s+a+s;for(e=a,a=s,t=0,n=e.length;t<n;++t)r=e.charCodeAt(t),(39===r&&o||34===r&&!o)&&(a+="\\"),a+=String.fromCharCode(r);return a+s}function g(e,t){if(!e.length)return t;if(!t.length)return e;var n=e.charCodeAt(e.length-1),r=t.charCodeAt(0);return o(n)&&o(r)||n===r&&(43===n||45===n)||47===n&&105===r?e+ie.space+t:s(n)||s(r)?e+t:e+ie.optSpace+t}function v(){var e=ie.indent;return ie.indent+=ie.indentUnit,e}function E(e){return e.type===$.BlockStatement?ie.optSpace:e.type===$.EmptyStatement?"":ie.newline+ie.indent+ie.indentUnit}function b(e){return e.type===$.BlockStatement?ie.optSpace:ie.newline+ie.indent}function S(e,t){var n=e[X.verbatim],r="string"==typeof n,o=r||void 0===n.precedence?z.Sequence:n.precedence,i=o<t.precedence,s=r?n:n.content,a=s.split(/\r\n|\n/),l=a.length;i&&(ie.js+="("),ie.js+=a[0];for(var u=1;u<l;u++)ie.js+=ie.newline+ie.indent+a[u];i&&(ie.js+=")")}function w(e){var t=e.params,n=t.length,r=n-1,o=e.type===$.ArrowFunctionExpression&&1===n&&t[0].type===$.Identifier;if(o)ie.js+=t[0].name;else{ie.js+="(";for(var i=0;i<n;++i){var s=t[i];t[i].type===$.Identifier?ie.js+=s.name:se[s.type](s,Z.e4),i!==r&&(ie.js+=","+ie.optSpace)}ie.js+=")"}}function _(e){var t=e.body;if(w(e),e.type===$.ArrowFunctionExpression&&(ie.js+=ie.optSpace+"=>"),e.expression){ie.js+=ie.optSpace;var n=N(t,Z.e4);"{"===n.charAt(0)&&(n="("+n+")"),ie.js+=n}else ie.js+=E(t),ae[t.type](t,Z.s8)}function x(e,t){var n=e.operator,r=Y[e.operator],i=r<t.precedence,s=t.allowIn||i,a=Z.e16(r,s),l=N(e.left,a);i|="in"===n&&!s,i&&(ie.js+="("),l=47===l.charCodeAt(l.length-1)&&o(n.charCodeAt(0))?l+ie.space+n:g(l,n),a.precedence++;var u=N(e.right,a);"/"===n&&"/"===u.charAt(0)||"<"===n.slice(-1)&&"!--"===u.slice(0,3)?l+=ie.space+u:l=g(l,u),ie.js+=l,i&&(ie.js+=")")}function T(e){var t=e.elements,n=t.length;if(n){var r=n-1,o=n>1,i=v(),s=ie.newline+ie.indent;ie.js+="[";for(var a=0;a<n;a++){var l=t[a];o&&(ie.js+=s),l&&se[l.type](l,Z.e4),a===r&&l||(ie.js+=",")}ie.indent=i,o&&(ie.js+=ie.newline+ie.indent),ie.js+="]"}else ie.js+="[]"}function C(e){ie.js+=e.id.name,e.name&&(ie.js+=ie.space+"as"+ie.space+e.name.name)}function A(e){var t=e.blocks,n=e.filter,r=e.type===$.GeneratorExpression,o=r?"(":"[",i=N(e.body,Z.e4);if(t){for(var s=v(),a=t.length,l=0;l<a;++l){var u=N(t[l],Z.e5);o=l>0?g(o,u):o+u}ie.indent=s}if(n){var c=N(n,Z.e5);o=g(o,"if"+ie.optSpace),o=g(o,"("+c+")")}o=g(o,i),o+=r?")":"]",ie.js+=o}function I(e,t,n){for(var r=n.length,o=r-1,i=0;i<r;++i){var s=M(n[i],Z.s7);e=g(e,s),(t||i!==o)&&(e+=b(n[i].body))}return e}function P(e,t,n){var r=t.body,o=t.left,i=!W&&n.semicolonOptional,s=v(),a="for"+ie.optSpace+"(";if(o.type===$.VariableDeclaration){var l=v();a+=o.kind+ie.space+M(o.declarations[0],Z.s6),ie.indent=l}else a+=N(o,Z.e10);a=g(a,e);var u=N(t.right,Z.e5);a=g(a,u)+")",ie.indent=s,ie.js+=a+E(r),ae[r.type](r,Z.s4(i))}function N(e,t){var n=ie.js;ie.js="",se[e.type](e,t);var r=ie.js;return ie.js=n,r}function M(e,t){var n=ie.js;ie.js="",ae[e.type](e,t);var r=ie.js;return ie.js=n,r}function O(e){return ie.js="",ae[e.type]?ae[e.type](e,Z.s7):se[e.type](e,Z.e19),ie.js}function j(e){return function(t,n){X.verbatim&&t.hasOwnProperty(X.verbatim)?S(t,n):e(t,n)}}function k(){var e={};for(var t in ne)ne.hasOwnProperty(t)&&(e[t]=j(ne[t]));return e}function L(e,t){var n=r();return null!=t?("string"==typeof t.indent&&(n.format.indent.style=t.indent),"number"==typeof t.base&&(n.format.indent.base=t.base),t=u(n,t),ie.indentUnit=t.format.indent.style,"string"==typeof t.base?ie.indent=t.base:ie.indent=l(ie.indentUnit,t.format.indent.base)):(t=n,ie.indentUnit=t.format.indent.style,ie.indent=l(ie.indentUnit,t.format.indent.base)),D=t.format.json,U=t.format.renumber,F=!D&&t.format.hexadecimal,B=D?"double":t.format.quotes,H=t.format.escapeless,ie.newline=t.format.newline,ie.optSpace=t.format.space,t.format.compact&&(ie.newline=ie.optSpace=ie.indentUnit=ie.indent=""),ie.space=ie.optSpace?ie.optSpace:" ",V=t.format.parentheses,W=t.format.semicolons,q=t.format.safeConcatenation,G=t.directive,K=D?null:t.parse,X=t,se=X.verbatim?k():ne,O(e)}e.__esModule=!0,e.generate=L;var R,D,U,F,B,H,V,W,q,G,X,K,$=e.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportBatchSpecifier:"ExportBatchSpecifier",ExportDeclaration:"ExportDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportSpecifier:"ImportSpecifier",ImportDeclaration:"ImportDeclaration",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleDeclaration:"ModuleDeclaration",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},z={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,TaggedTemplate:17,Member:18,Primary:19},Y={"||":z.LogicalOR,"&&":z.LogicalAND,"|":z.BitwiseOR,"^":z.BitwiseXOR,"&":z.BitwiseAND,"==":z.Equality,"!=":z.Equality,"===":z.Equality,"!==":z.Equality,is:z.Equality,isnt:z.Equality,"<":z.Relational,">":z.Relational,"<=":z.Relational,">=":z.Relational,"in":z.Relational,"instanceof":z.Relational,"<<":z.BitwiseSHIFT,">>":z.BitwiseSHIFT,">>>":z.BitwiseSHIFT,"+":z.Additive,"-":z.Additive,"*":z.Multiplicative,"%":z.Multiplicative,"/":z.Multiplicative},Q=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279],J=new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]");R=Array.isArray,R||(R=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var Z={e1:function(e){return{precedence:z.Assignment,allowIn:e,allowCall:!0,allowUnparenthesizedNew:!0}},e2:function(e){return{precedence:z.LogicalOR,allowIn:e,allowCall:!0,allowUnparenthesizedNew:!0}},e3:{precedence:z.Call,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!1},e4:{precedence:z.Assignment,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!0},e5:{precedence:z.Sequence,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!0},e6:function(e){return{precedence:z.New,allowIn:!0,allowCall:!1,allowUnparenthesizedNew:e}},e7:{precedence:z.Unary,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!0},e8:{precedence:z.Postfix,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!0},e9:{precedence:void 0,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!0},e10:{precedence:z.Call,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!0},e11:function(e){return{precedence:z.Call,allowIn:!0,allowCall:e,allowUnparenthesizedNew:!1}},e12:{precedence:z.Primary,allowIn:!1,allowCall:!1,allowUnparenthesizedNew:!0},e13:{precedence:z.Primary,allowIn:!0,allowCall:!0,allowUnparenthesizedNew:!0},e14:{precedence:z.Sequence,allowIn:!1,allowCall:!0,allowUnparenthesizedNew:!0},e15:function(e){return{precedence:z.Sequence,allowIn:!0,allowCall:e,allowUnparenthesizedNew:!0}},e16:function(e,t){return{precedence:e,allowIn:t,allowCall:!0,allowUnparenthesizedNew:!0}},e17:function(e){return{precedence:z.Call,allowIn:e,allowCall:!0,allowUnparenthesizedNew:!0}},e18:function(e){return{precedence:z.Assignment,allowIn:e,allowCall:!0,allowUnparenthesizedNew:!0}},e19:{precedence:z.Sequence,allowIn:!0,allowCall:!0,semicolonOptional:!1},s1:function(e,t){return{allowIn:!0,functionBody:!1,directiveContext:e,semicolonOptional:t}},s2:{allowIn:!0,functionBody:!1,directiveContext:!1,semicolonOptional:!0},s3:function(e){return{allowIn:e,functionBody:!1,directiveContext:!1,semicolonOptional:!1}},s4:function(e){return{allowIn:!0,functionBody:!1,directiveContext:!1,semicolonOptional:e}},s5:function(e){return{allowIn:!0,functionBody:!1,directiveContext:!0,semicolonOptional:e}},s6:{allowIn:!1,functionBody:!1,directiveContext:!1,semicolonOptional:!1},s7:{allowIn:!0,functionBody:!1,directiveContext:!1,semicolonOptional:!1},s8:{allowIn:!0,functionBody:!0,directiveContext:!1,semicolonOptional:!1}},ee=/[.eExX]|^0[0-9]+/,te=/[0-9]$/,ne={SequenceExpression:function(e,t){var n=e.expressions,r=n.length,o=r-1,i=z.Sequence<t.precedence,s=Z.e1(t.allowIn||i);i&&(ie.js+="(");for(var a=0;a<r;a++){var l=n[a];se[l.type](l,s),a!==o&&(ie.js+=","+ie.optSpace)}i&&(ie.js+=")")},AssignmentExpression:function(e,t){var n=e.left,r=e.right,o=z.Assignment<t.precedence,i=t.allowIn||o;o&&(ie.js+="("),se[n.type](n,Z.e17(i)),ie.js+=ie.optSpace+e.operator+ie.optSpace,se[r.type](r,Z.e18(i)),o&&(ie.js+=")")},AssignmentPattern:function(e){var t={left:e.left,right:e.right,operator:"="};se.AssignmentExpression(t,Z.e4)},ArrowFunctionExpression:function(e,t){var n=z.ArrowFunction<t.precedence;n&&(ie.js+="("),_(e),n&&(ie.js+=")")},ConditionalExpression:function(e,t){var n=e.test,r=e.consequent,o=e.alternate,i=z.Conditional<t.precedence,s=t.allowIn||i,a=Z.e2(s),l=Z.e1(s);i&&(ie.js+="("),se[n.type](n,a),ie.js+=ie.optSpace+"?"+ie.optSpace,se[r.type](r,l),ie.js+=ie.optSpace+":"+ie.optSpace,se[o.type](o,l),i&&(ie.js+=")")},LogicalExpression:x,BinaryExpression:x,CallExpression:function(e,t){var n=e.callee,r=e.arguments,o=r.length,i=o-1,s=!t.allowCall||z.Call<t.precedence;s&&(ie.js+="("),se[n.type](n,Z.e3),ie.js+="(";for(var a=0;a<o;++a){var l=r[a];se[l.type](l,Z.e4),a!==i&&(ie.js+=","+ie.optSpace)}ie.js+=")",s&&(ie.js+=")")},NewExpression:function(e,t){var n=e.arguments,r=z.New<t.precedence,o=n.length,i=o-1,s=!t.allowUnparenthesizedNew||V||o>0,a=N(e.callee,Z.e6(!s));if(r&&(ie.js+="("),ie.js+=g("new",a),s){ie.js+="(";for(var l=0;l<o;++l){var u=n[l];se[u.type](u,Z.e4),l!==i&&(ie.js+=","+ie.optSpace)}ie.js+=")"}r&&(ie.js+=")")},MemberExpression:function(e,t){var n=e.object,r=e.property,o=z.Member<t.precedence,i=!e.computed&&n.type===$.Literal&&"number"==typeof n.value;if(o&&(ie.js+="("),i){var s=N(n,Z.e11(t.allowCall)),a=te.test(s)&&!ee.test(s);ie.js+=a?s+".":s}else se[n.type](n,Z.e11(t.allowCall));e.computed?(ie.js+="[",se[r.type](r,Z.e15(t.allowCall)),ie.js+="]"):ie.js+="."+r.name,o&&(ie.js+=")")},UnaryExpression:function(e,t){var n=z.Unary<t.precedence,r=e.operator,i=N(e.argument,Z.e7);if(n&&(ie.js+="("),""===ie.optSpace||r.length>2)ie.js+=g(r,i);else{ie.js+=r;var s=r.charCodeAt(r.length-1),a=i.charCodeAt(0);(s===a&&(43===s||45===s)||o(s)&&o(a))&&(ie.js+=ie.space),ie.js+=i}n&&(ie.js+=")")},YieldExpression:function(e,t){var n=e.argument,r=e.delegate?"yield*":"yield",o=z.Yield<t.precedence;if(o&&(ie.js+="("),n){var i=N(n,Z.e4);r=g(r,i)}ie.js+=r,o&&(ie.js+=")")},UpdateExpression:function(e,t){var n=e.argument,r=e.operator,o=e.prefix,i=o?z.Unary:z.Postfix,s=i<t.precedence;s&&(ie.js+="("),o?(ie.js+=r,se[n.type](n,Z.e8)):(se[n.type](n,Z.e8),ie.js+=r),s&&(ie.js+=")")},FunctionExpression:function(e){var t=!!e.generator;ie.js+=t?"function*":"function",e.id?(ie.js+=t?ie.optSpace:ie.space,ie.js+=e.id.name):ie.js+=ie.optSpace,_(e)},ExportBatchSpecifier:function(){ie.js+="*"},ArrayPattern:T,ArrayExpression:T,ClassExpression:function(e){var t=e.id,n=e.superClass,r=e.body,o="class";if(t){var i=N(t,Z.e9);o=g(o,i)}if(n){var s=N(n,Z.e4);s=g("extends",s),o=g(o,s)}ie.js+=o+ie.optSpace,ae[r.type](r,Z.s2)},MethodDefinition:function(e){var t=e["static"]?"static"+ie.optSpace:"",n=N(e.key,Z.e5);e.computed&&(n="["+n+"]"),"get"===e.kind||"set"===e.kind?(n=g(e.kind,n),ie.js+=g(t,n)):e.value.generator?ie.js+=t+"*"+n:ie.js+=g(t,n),_(e.value)},Property:function(e){var t=e.value,n=e.kind,r=N(e.key,Z.e5);e.computed&&(r="["+r+"]"),"get"===n||"set"===n?(ie.js+=n+ie.space+r,_(t)):e.shorthand?ie.js+=r:e.method?(ie.js+=t.generator?"*"+r:r,_(t)):(ie.js+=r+":"+ie.optSpace,se[t.type](t,Z.e4))},ObjectExpression:function(e){var t=e.properties,n=t.length;if(n){var r=n-1,o=v();ie.js+="{";for(var i=0;i<n;i++){var s=t[i],a=s.type||$.Property;ie.js+=ie.newline+ie.indent,se[a](s,Z.e5),i!==r&&(ie.js+=",")}ie.indent=o,ie.js+=ie.newline+ie.indent+"}"}else ie.js+="{}"},ObjectPattern:function(e){var t=e.properties,n=t.length;if(n){var r=n-1,o=!1;if(1===n)o=t[0].value.type!==$.Identifier;else for(var i=0;i<n;i++)if(!t[i].shorthand){o=!0;break}ie.js+=o?"{"+ie.newline:"{";for(var s=v(),a=","+(o?ie.newline:ie.optSpace),i=0;i<n;i++){var l=t[i];o&&(ie.js+=ie.indent),se[l.type](l,Z.e5),i!==r&&(ie.js+=a)}ie.indent=s,ie.js+=o?ie.newline+ie.indent+"}":"}"}else ie.js+="{}"},ThisExpression:function(){ie.js+="this"},Identifier:function(e){ie.js+=e.name},ImportSpecifier:C,ExportSpecifier:C,Literal:function(e){if(X.raw&&void 0!==e.raw)ie.js+=e.raw;else if(null===e.value)ie.js+="null";else{var t=typeof e.value;"string"===t?ie.js+=y(e.value):"number"===t?ie.js+=c(e.value):"boolean"===t?ie.js+=e.value?"true":"false":ie.js+=d(e.value)}},GeneratorExpression:A,ComprehensionExpression:A,ComprehensionBlock:function(e){var t=e.left,n=void 0,r=N(e.right,Z.e5);n=t.type===$.VariableDeclaration?t.kind+ie.space+M(t.declarations[0],Z.s6):N(t,Z.e10),n=g(n,e.of?"of":"in"),ie.js+="for"+ie.optSpace+"("+g(n,r)+")"},RestElement:function(e){ie.js+="..."+e.argument.name},SpreadElement:function(e){var t=e.argument;ie.js+="...",se[t.type](t,Z.e4)},TaggedTemplateExpression:function(e,t){var n=e.tag,r=e.quasi,o=z.TaggedTemplate<t.precedence;o&&(ie.js+="("),se[n.type](n,Z.e11(t.allowCall)),se[r.type](r,Z.e12),o&&(ie.js+=")")},TemplateElement:function(e){ie.js+=e.value.raw},TemplateLiteral:function(e){var t=e.quasis,n=e.expressions,r=t.length,o=r-1;ie.js+="`";for(var i=0;i<r;++i){var s=t[i];if(se[s.type](s,Z.e13),i!==o){var a=n[i];ie.js+="${"+ie.optSpace,se[a.type](a,Z.e5),ie.js+=ie.optSpace+"}"}}ie.js+="`"},Super:function(){ie.js+="super"}},re=/^{|^class(?:\s|{)|^function(?:\s|\*|\()/,oe={BlockStatement:function(e,t){var n=e.body,r=n.length,o=r-1,i=v();ie.js+="{"+ie.newline;for(var s=0;s<r;s++){var a=n[s];ie.js+=ie.indent,ae[a.type](a,Z.s1(t.functionBody,s===o)),ie.js+=ie.newline}ie.indent=i,ie.js+=ie.indent+"}"},BreakStatement:function(e,t){e.label?ie.js+="break "+e.label.name:ie.js+="break",!W&&t.semicolonOptional||(ie.js+=";")},ContinueStatement:function(e,t){e.label?ie.js+="continue "+e.label.name:ie.js+="continue",!W&&t.semicolonOptional||(ie.js+=";")},ClassBody:function(e){var t=e.body,n=t.length,r=n-1,o=v();ie.js+="{"+ie.newline;for(var i=0;i<n;i++){var s=t[i],a=s.type||$.Property;ie.js+=ie.indent,se[a](s,Z.e5),i!==r&&(ie.js+=ie.newline)}ie.indent=o,ie.js+=ie.newline+ie.indent+"}"},ClassDeclaration:function(e){var t=e.body,n=e.superClass,r="class "+e.id.name;if(n){var o=N(n,Z.e4);r+=ie.space+g("extends",o)}ie.js+=r+ie.optSpace,ae[t.type](t,Z.s2)},DirectiveStatement:function(e,t){X.raw&&e.raw?ie.js+=e.raw:ie.js+=m(e.directive),!W&&t.semicolonOptional||(ie.js+=";")},DoWhileStatement:function(e,t){var n=e.body,r=e.test,o=E(n)+M(n,Z.s7)+b(n),i=g("do",o);ie.js+=g(i,"while"+ie.optSpace+"("),se[r.type](r,Z.e5),ie.js+=")",!W&&t.semicolonOptional||(ie.js+=";")},CatchClause:function(e){var t=e.param,n=e.guard,r=e.body,o=v();ie.js+="catch"+ie.optSpace+"(",se[t.type](t,Z.e5),n&&(ie.js+=" if ",se[n.type](n,Z.e5)),ie.indent=o,ie.js+=")"+E(r),ae[r.type](r,Z.s7)},DebuggerStatement:function(e,t){ie.js+="debugger",!W&&t.semicolonOptional||(ie.js+=";")},EmptyStatement:function(){ie.js+=";"},ExportDeclaration:function(e,t){var n=e.specifiers,r=e.declaration,o=W||!t.semicolonOptional;if(e["default"]){var i=N(r,Z.e4);ie.js+=g("export default",i),o&&(ie.js+=";")}else if(n){var s="export";if(0===n.length)s+=ie.optSpace+"{"+ie.optSpace+"}";else if(n[0].type===$.ExportBatchSpecifier){var a=N(n[0],Z.e5);s=g(s,a)}else{var l=v(),u=n.length,c=u-1;s+=ie.optSpace+"{";for(var p=0;p<u;++p)s+=ie.newline+ie.indent,s+=N(n[p],Z.e5),p!==c&&(s+=",");ie.indent=l,s+=ie.newline+ie.indent+"}"}e.source?(ie.js+=g(s,"from"+ie.optSpace),se.Literal(e.source)):ie.js+=s,o&&(ie.js+=";")}else if(r){var i=M(r,Z.s4(!o));ie.js+=g("export",i)}},ExpressionStatement:function(e,t){var n=N(e.expression,Z.e5),r=re.test(n)||G&&t.directiveContext&&e.expression.type===$.Literal&&"string"==typeof e.expression.value;r?ie.js+="("+n+")":ie.js+=n,!W&&t.semicolonOptional||(ie.js+=";")},ImportDeclaration:function(e,t){var n=e.specifiers,r="import",o=n.length;if(o){var i=!!n[0]["default"],s=i?1:0,a=o-1;if(i&&(r=g(r,n[0].id.name)),s<o){if(i&&(r+=","),r+=ie.optSpace+"{",s===a)r+=ie.optSpace+N(n[s],Z.e5)+ie.optSpace;else{for(var l=v(),u=s;u<o;u++)r+=ie.newline+ie.indent+N(n[u],Z.e5),u!==a&&(r+=",");ie.indent=l,r+=ie.newline+ie.indent}r+="}"+ie.optSpace}r=g(r,"from")}ie.js+=r+ie.optSpace,se.Literal(e.source),!W&&t.semicolonOptional||(ie.js+=";")},VariableDeclarator:function(e,t){var n=e.id,r=e.init,o=Z.e1(t.allowIn);r?(se[n.type](n,o),ie.js+=ie.optSpace+"="+ie.optSpace,se[r.type](r,o)):n.type===$.Identifier?ie.js+=n.name:se[n.type](n,o)},VariableDeclaration:function(e,t){var n=e.declarations,r=n.length,o=r>1?v():ie.indent,i=Z.s3(t.allowIn);ie.js+=e.kind;for(var s=0;s<r;s++){var a=n[s];ie.js+=0===s?ie.space:","+ie.optSpace,ae[a.type](a,i)}!W&&t.semicolonOptional||(ie.js+=";"),ie.indent=o},ThrowStatement:function(e,t){var n=N(e.argument,Z.e5);ie.js+=g("throw",n),!W&&t.semicolonOptional||(ie.js+=";")},TryStatement:function(e){var t=e.block,n=e.finalizer,r="try"+E(t)+M(t,Z.s7)+b(t),o=e.handlers||e.guardedHandlers;o&&(r=I(r,n,o)),e.handler&&(o=R(e.handler)?e.handler:[e.handler],r=I(r,n,o)),n&&(r=g(r,"finally"+E(n)),r+=M(n,Z.s7)),ie.js+=r},SwitchStatement:function(e){var t=e.cases,n=e.discriminant,r=v();if(ie.js+="switch"+ie.optSpace+"(",se[n.type](n,Z.e5),ie.js+=")"+ie.optSpace+"{"+ie.newline,ie.indent=r,t)for(var o=t.length,i=o-1,s=0;s<o;s++){var a=t[s];ie.js+=ie.indent,ae[a.type](a,Z.s4(s===i)),ie.js+=ie.newline}ie.js+=ie.indent+"}"},SwitchCase:function(e,t){var n=e.consequent,r=n[0],o=e.test,i=0,s=!W&&t.semicolonOptional,a=n.length,l=a-1,u=v();if(o){var c=N(o,Z.e5);ie.js+=g("case",c)+":"}else ie.js+="default:";for(a&&r.type===$.BlockStatement&&(i++,ie.js+=E(r),ae[r.type](r,Z.s7));i<a;i++){var p=n[i],d=i===l&&s;ie.js+=ie.newline+ie.indent,ae[p.type](p,Z.s4(d))}ie.indent=u},IfStatement:function(e,t){var n=e.consequent,r=e.test,o=v(),i=!W&&t.semicolonOptional;if(ie.js+="if"+ie.optSpace+"(",se[r.type](r,Z.e5),ie.js+=")",ie.indent=o,ie.js+=E(n),e.alternate){var s=M(n,Z.s7)+b(n),a=M(e.alternate,Z.s4(i));a=e.alternate.type===$.IfStatement?"else "+a:g("else",E(e.alternate)+a),ie.js+=g(s,a)}else ae[n.type](n,Z.s4(i))},ForStatement:function(e,t){var n=e.init,r=e.test,o=e.body,i=e.update,s=!W&&t.semicolonOptional,a=v();ie.js+="for"+ie.optSpace+"(",n?n.type===$.VariableDeclaration?ae[n.type](n,Z.s6):(se[n.type](n,Z.e14),ie.js+=";"):ie.js+=";",r&&(ie.js+=ie.optSpace,se[r.type](r,Z.e5)),ie.js+=";",i&&(ie.js+=ie.optSpace,se[i.type](i,Z.e5)),ie.js+=")",ie.indent=a,ie.js+=E(o),ae[o.type](o,Z.s4(s))},ForInStatement:function(e,t){P("in",e,t)},ForOfStatement:function(e,t){P("of",e,t)},LabeledStatement:function(e,t){var n=e.body,r=!W&&t.semicolonOptional,o=ie.indent;ie.js+=e.label.name+":"+E(n),n.type!==$.BlockStatement&&(o=v()),ae[n.type](n,Z.s4(r)),ie.indent=o},ModuleDeclaration:function(e,t){ie.js+="module"+ie.space+e.id.name+ie.space+"from"+ie.optSpace,se.Literal(e.source),!W&&t.semicolonOptional||(ie.js+=";")},Program:function(e){var t=e.body,n=t.length,r=n-1;q&&n>0&&(ie.js+="\n");for(var o=0;o<n;o++){var i=t[o];ie.js+=ie.indent,ae[i.type](i,Z.s5(!q&&o===r)),o!==r&&(ie.js+=ie.newline)}},FunctionDeclaration:function(e){var t=!!e.generator;ie.js+=t?"function*"+ie.optSpace:"function"+ie.space,ie.js+=e.id.name,_(e)},ReturnStatement:function(e,t){var n=e.argument;if(n){var r=N(n,Z.e5);ie.js+=g("return",r)}else ie.js+="return";!W&&t.semicolonOptional||(ie.js+=";")},WhileStatement:function(e,t){var n=e.body,r=e.test,o=!W&&t.semicolonOptional,i=v();ie.js+="while"+ie.optSpace+"(",se[r.type](r,Z.e5),ie.js+=")",ie.indent=i,ie.js+=E(n),ae[n.type](n,Z.s4(o))},WithStatement:function(e,t){var n=e.body,r=e.object,o=!W&&t.semicolonOptional,i=v();ie.js+="with"+ie.optSpace+"(",se[r.type](r,Z.e5),ie.js+=")",ie.indent=i,ie.js+=E(n),ae[n.type](n,Z.s4(o))}},ie={js:"",newline:"\n",optSpace:" ",space:" ",indentUnit:"    ",indent:""},se=void 0,ae=oe}},"transform.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return{start:e.originStart,end:e.originEnd,index:Array.isArray(t[n])?t[n].indexOf(e):-1,parent:t,key:n}}function i(e,t,n,r,o){var i=t.type===h.Syntax.NewExpression,s=i&&!e.newExpressionAncestor;return{hasTransformedAncestor:e.hasTransformedAncestor||o,newExpressionAncestor:s?t:e.newExpressionAncestor,newExpressionAncestorParent:s?n:e.newExpressionAncestorParent,newExpressionAncestorKey:s?r:e.newExpressionAncestorKey}}function s(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];if("[object Array]"===m.call(o))for(var i=0;i<o.length;i++)u(o[i],e,r,t,n);else u(o,e,r,t,n)}}function a(e){return void 0!==e.originStart&&void 0!==e.originEnd}function l(e,t,n,r,i){var s=e.hasTransformedAncestor;s|=e.newExpressionAncestor&&a(e.newExpressionAncestor),s||(e.newExpressionAncestor?((0,f["default"])(e.newExpressionAncestor,e.newExpressionAncestor,e.newExpressionAncestorParent,e.newExpressionAncestorKey),t.push(o(e.newExpressionAncestor,e.newExpressionAncestorParent,e.newExpressionAncestorKey))):t.push(o(n,r,i)))}function u(e,t,n,r,o,c){if(o=o||{},r=r||[],!e||"object"!=typeof e)return null;var d=!1;if(a(e)&&!c)l(o,r,e,t,n),d=!0;else{var h=p["default"][e.type];if(h)for(var m=0;m<h.length;m++){var y=h[m];if(y.condition(e,t)){var g=y.run(e,t,n);if(g){if((0,f["default"])(e,g,t,n),d=!0,l(o,r,g,t,n),y.nodeReplacementRequireTransform){var v=i(o,g,t,n,d);return u(g,t,n,r,v,!0),r}break}}}}var E=i(o,e,t,n,d);return s(e,r,E),r}e.__esModule=!0,e["default"]=u;var c=n("./transformers"),p=r(c),d=n("./transformers/replace-node"),f=r(d),h=n("./tools/esotope"),m=Object.prototype.toString;t.exports=e["default"]},transformers:{"computed-property-get.js":function(e,t,n){e.__esModule=!0;var r=n("../node-builder"),o=n("../tools/esotope"),i=n("../instrumented");e["default"]={nodeReplacementRequireTransform:!0,nodeTypes:[o.Syntax.MemberExpression],condition:function(e,t){return!!e.computed&&(!(e.property.type===o.Syntax.Literal&&!(0,i.shouldInstrumentProperty)(e.property.value))&&(e.object.type!==o.Syntax.Super&&((t.type!==o.Syntax.AssignmentExpression||t.left!==e)&&((t.type!==o.Syntax.UnaryExpression||"delete"!==t.operator)&&((t.type!==o.Syntax.UpdateExpression||"++"!==t.operator)&&"--"!==t.operator&&((t.type!==o.Syntax.CallExpression||t.callee!==e)&&((t.type!==o.Syntax.NewExpression||t.callee!==e)&&(t.type!==o.Syntax.ForInStatement||t.left!==e))))))))},run:function(e){return(0,r.createComputedPropertyGetWrapper)(e.property,e.object)}},t.exports=e["default"]},"computed-property-set.js":function(e,t,n){e.__esModule=!0;var r=n("../node-builder"),o=n("../tools/esotope"),i=n("../instrumented");e["default"]={nodeReplacementRequireTransform:!0,nodeTypes:[o.Syntax.AssignmentExpression],condition:function(e){var t=e.left;return(t.type!==o.Syntax.MemberExpression||t.object.type!==o.Syntax.Super)&&(!("="!==e.operator||t.type!==o.Syntax.MemberExpression||!t.computed)&&(t.property.type!==o.Syntax.Literal||(0,i.shouldInstrumentProperty)(t.property.value)))},run:function(e){return(0,r.createComputedPropertySetWrapper)(e.left.property,e.left.object,e.right)}},t.exports=e["default"]},"concat-operator.js":function(e,t,n){e.__esModule=!0;var r=n("../node-builder"),o=n("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!0,nodeTypes:[o.Syntax.AssignmentExpression],condition:function(e){return"+="===e.operator},run:function(e){return(0,r.createExpandedConcatOperation)(e.left,e.right)}},t.exports=e["default"]},"eval-call-apply.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=n("../node-builder"),i=n("../tools/esotope"),s=n("./replace-node"),a=r(s),l=/^(call|apply)$/;e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[i.Syntax.CallExpression],condition:function(e){if(e.arguments.length<2)return!1;if(e.callee.type===i.Syntax.MemberExpression&&l.test(e.callee.property.name)){var t=e.callee.object;if(t.type===i.Syntax.MemberExpression&&"eval"===(t.property.value||t.property.name))return!0;if("eval"===t.name)return!0}return!1},run:function(e){var t="apply"===e.callee.property.name,n=(0,o.createProcessScriptMethCall)(e.arguments[1],t);return(0,a["default"])(e.arguments[1],n,e,"arguments"),null}},t.exports=e["default"]},"eval-get.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=n("../instruction"),i=r(o),s=n("../node-builder"),a=n("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[a.Syntax.Identifier],condition:function(e,t){return"eval"===e.name&&((t.type!==a.Syntax.CallExpression||t.callee!==e)&&(t.type!==a.Syntax.MethodDefinition&&(t.type!==a.Syntax.ClassDeclaration&&(t.type!==a.Syntax.MemberExpression&&((t.type!==a.Syntax.FunctionExpression&&t.type!==a.Syntax.FunctionDeclaration||t.id!==e)&&((t.type!==a.Syntax.FunctionExpression&&t.type!==a.Syntax.FunctionDeclaration&&t.type!==a.Syntax.ArrowFunctionExpression||t.params.indexOf(e)===-1)&&((t.type!==a.Syntax.Property||t.key!==e)&&((t.type!==a.Syntax.AssignmentExpression&&t.type!==a.Syntax.AssignmentPattern||t.left!==e)&&((t.type!==a.Syntax.VariableDeclarator||t.id!==e)&&((t.type!==a.Syntax.UpdateExpression||"++"!==t.operator)&&"--"!==t.operator&&((t.type!==a.Syntax.CallExpression||t.callee.name!==i["default"].getEval)&&t.type!==a.Syntax.RestElement)))))))))))},run:s.createGetEvalMethCall},t.exports=e["default"]},"eval.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=n("../node-builder"),i=n("./replace-node"),s=r(i),a=n("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[a.Syntax.CallExpression],condition:function(e){return!!e.arguments.length&&(e.callee.type===a.Syntax.Identifier&&"eval"===e.callee.name||e.callee.type===a.Syntax.MemberExpression&&"eval"===(e.callee.property.name||e.callee.property.value))},run:function(e){var t=(0,o.createProcessScriptMethCall)(e.arguments[0]);return(0,s["default"])(e.arguments[0],t,e,"arguments"),null}},t.exports=e["default"]},"for-in.js":function(e,t,n){
function r(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=n("../tools/esotope"),i=n("../node-builder"),s=n("./replace-node"),a=r(s);e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[o.Syntax.ForInStatement],condition:function(e){return e.left.type===o.Syntax.MemberExpression},run:function(e){var t=(0,i.createTempVarIdentifier)(),n=(0,i.createVarDeclaration)(t),r=(0,i.createAssignmentExprStmt)(e.left,t);return(0,a["default"])(null,r,e.body,"body"),(0,a["default"])(e.left,n,e,"left"),null}},t.exports=e["default"]},"index.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=n("./computed-property-get"),i=r(o),s=n("./computed-property-set"),a=r(s),l=n("./concat-operator"),u=r(l),c=n("./eval"),p=r(c),d=n("./eval-call-apply"),f=r(d),h=n("./eval-get"),m=r(h),y=n("./window-eval-get"),g=r(y),v=n("./post-message-get"),E=r(v),b=n("./window-post-message-get"),S=r(b),w=n("./post-message-call-apply"),_=r(w),x=n("./for-in"),T=r(x),C=n("./location-get"),A=r(C),I=n("./storage-get"),P=r(I),N=n("./location-property-get"),M=r(N),O=n("./location-set"),j=r(O),k=n("./property-get"),L=r(k),R=n("./property-set"),D=r(R),U=n("./method-call"),F=r(U),B=n("./js-protocol-last-expression"),H=r(B),V=[i["default"],a["default"],u["default"],p["default"],f["default"],m["default"],g["default"],E["default"],S["default"],_["default"],T["default"],A["default"],P["default"],M["default"],j["default"],L["default"],D["default"],F["default"],H["default"]];e["default"]=function(){for(var e={},t=0;t<V.length;t++)for(var n=V[t],r=0;r<n.nodeTypes.length;r++){var o=n.nodeTypes[r];e[o]||(e[o]=[]),e[o].push(n)}return e}(),t.exports=e["default"]},"js-protocol-last-expression.js":function(e,t,n){e.__esModule=!0;var r=n("../node-builder"),o=n("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!0,nodeTypes:[o.Syntax.ExpressionStatement],condition:function(e,t){return t.wrapLastExprWithProcessHtml&&t.body[t.body.length-1]===e},run:function(e,t){return t.wrapLastExprWithProcessHtml=!1,(0,r.createHtmlProcessorWrapper)(e)}},t.exports=e["default"]},"location-get.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=n("../node-builder"),i=n("../instruction"),s=r(i),a=n("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[a.Syntax.Identifier],condition:function(e,t){return"location"===e.name&&((t.type!==a.Syntax.VariableDeclarator||t.id!==e)&&((t.type!==a.Syntax.AssignmentExpression&&t.type!==a.Syntax.AssignmentPattern||t.left!==e)&&((t.type!==a.Syntax.FunctionExpression&&t.type!==a.Syntax.FunctionDeclaration||t.id!==e)&&(t.type!==a.Syntax.MemberExpression&&((t.type!==a.Syntax.Property||t.key!==e)&&((t.type!==a.Syntax.UpdateExpression||"++"!==t.operator)&&"--"!==t.operator&&((t.type!==a.Syntax.FunctionExpression&&t.type!==a.Syntax.FunctionDeclaration&&t.type!==a.Syntax.ArrowFunctionExpression||t.params.indexOf(e)===-1)&&((t.type!==a.Syntax.CallExpression||t.callee.name!==s["default"].getLocation)&&(t.type!==a.Syntax.MethodDefinition&&(t.type!==a.Syntax.ClassDeclaration&&t.type!==a.Syntax.RestElement))))))))))},run:function(){return(0,o.createLocationGetWrapper)()}},t.exports=e["default"]},"location-property-get.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=n("../node-builder"),i=n("../tools/esotope"),s=n("./replace-node"),a=r(s);e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[i.Syntax.MemberExpression],condition:function(e,t){return(t.type!==i.Syntax.ForInStatement||t.left!==e)&&"location"===e.object.name},run:function(e){return(0,a["default"])(e.object,(0,o.createLocationGetWrapper)(),e,"object"),null}},t.exports=e["default"]},"location-set.js":function(e,t,n){e.__esModule=!0;var r=n("../node-builder"),o=n("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[o.Syntax.AssignmentExpression],condition:function(e){return"="===e.operator&&e.left.type===o.Syntax.Identifier&&"location"===e.left.name},run:function(e,t,n){var i="arguments"!==n&&"consequent"!==n&&"alternate"!==n&&(t.type!==o.Syntax.SequenceExpression||t.expressions[0]===e);return(0,r.createLocationSetWrapper)(e.right,i)}},t.exports=e["default"]},"method-call.js":function(e,t,n){e.__esModule=!0;var r=n("../node-builder"),o=n("../tools/esotope"),i=n("../instrumented");e["default"]={nodeReplacementRequireTransform:!0,nodeTypes:[o.Syntax.CallExpression],condition:function(e){var t=e.callee;return t.type===o.Syntax.MemberExpression&&(t.computed?t.property.type!==o.Syntax.Literal||(0,i.shouldInstrumentMethod)(t.property.value):(0,i.shouldInstrumentMethod)(t.property.name))},run:function(e){var t=e.callee,n=t.computed?t.property:(0,r.createStringLiteral)(t.property.name);return(0,r.createMethCallWrapper)(t.object,n,e.arguments)}},t.exports=e["default"]},"post-message-call-apply.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=n("../node-builder"),i=n("../tools/esotope"),s=n("./replace-node"),a=r(s),l=/^(call|apply)$/;e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[i.Syntax.CallExpression],condition:function(e){if(e.arguments.length<2)return!1;if(e.callee.type===i.Syntax.MemberExpression&&l.test(e.callee.property.name)){var t=e.callee.object;if(t.type===i.Syntax.MemberExpression&&"postMessage"===(t.property.value||t.property.name))return!0;if("postMessage"===t.name)return!0}return!1},run:function(e){var t=(0,o.createGetPostMessageMethCall)(e.callee.object);return(0,a["default"])(e.callee.object,t,e.callee,"object"),null}},t.exports=e["default"]},"post-message-get.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=n("../instruction"),i=r(o),s=n("../node-builder"),a=n("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[a.Syntax.Identifier],condition:function(e,t){return"postMessage"===e.name&&(t.type!==a.Syntax.MemberExpression&&(t.type!==a.Syntax.MethodDefinition&&(t.type!==a.Syntax.ClassDeclaration&&((t.type!==a.Syntax.FunctionExpression&&t.type!==a.Syntax.FunctionDeclaration||t.id!==e)&&((t.type!==a.Syntax.FunctionExpression&&t.type!==a.Syntax.FunctionDeclaration&&t.type!==a.Syntax.ArrowFunctionExpression||t.params.indexOf(e)===-1)&&((t.type!==a.Syntax.Property||t.key!==e)&&((t.type!==a.Syntax.AssignmentExpression&&t.type!==a.Syntax.AssignmentPattern||t.left!==e)&&((t.type!==a.Syntax.VariableDeclarator||t.id!==e)&&((t.type!==a.Syntax.UpdateExpression||"++"!==t.operator)&&"--"!==t.operator&&((t.type!==a.Syntax.CallExpression||t.callee.name!==i["default"].getPostMessage&&(t.callee.name!==i["default"].callMethod||t.arguments[1]!==e))&&t.type!==a.Syntax.RestElement))))))))))},run:s.createGetPostMessageMethCall},t.exports=e["default"]},"property-get.js":function(e,t,n){e.__esModule=!0;var r=n("../node-builder"),o=n("../tools/esotope"),i=n("../instrumented");e["default"]={nodeReplacementRequireTransform:!0,nodeTypes:[o.Syntax.MemberExpression],condition:function(e,t){return!e.computed&&(!!(0,i.shouldInstrumentProperty)(e.property.name)&&(e.object.type!==o.Syntax.Super&&((t.type!==o.Syntax.AssignmentExpression||t.left!==e)&&((t.type!==o.Syntax.UnaryExpression||"delete"!==t.operator)&&((t.type!==o.Syntax.CallExpression||t.callee!==e)&&((t.type!==o.Syntax.UpdateExpression||"++"!==t.operator)&&"--"!==t.operator&&((t.type!==o.Syntax.NewExpression||t.callee!==e)&&(t.type!==o.Syntax.ForInStatement||t.left!==e))))))))},run:function(e){return(0,r.createPropertyGetWrapper)(e.property.name,e.object)}},t.exports=e["default"]},"property-set.js":function(e,t,n){e.__esModule=!0;var r=n("../node-builder"),o=n("../tools/esotope"),i=n("../instrumented");e["default"]={nodeReplacementRequireTransform:!0,nodeTypes:[o.Syntax.AssignmentExpression],condition:function(e){return(e.left.type!==o.Syntax.MemberExpression||e.left.object.type!==o.Syntax.Super)&&("="===e.operator&&e.left.type===o.Syntax.MemberExpression&&!e.left.computed&&e.left.property.type===o.Syntax.Identifier&&(0,i.shouldInstrumentProperty)(e.left.property.name))},run:function(e){return(0,r.createPropertySetWrapper)(e.left.property.name,e.left.object,e.right)}},t.exports=e["default"]},"replace-node.js":function(e,t,n){function r(e,t,n,r){if(Array.isArray(n[r]))if(e){var o=n[r].indexOf(e);n[r][o]=t}else n[r].unshift(t);else n[r]=t;if(e)t.originStart=t.start=e.start,t.originEnd=t.end=e.end;else{var i=parseInt(n.start,10)+1;t.originStart=t.originEnd=i}}e.__esModule=!0,e["default"]=r,t.exports=e["default"]},"storage-get.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=n("../node-builder"),i=n("../instruction"),s=r(i),a=n("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[a.Syntax.Identifier],condition:function(e,t){return("sessionStorage"===e.name||"localStorage"===e.name)&&((t.type!==a.Syntax.FunctionExpression&&t.type!==a.Syntax.FunctionDeclaration||t.id!==e)&&((t.type!==a.Syntax.MemberExpression||t.property!==e)&&((t.type!==a.Syntax.VariableDeclarator||t.id!==e)&&((t.type!==a.Syntax.AssignmentExpression&&t.type!==a.Syntax.AssignmentPattern||t.left!==e)&&((t.type!==a.Syntax.Property||t.key!==e)&&((t.type!==a.Syntax.UpdateExpression||"++"!==t.operator)&&"--"!==t.operator&&((t.type!==a.Syntax.FunctionExpression&&t.type!==a.Syntax.FunctionDeclaration&&t.type!==a.Syntax.ArrowFunctionExpression||t.params.indexOf(e)===-1)&&((t.type!==a.Syntax.CallExpression||t.callee.name!==s["default"].getStorage)&&(t.type!==a.Syntax.MethodDefinition&&(t.type!==a.Syntax.ClassDeclaration&&t.type!==a.Syntax.RestElement))))))))))},run:function(e){return(0,o.createGetStorageMethCall)(e.name)}},t.exports=e["default"]},"window-eval-get.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=n("../instruction"),i=r(o),s=n("../node-builder"),a=n("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[a.Syntax.MemberExpression],condition:function(e,t){return(t.type!==a.Syntax.MemberExpression||t.property!==e&&t.object!==e)&&((t.type!==a.Syntax.CallExpression||t.callee!==e)&&((t.type!==a.Syntax.AssignmentExpression||t.left!==e)&&((t.type!==a.Syntax.CallExpression||t.callee.name!==i["default"].getEval)&&(e.property.type===a.Syntax.Identifier&&"eval"===e.property.name||e.property.type===a.Syntax.Literal&&"eval"===e.property.value))))},run:s.createGetEvalMethCall},t.exports=e["default"]},"window-post-message-get.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}e.__esModule=!0;var o=n("../instruction"),i=r(o),s=n("../node-builder"),a=n("../tools/esotope");e["default"]={nodeReplacementRequireTransform:!1,nodeTypes:[a.Syntax.MemberExpression],condition:function(e,t){return(t.type!==a.Syntax.MemberExpression||t.property!==e&&t.object!==e)&&((t.type!==a.Syntax.CallExpression||t.callee!==e)&&((t.type!==a.Syntax.AssignmentExpression||t.left!==e)&&((t.type!==a.Syntax.CallExpression||t.callee.name!==i["default"].getPostMessage)&&(e.property.type===a.Syntax.Identifier&&"postMessage"===e.property.name||e.property.type===a.Syntax.Literal&&"postMessage"===e.property.value))))},run:s.createGetPostMessageMethCall},t.exports=e["default"]}}},"style.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("../utils/regexp-escape"),s=r(i),a=n("../processing/dom/internal-attributes"),l=r(a),u=n("../utils/url"),c=/#\s*sourceMappingURL\s*=\s*[^\s]+(\s|\*\/)/i,p=/(url\s*\(\s*)(?:(')([^\s']*)(')|(")([^\s"]*)(")|([^\s\)]*))(\s*\))|(@import\s+)(?:(')([^\s']*)(')|(")([^\s"]*)("))/g,d="/*hammerhead|stylesheet|start*/",f="/*hammerhead|stylesheet|end*/",h=/\s*:\s*hover(\W)/gi,m=new RegExp("\\["+l["default"].hoverPseudoClass+"\\](\\W)","ig"),y=new RegExp("\\s*"+(0,s["default"])(d),"gi"),g=new RegExp("\\s*"+(0,s["default"])(d)+"\n?|"+("\n?"+(0,s["default"])(f)+"\\s*"),"gi"),v=function(){function e(){o(this,e),this.STYLESHEET_PROCESSING_START_COMMENT=d,this.STYLESHEET_PROCESSING_END_COMMENT=f}return e.prototype.process=function(e,t,n){if(!e||"string"!=typeof e||y.test(e))return e;var r=n?d+"\n":"",o=n?"\n"+f:"";return e=e.replace(h,"["+l["default"].hoverPseudoClass+"]$1"),e=e.replace(c,"$1"),r+this._replaceStylsheetUrls(e,t)+o},e.prototype.cleanUp=function(e,t){return"string"!=typeof e?e:(e=e.replace(m,":hover$1").replace(g,""),this._replaceStylsheetUrls(e,function(e){var n=t(e);return n?n.destUrl:e}))},e.prototype._replaceStylsheetUrls=function(e,t){return e.replace(p,function(e,n,r,o,i,s,a,l,c,p,d,f,h,m,y,g,v){var E=n||d,b=r||s||f||y||"",S=o||a||c||h||g,w=i||l||m||v||"";p=p||"";var _=(0,u.isSpecialPage)(S)?S:t(S);return S?E+b+_+w+p:e})},e}();e["default"]=new v,t.exports=e["default"]}},"request-pipeline":{xhr:{"authorization.js":function(e,t,n){e.__esModule=!0,e["default"]={valuePrefix:"hammerhead|prefix|by-client",headers:["authorization","authentication-info","proxy-authenticate","proxy-authorization"]},t.exports=e["default"]},"headers.js":function(e,t,n){e.__esModule=!0,e["default"]={requestMarker:"x-hammerhead|xhr|request-marker",corsSupported:"x-hammerhead|xhr|cors-supported",withCredentials:"x-hammerhead|xhr|with-credentials",origin:"x-hammerhead|xhr|origin",setCookie:"x-hammerhead|xhr|set-cookie",fetchRequestCredentials:"x-hammerhead|fetch|request-credentials"},t.exports=e["default"]},"same-origin-policy.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.dest.reqOrigin;if(e.dest.domain===t)return!0;var n=!!e.req.headers[s["default"].corsSupported]||e.isFetch;if(!n)return!1;if("OPTIONS"===e.req.method)return!0;var r=!!e.req.headers[s["default"].withCredentials]||"include"===e.req.headers[s["default"].fetchRequestCredentials],o=e.destRes.headers["access-control-allow-origin"],i=e.destRes.headers["access-control-allow-credentials"],a="true"===String(i).toLowerCase(),l=Array.isArray(o)?o:[o],u=l.indexOf("*")>-1;return!!o&&(!(r&&(!a||u))&&(u||l.indexOf(t)>-1))}e.__esModule=!0,e.SAME_ORIGIN_CHECK_FAILED_STATUS_CODE=void 0,e.check=o;var i=n("./headers"),s=r(i);e.SAME_ORIGIN_CHECK_FAILED_STATUS_CODE=222}}},session:{"command.js":function(e,t,n){e.__esModule=!0;var r={getUploadedFiles:"hammerhead|command|get-uploaded-files",setCookie:"hammerhead|command|set-cookie",uploadFiles:"hammerhead|command|upload-files"};e["default"]=r,t.exports=e["default"]},"cookie-limit.js":function(e,t,n){e.__esModule=!0;var r=4096;e["default"]=r,t.exports=e["default"]}},"shadow-ui":{"class-name.js":function(e,t,n){e.__esModule=!0;var r="-hammerhead-shadow-ui";e["default"]={postfix:r,charset:"charset"+r,script:"script"+r,selfRemovingScript:"self-removing-script"+r,uiStylesheet:"ui-stylesheet"+r},t.exports=e["default"]}},utils:{"get-bom.js":function(e,t,n){e.__esModule=!0,e["default"]=function(e){var t=e.match(r);return t?t[0]:null};var r=/^(\xEF\xBB\xBF|\xFE\xFF|\xFF\xFE|\x00\x00\xFE\xFF|\xFF\xFE\x00\x00|\x2B\x2F\x76\x38|\x2B\x2F\x76\x39|\x2B\x2F\x76\x2B|\x2B\x2F\x76\x2F|\xF7\x64\x4C|\xDD\x73\x66\x73|\x0E\xFE\xFF|\xFB\xEE\x28|\x84\x31\x95\x33)/;t.exports=e["default"]},"get-storage-key.js":function(e,t,n){function r(e,t){return o+e+"|"+t}e.__esModule=!0,e["default"]=r;var o="hammerhead|storage-wrapper|";t.exports=e["default"]},"regexp-escape.js":function(e,t,n){e.__esModule=!0,e["default"]=function(e){return e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")},t.exports=e["default"]},"string-trim.js":function(e,t,n){e.__esModule=!0,e["default"]=function(e){return"string"==typeof e?e.replace(/(^\s+)|(\s+$)/g,""):e},t.exports=e["default"]},"url.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e?{isIframe:/i/.test(e),isForm:/f/.test(e),isScript:/s/.test(e),isEventSource:/e/.test(e),isHtmlImport:/h/.test(e),isWebSocket:/w/.test(e)}:{isIframe:!1,isForm:!1,isScript:!1,isEventSource:!1,isHtmlImport:!1,isWebSocket:!1}}function i(e){return e=e||{},e.isIframe||e.isForm||e.isScript||e.isEventSource||e.isHtmlImport||e.isWebSocket?[e.isIframe?"i":"",e.isForm?"f":"",e.isScript?"s":"",e.isEventSource?"e":"",e.isHtmlImport?"h":"",e.isWebSocket?"w":""].join(""):null}function s(e,t){if(e=e.replace(/^www./i,""),t=t.replace(/^www./i,""),e===t)return!0;var n=t.lastIndexOf(e);return"."===t[n-1]&&t.length===n+e.length}function a(e,t,n){if(!t)return!0;var r=h(e),o=h(t),i=d(e),a=i?i.destResourceInfo:r,l=!o.host;if(l||o.host===r.host&&o.protocol===r.protocol)return!0;if(a){var u=!a.port&&!o.port||a.port&&a.port.toString()===o.port;if(a.protocol===o.protocol&&u){if(a.hostname===o.hostname)return!0;var c=s(a.hostname,o.hostname)||s(o.hostname,a.hostname);return!n&&c}}return!1}function l(e){var t=h(e),n="about:"===t.protocol?"":"//";return(t.protocol+n+t.host).toLowerCase()+t.partAfterHost}function u(e,t){var n=[t.sessionId];t.resourceType&&n.push(t.resourceType),t.charset&&n.push(t.charset.toLowerCase()),t.reqOrigin&&n.push(t.reqOrigin),n=n.join(L);var r=t.proxyProtocol||"http:";return r+"//"+t.proxyHostname+":"+t.proxyPort+"/"+n+"/"+l(e)}function c(e){return g({protocol:e.protocol,host:e.host,hostname:e.hostname,port:e.port})}function p(e){var t=e.split(L);if(!t.length)return null;var n=t[0],r=t[1]||null,i=t[2]||null,s={sessionId:n,resourceType:r};if(r&&i){var a=o(r);a.isScript?s.charset=i:a.isWebSocket&&(s.reqOrigin=decodeURIComponent(i))}return s}function d(e){var t=h(e);if(!t.partAfterHost)return null;var n=t.partAfterHost.match(M);if(!n)return null;var r=p(n[1]);if(!r)return null;var o=n[2];if(!b(o)&&!j.test(o))return null;var i=b(o)?{protocol:"about:",host:"",hostname:"",port:"",partAfterHost:""}:h(n[2]);return{destUrl:o,destResourceInfo:i,partAfterHost:t.partAfterHost,proxy:{hostname:t.hostname,port:t.port},sessionId:r.sessionId,resourceType:r.resourceType,charset:r.charset,reqOrigin:r.reqOrigin}}function f(e){return e.replace(N,"")}function h(e){var t={};if(e=v(e),!e)return t;e=(0,T["default"])(e);var n=!1,r=e.replace(C,function(e,n,r){return t.protocol=n,r}).replace(A,function(){return n=!0,""});return t.protocol||n?(t.partAfterHost=r.replace(I,function(e,n,r){return t.host=n,r}),t.hostname=t.host?t.host.replace(P,function(e,n){return t.port=n,""}):"",t):(t.partAfterHost=e,t)}function m(e){e=(0,T["default"])(e||"");var t=k.test(e);if(t)return!1;var n=e.match(C);return!n||j.test(n[0])}function y(e,t){if(t=t||u,m(e)){var n=t(e),r=d(n);return g(r.destResourceInfo)}return e}function g(e){if(!("file:"===e.protocol||e.host||e.hostname&&e.port))return e.partAfterHost;var t=e.protocol||"";return t+="//",(e.username||e.password)&&(t+=e.username+":"+e.password+"@"),e.host?t+=e.host:(t+=e.hostname,e.port&&(t+=":"+e.port)),e.partAfterHost&&(t+=e.partAfterHost),t}function v(e){return null===e&&/iPad|iPhone/i.test(window.navigator.userAgent)?"":(e=String(e),e=e.replace(/\n|\t/g,""),e.replace(/^(https?:)?\/+(\/\/.*$)/i,"$1$2").replace(/^file:\/*([A-Za-z]):/,"file:///$1:"))}function E(e,t){var n=O.test(e),r=O.test(t);return n&&!r?t+="/":!n&&r&&(t=t.replace(O,"")),t}function b(e){return R.indexOf(e)!==-1}function S(e){var t=h(e);return"file:"!==t.protocol&&!t.host}function w(e){var t=parseInt(e,10);return t>0&&t<=65535}function _(e){var t=h(e);return"file:"===t.protocol||t.hostname&&(!t.port||w(t.port))}e.__esModule=!0,e.SPECIAL_PAGES=e.REQUEST_DESCRIPTOR_VALUES_SEPARATOR=e.HASH_RE=e.SUPPORTED_PROTOCOL_RE=void 0,e.parseResourceType=o,e.getResourceTypeString=i,e.isSubDomain=s,e.sameOriginCheck=a,e.getProxyUrl=u,e.getDomain=c,e.parseProxyUrl=d,e.getPathname=f,e.parseUrl=h,e.isSupportedProtocol=m,e.resolveUrlAsDest=y,e.formatUrl=g,e.prepareUrl=v,e.ensureTrailingSlash=E,e.isSpecialPage=b,e.isRelativeUrl=S,e.isValidUrl=_;var x=n("./string-trim"),T=r(x),C=/^([\w-]+?:)(\/\/|[^\\\/]|$)/,A=/^(\/\/)/,I=/^(.*?)(\/|%|\?|;|#|$)/,P=/:([0-9]*)$/,N=/(\?.+|#[^#]*)$/,M=/^\/([^\/]+?)\/([\S\s]+)$/,O=/\/$/,j=e.SUPPORTED_PROTOCOL_RE=/^(?:https?|file):/i,k=e.HASH_RE=/^#/,L=e.REQUEST_DESCRIPTOR_VALUES_SEPARATOR="!",R=e.SPECIAL_PAGES=["about:blank","about:error"]}}}}})("testcafe-hammerhead/src/client/index")}initHammerheadClient(window)}();